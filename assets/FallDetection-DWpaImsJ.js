var Qu=Object.defineProperty;var ya=e=>{throw TypeError(e)};var Xu=(e,t,i)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var vt=(e,t,i)=>Xu(e,typeof t!="symbol"?t+"":t,i),Mr=(e,t,i)=>t.has(e)||ya("Cannot "+i);var L=(e,t,i)=>(Mr(e,t,"read from private field"),i?i.call(e):t.get(e)),Pt=(e,t,i)=>t.has(e)?ya("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Et=(e,t,i,n)=>(Mr(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),St=(e,t,i)=>(Mr(e,t,"access private method"),i);var In=(e,t,i,n)=>({set _(o){Et(e,t,o,i)},get _(){return L(e,t,n)}});import{_ as Ju}from"./PageHeader-DthbzxLh.js";import{g as Zu,d as _i,s as tf,e as yh,h as _h,i as ef,t as ns,n as nf,j as _a,k as wh,_ as vh,l as rf,o as rs,c as ss,a as Te,m as sf,b as Ee,w as Cn,F as wa,p as of,r as af,q as On}from"./index-D1O9Ue5K.js";var zo=Object.defineProperty,lf=Object.getOwnPropertyDescriptor,hf=Object.getOwnPropertyNames,cf=Object.prototype.hasOwnProperty,ee=(e,t)=>()=>(e&&(t=e(e=0)),t),bt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Mi=(e,t)=>{for(var i in t)zo(e,i,{get:t[i],enumerable:!0})},uf=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of hf(t))!cf.call(e,o)&&o!==i&&zo(e,o,{get:()=>t[o],enumerable:!(n=lf(t,o))||n.enumerable});return e},Nt=e=>uf(zo({},"__esModule",{value:!0}),e),ct=ee(()=>{}),Rt={};Mi(Rt,{_debugEnd:()=>js,_debugProcess:()=>Ns,_events:()=>Zs,_eventsCount:()=>to,_exiting:()=>xs,_fatalExceptions:()=>Bs,_getActiveHandles:()=>Ih,_getActiveRequests:()=>Th,_kill:()=>As,_linkedBinding:()=>kh,_maxListeners:()=>Js,_preload_modules:()=>Qs,_rawDebug:()=>ws,_startProfilerIdleNotifier:()=>Us,_stopProfilerIdleNotifier:()=>Fs,_tickCallback:()=>Ds,abort:()=>$s,addListener:()=>eo,allowedNodeEnvironmentFlags:()=>Ms,arch:()=>as,argv:()=>cs,argv0:()=>Gs,assert:()=>Ch,binding:()=>gs,chdir:()=>ys,config:()=>Es,cpuUsage:()=>on,cwd:()=>bs,debugPort:()=>Ks,default:()=>$o,dlopen:()=>Ah,domain:()=>Ss,emit:()=>oo,emitWarning:()=>ps,env:()=>hs,execArgv:()=>us,execPath:()=>Ys,exit:()=>Os,features:()=>Rs,hasUncaughtExceptionCaptureCallback:()=>Oh,hrtime:()=>Jn,kill:()=>Cs,listeners:()=>Mh,memoryUsage:()=>Is,moduleLoadList:()=>vs,nextTick:()=>xh,off:()=>no,on:()=>Ne,once:()=>io,openStdin:()=>Ps,pid:()=>Vs,platform:()=>ls,ppid:()=>qs,prependListener:()=>ao,prependOnceListener:()=>lo,reallyExit:()=>ks,release:()=>_s,removeAllListeners:()=>so,removeListener:()=>ro,resourceUsage:()=>Ts,setSourceMapsEnabled:()=>Xs,setUncaughtExceptionCaptureCallback:()=>Ls,stderr:()=>zs,stdin:()=>Hs,stdout:()=>Ws,title:()=>os,umask:()=>ms,uptime:()=>Ph,version:()=>fs,versions:()=>ds});function Ho(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function ff(){!Ti||!Ei||(Ti=!1,Ei.length?Pe=Ei.concat(Pe):pn=-1,Pe.length&&Sh())}function Sh(){if(!Ti){var e=setTimeout(ff,0);Ti=!0;for(var t=Pe.length;t;){for(Ei=Pe,Pe=[];++pn<t;)Ei&&Ei[pn].run();pn=-1,t=Pe.length}Ei=null,Ti=!1,clearTimeout(e)}}function xh(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Pe.push(new Eh(e,t)),Pe.length===1&&!Ti&&setTimeout(Sh,0)}function Eh(e,t){this.fun=e,this.array=t}function re(){}function kh(e){Ho("_linkedBinding")}function Ah(e){Ho("dlopen")}function Th(){return[]}function Ih(){return[]}function Ch(e,t){if(!e)throw new Error(t||"assertion error")}function Oh(){return!1}function Ph(){return He.now()/1e3}function Jn(e){var t=Math.floor((Date.now()-He.now())*.001),i=He.now()*.001,n=Math.floor(i)+t,o=Math.floor(i%1*1e9);return e&&(n=n-e[0],o=o-e[1],o<0&&(n--,o+=Zn)),[n,o]}function Ne(){return $o}function Mh(e){return[]}var Pe,Ti,Ei,pn,os,as,ls,hs,cs,us,fs,ds,ps,gs,ms,bs,ys,_s,ws,vs,Ss,xs,Es,ks,As,on,Ts,Is,Cs,Os,Ps,Ms,Rs,Bs,Ls,Ds,Ns,js,Us,Fs,Ws,zs,Hs,$s,Vs,qs,Ys,Ks,Gs,Qs,Xs,He,Rr,Zn,Js,Zs,to,eo,io,no,ro,so,oo,ao,lo,$o,df=ee(()=>{ct(),ft(),ut(),Pe=[],Ti=!1,pn=-1,Eh.prototype.run=function(){this.fun.apply(null,this.array)},os="browser",as="x64",ls="browser",hs={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},cs=["/usr/bin/node"],us=[],fs="v16.8.0",ds={},ps=function(e,t){console.warn((t?t+": ":"")+e)},gs=function(e){Ho("binding")},ms=function(e){return 0},bs=function(){return"/"},ys=function(e){},_s={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ws=re,vs=[],Ss={},xs=!1,Es={},ks=re,As=re,on=function(){return{}},Ts=on,Is=on,Cs=re,Os=re,Ps=re,Ms={},Rs={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Bs=re,Ls=re,Ds=re,Ns=re,js=re,Us=re,Fs=re,Ws=void 0,zs=void 0,Hs=void 0,$s=re,Vs=2,qs=1,Ys="/bin/usr/node",Ks=9229,Gs="node",Qs=[],Xs=re,He={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},He.now===void 0&&(Rr=Date.now(),He.timing&&He.timing.navigationStart&&(Rr=He.timing.navigationStart),He.now=()=>Date.now()-Rr),Zn=1e9,Jn.bigint=function(e){var t=Jn(e);return typeof BigInt>"u"?t[0]*Zn+t[1]:BigInt(t[0]*Zn)+BigInt(t[1])},Js=10,Zs={},to=0,eo=Ne,io=Ne,no=Ne,ro=Ne,so=Ne,oo=re,ao=Ne,lo=Ne,$o={version:fs,versions:ds,arch:as,platform:ls,release:_s,_rawDebug:ws,moduleLoadList:vs,binding:gs,_linkedBinding:kh,_events:Zs,_eventsCount:to,_maxListeners:Js,on:Ne,addListener:eo,once:io,off:no,removeListener:ro,removeAllListeners:so,emit:oo,prependListener:ao,prependOnceListener:lo,listeners:Mh,domain:Ss,_exiting:xs,config:Es,dlopen:Ah,uptime:Ph,_getActiveRequests:Th,_getActiveHandles:Ih,reallyExit:ks,_kill:As,cpuUsage:on,resourceUsage:Ts,memoryUsage:Is,kill:Cs,exit:Os,openStdin:Ps,allowedNodeEnvironmentFlags:Ms,assert:Ch,features:Rs,_fatalExceptions:Bs,setUncaughtExceptionCaptureCallback:Ls,hasUncaughtExceptionCaptureCallback:Oh,emitWarning:ps,nextTick:xh,_tickCallback:Ds,_debugProcess:Ns,_debugEnd:js,_startProfilerIdleNotifier:Us,_stopProfilerIdleNotifier:Fs,stdout:Ws,stdin:Hs,stderr:zs,abort:$s,umask:ms,chdir:ys,cwd:bs,env:hs,title:os,argv:cs,execArgv:us,pid:Vs,ppid:qs,execPath:Ys,debugPort:Ks,hrtime:Jn,argv0:Gs,_preload_modules:Qs,setSourceMapsEnabled:Xs}}),ut=ee(()=>{df()}),ie={};Mi(ie,{Buffer:()=>cr,INSPECT_MAX_BYTES:()=>Rh,default:()=>je,kMaxLength:()=>Bh});function pf(){if(ho)return Fi;ho=!0,Fi.byteLength=a,Fi.toByteArray=h,Fi.fromByteArray=d;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=n.length;o<r;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;t[45]=62,t[95]=63;function s(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=g.indexOf("=");y===-1&&(y=b);var _=y===b?0:4-y%4;return[y,_]}function a(g){var b=s(g),y=b[0],_=b[1];return(y+_)*3/4-_}function l(g,b,y){return(b+y)*3/4-y}function h(g){var b,y=s(g),_=y[0],E=y[1],x=new i(l(g,_,E)),w=0,O=E>0?_-4:_,P;for(P=0;P<O;P+=4)b=t[g.charCodeAt(P)]<<18|t[g.charCodeAt(P+1)]<<12|t[g.charCodeAt(P+2)]<<6|t[g.charCodeAt(P+3)],x[w++]=b>>16&255,x[w++]=b>>8&255,x[w++]=b&255;return E===2&&(b=t[g.charCodeAt(P)]<<2|t[g.charCodeAt(P+1)]>>4,x[w++]=b&255),E===1&&(b=t[g.charCodeAt(P)]<<10|t[g.charCodeAt(P+1)]<<4|t[g.charCodeAt(P+2)]>>2,x[w++]=b>>8&255,x[w++]=b&255),x}function c(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function u(g,b,y){for(var _,E=[],x=b;x<y;x+=3)_=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),E.push(c(_));return E.join("")}function d(g){for(var b,y=g.length,_=y%3,E=[],x=16383,w=0,O=y-_;w<O;w+=x)E.push(u(g,w,w+x>O?O:w+x));return _===1?(b=g[y-1],E.push(e[b>>2]+e[b<<4&63]+"==")):_===2&&(b=(g[y-2]<<8)+g[y-1],E.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),E.join("")}return Fi}function gf(){return co?an:(co=!0,an.read=function(e,t,i,n,o){var r,s,a=o*8-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?o-1:0,d=i?-1:1,g=e[t+u];for(u+=d,r=g&(1<<-c)-1,g>>=-c,c+=a;c>0;r=r*256+e[t+u],u+=d,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=n;c>0;s=s*256+e[t+u],u+=d,c-=8);if(r===0)r=1-h;else{if(r===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),r=r-h}return(g?-1:1)*s*Math.pow(2,r-n)},an.write=function(e,t,i,n,o,r){var s,a,l,h=r*8-o-1,c=(1<<h)-1,u=c>>1,d=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:r-1,b=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+u>=1?t+=d/l:t+=d*Math.pow(2,1-u),t*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(t*l-1)*Math.pow(2,o),s=s+u):(a=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;e[i+g]=a&255,g+=b,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;e[i+g]=s&255,g+=b,s/=256,h-=8);e[i+g-b]|=y*128},an)}function mf(){if(uo)return ei;uo=!0;let e=pf(),t=gf(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ei.Buffer=s,ei.SlowBuffer=E,ei.INSPECT_MAX_BYTES=50;let n=2147483647;ei.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let p=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(p,f),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function r(p){if(p>n)throw new RangeError('The value "'+p+'" is invalid for option "size"');let f=new Uint8Array(p);return Object.setPrototypeOf(f,s.prototype),f}function s(p,f,m){if(typeof p=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(p)}return a(p,f,m)}s.poolSize=8192;function a(p,f,m){if(typeof p=="string")return u(p,f);if(ArrayBuffer.isView(p))return g(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Y(p,ArrayBuffer)||p&&Y(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(p,SharedArrayBuffer)||p&&Y(p.buffer,SharedArrayBuffer)))return b(p,f,m);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let S=p.valueOf&&p.valueOf();if(S!=null&&S!==p)return s.from(S,f,m);let M=y(p);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}s.from=function(p,f,m){return a(p,f,m)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function h(p,f,m){return l(p),p<=0?r(p):f!==void 0?typeof m=="string"?r(p).fill(f,m):r(p).fill(f):r(p)}s.alloc=function(p,f,m){return h(p,f,m)};function c(p){return l(p),r(p<0?0:_(p)|0)}s.allocUnsafe=function(p){return c(p)},s.allocUnsafeSlow=function(p){return c(p)};function u(p,f){if((typeof f!="string"||f==="")&&(f="utf8"),!s.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let m=x(p,f)|0,S=r(m),M=S.write(p,f);return M!==m&&(S=S.slice(0,M)),S}function d(p){let f=p.length<0?0:_(p.length)|0,m=r(f);for(let S=0;S<f;S+=1)m[S]=p[S]&255;return m}function g(p){if(Y(p,Uint8Array)){let f=new Uint8Array(p);return b(f.buffer,f.byteOffset,f.byteLength)}return d(p)}function b(p,f,m){if(f<0||p.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let S;return f===void 0&&m===void 0?S=new Uint8Array(p):m===void 0?S=new Uint8Array(p,f):S=new Uint8Array(p,f,m),Object.setPrototypeOf(S,s.prototype),S}function y(p){if(s.isBuffer(p)){let f=_(p.length)|0,m=r(f);return m.length===0||p.copy(m,0,0,f),m}if(p.length!==void 0)return typeof p.length!="number"||R(p.length)?r(0):d(p);if(p.type==="Buffer"&&Array.isArray(p.data))return d(p.data)}function _(p){if(p>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return p|0}function E(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,f){if(Y(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),Y(f,Uint8Array)&&(f=s.from(f,f.offset,f.byteLength)),!s.isBuffer(p)||!s.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===f)return 0;let m=p.length,S=f.length;for(let M=0,z=Math.min(m,S);M<z;++M)if(p[M]!==f[M]){m=p[M],S=f[M];break}return m<S?-1:S<m?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,f){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let m;if(f===void 0)for(f=0,m=0;m<p.length;++m)f+=p[m].length;let S=s.allocUnsafe(f),M=0;for(m=0;m<p.length;++m){let z=p[m];if(Y(z,Uint8Array))M+z.length>S.length?(s.isBuffer(z)||(z=s.from(z)),z.copy(S,M)):Uint8Array.prototype.set.call(S,z,M);else if(s.isBuffer(z))z.copy(S,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=z.length}return S};function x(p,f){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Y(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let m=p.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&m===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return F(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Z(p).length;default:if(M)return S?-1:F(p).length;f=(""+f).toLowerCase(),M=!0}}s.byteLength=x;function w(p,f,m){let S=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(p||(p="utf8");;)switch(p){case"hex":return $(this,f,m);case"utf8":case"utf-8":return H(this,f,m);case"ascii":return st(this,f,m);case"latin1":case"binary":return et(this,f,m);case"base64":return A(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,f,m);default:if(S)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),S=!0}}s.prototype._isBuffer=!0;function O(p,f,m){let S=p[f];p[f]=p[m],p[m]=S}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<p;f+=2)O(this,f,f+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<p;f+=4)O(this,f,f+3),O(this,f+1,f+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<p;f+=8)O(this,f,f+7),O(this,f+1,f+6),O(this,f+2,f+5),O(this,f+3,f+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?H(this,0,p):w.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",f=ei.INSPECT_MAX_BYTES;return p=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(p+=" ... "),"<Buffer "+p+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(p,f,m,S,M){if(Y(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(f===void 0&&(f=0),m===void 0&&(m=p?p.length:0),S===void 0&&(S=0),M===void 0&&(M=this.length),f<0||m>p.length||S<0||M>this.length)throw new RangeError("out of range index");if(S>=M&&f>=m)return 0;if(S>=M)return-1;if(f>=m)return 1;if(f>>>=0,m>>>=0,S>>>=0,M>>>=0,this===p)return 0;let z=M-S,it=m-f,kt=Math.min(z,it),It=this.slice(S,M),Ct=p.slice(f,m);for(let xt=0;xt<kt;++xt)if(It[xt]!==Ct[xt]){z=It[xt],it=Ct[xt];break}return z<it?-1:it<z?1:0};function P(p,f,m,S,M){if(p.length===0)return-1;if(typeof m=="string"?(S=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,R(m)&&(m=M?0:p.length-1),m<0&&(m=p.length+m),m>=p.length){if(M)return-1;m=p.length-1}else if(m<0)if(M)m=0;else return-1;if(typeof f=="string"&&(f=s.from(f,S)),s.isBuffer(f))return f.length===0?-1:k(p,f,m,S,M);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(p,f,m):Uint8Array.prototype.lastIndexOf.call(p,f,m):k(p,[f],m,S,M);throw new TypeError("val must be string, number or Buffer")}function k(p,f,m,S,M){let z=1,it=p.length,kt=f.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(p.length<2||f.length<2)return-1;z=2,it/=2,kt/=2,m/=2}function It(xt,Tt){return z===1?xt[Tt]:xt.readUInt16BE(Tt*z)}let Ct;if(M){let xt=-1;for(Ct=m;Ct<it;Ct++)if(It(p,Ct)===It(f,xt===-1?0:Ct-xt)){if(xt===-1&&(xt=Ct),Ct-xt+1===kt)return xt*z}else xt!==-1&&(Ct-=Ct-xt),xt=-1}else for(m+kt>it&&(m=it-kt),Ct=m;Ct>=0;Ct--){let xt=!0;for(let Tt=0;Tt<kt;Tt++)if(It(p,Ct+Tt)!==It(f,Tt)){xt=!1;break}if(xt)return Ct}return-1}s.prototype.includes=function(p,f,m){return this.indexOf(p,f,m)!==-1},s.prototype.indexOf=function(p,f,m){return P(this,p,f,m,!0)},s.prototype.lastIndexOf=function(p,f,m){return P(this,p,f,m,!1)};function T(p,f,m,S){m=Number(m)||0;let M=p.length-m;S?(S=Number(S),S>M&&(S=M)):S=M;let z=f.length;S>z/2&&(S=z/2);let it;for(it=0;it<S;++it){let kt=parseInt(f.substr(it*2,2),16);if(R(kt))return it;p[m+it]=kt}return it}function I(p,f,m,S){return j(F(f,p.length-m),p,m,S)}function N(p,f,m,S){return j(W(f),p,m,S)}function K(p,f,m,S){return j(Z(f),p,m,S)}function Q(p,f,m,S){return j(at(f,p.length-m),p,m,S)}s.prototype.write=function(p,f,m,S){if(f===void 0)S="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")S=f,m=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(m)?(m=m>>>0,S===void 0&&(S="utf8")):(S=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-f;if((m===void 0||m>M)&&(m=M),p.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");let z=!1;for(;;)switch(S){case"hex":return T(this,p,f,m);case"utf8":case"utf-8":return I(this,p,f,m);case"ascii":case"latin1":case"binary":return N(this,p,f,m);case"base64":return K(this,p,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,p,f,m);default:if(z)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),z=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(p,f,m){return f===0&&m===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(f,m))}function H(p,f,m){m=Math.min(p.length,m);let S=[],M=f;for(;M<m;){let z=p[M],it=null,kt=z>239?4:z>223?3:z>191?2:1;if(M+kt<=m){let It,Ct,xt,Tt;switch(kt){case 1:z<128&&(it=z);break;case 2:It=p[M+1],(It&192)===128&&(Tt=(z&31)<<6|It&63,Tt>127&&(it=Tt));break;case 3:It=p[M+1],Ct=p[M+2],(It&192)===128&&(Ct&192)===128&&(Tt=(z&15)<<12|(It&63)<<6|Ct&63,Tt>2047&&(Tt<55296||Tt>57343)&&(it=Tt));break;case 4:It=p[M+1],Ct=p[M+2],xt=p[M+3],(It&192)===128&&(Ct&192)===128&&(xt&192)===128&&(Tt=(z&15)<<18|(It&63)<<12|(Ct&63)<<6|xt&63,Tt>65535&&Tt<1114112&&(it=Tt))}}it===null?(it=65533,kt=1):it>65535&&(it-=65536,S.push(it>>>10&1023|55296),it=56320|it&1023),S.push(it),M+=kt}return q(S)}let J=4096;function q(p){let f=p.length;if(f<=J)return String.fromCharCode.apply(String,p);let m="",S=0;for(;S<f;)m+=String.fromCharCode.apply(String,p.slice(S,S+=J));return m}function st(p,f,m){let S="";m=Math.min(p.length,m);for(let M=f;M<m;++M)S+=String.fromCharCode(p[M]&127);return S}function et(p,f,m){let S="";m=Math.min(p.length,m);for(let M=f;M<m;++M)S+=String.fromCharCode(p[M]);return S}function $(p,f,m){let S=p.length;(!f||f<0)&&(f=0),(!m||m<0||m>S)&&(m=S);let M="";for(let z=f;z<m;++z)M+=U[p[z]];return M}function mt(p,f,m){let S=p.slice(f,m),M="";for(let z=0;z<S.length-1;z+=2)M+=String.fromCharCode(S[z]+S[z+1]*256);return M}s.prototype.slice=function(p,f){let m=this.length;p=~~p,f=f===void 0?m:~~f,p<0?(p+=m,p<0&&(p=0)):p>m&&(p=m),f<0?(f+=m,f<0&&(f=0)):f>m&&(f=m),f<p&&(f=p);let S=this.subarray(p,f);return Object.setPrototypeOf(S,s.prototype),S};function rt(p,f,m){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+f>m)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,f,m){p=p>>>0,f=f>>>0,m||rt(p,f,this.length);let S=this[p],M=1,z=0;for(;++z<f&&(M*=256);)S+=this[p+z]*M;return S},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,f,m){p=p>>>0,f=f>>>0,m||rt(p,f,this.length);let S=this[p+--f],M=1;for(;f>0&&(M*=256);)S+=this[p+--f]*M;return S},s.prototype.readUint8=s.prototype.readUInt8=function(p,f){return p=p>>>0,f||rt(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,f){return p=p>>>0,f||rt(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,f){return p=p>>>0,f||rt(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=V(function(p){p=p>>>0,tt(p,"offset");let f=this[p],m=this[p+7];(f===void 0||m===void 0)&&yt(p,this.length-8);let S=f+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,M=this[++p]+this[++p]*2**8+this[++p]*2**16+m*2**24;return BigInt(S)+(BigInt(M)<<BigInt(32))}),s.prototype.readBigUInt64BE=V(function(p){p=p>>>0,tt(p,"offset");let f=this[p],m=this[p+7];(f===void 0||m===void 0)&&yt(p,this.length-8);let S=f*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],M=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+m;return(BigInt(S)<<BigInt(32))+BigInt(M)}),s.prototype.readIntLE=function(p,f,m){p=p>>>0,f=f>>>0,m||rt(p,f,this.length);let S=this[p],M=1,z=0;for(;++z<f&&(M*=256);)S+=this[p+z]*M;return M*=128,S>=M&&(S-=Math.pow(2,8*f)),S},s.prototype.readIntBE=function(p,f,m){p=p>>>0,f=f>>>0,m||rt(p,f,this.length);let S=f,M=1,z=this[p+--S];for(;S>0&&(M*=256);)z+=this[p+--S]*M;return M*=128,z>=M&&(z-=Math.pow(2,8*f)),z},s.prototype.readInt8=function(p,f){return p=p>>>0,f||rt(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,f){p=p>>>0,f||rt(p,2,this.length);let m=this[p]|this[p+1]<<8;return m&32768?m|4294901760:m},s.prototype.readInt16BE=function(p,f){p=p>>>0,f||rt(p,2,this.length);let m=this[p+1]|this[p]<<8;return m&32768?m|4294901760:m},s.prototype.readInt32LE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=V(function(p){p=p>>>0,tt(p,"offset");let f=this[p],m=this[p+7];(f===void 0||m===void 0)&&yt(p,this.length-8);let S=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(m<<24);return(BigInt(S)<<BigInt(32))+BigInt(f+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=V(function(p){p=p>>>0,tt(p,"offset");let f=this[p],m=this[p+7];(f===void 0||m===void 0)&&yt(p,this.length-8);let S=(f<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(S)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+m)}),s.prototype.readFloatLE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),t.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,f){return p=p>>>0,f||rt(p,4,this.length),t.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,f){return p=p>>>0,f||rt(p,8,this.length),t.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,f){return p=p>>>0,f||rt(p,8,this.length),t.read(this,p,!1,52,8)};function _t(p,f,m,S,M,z){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<z)throw new RangeError('"value" argument is out of bounds');if(m+S>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,f,m,S){if(p=+p,f=f>>>0,m=m>>>0,!S){let it=Math.pow(2,8*m)-1;_t(this,p,f,m,it,0)}let M=1,z=0;for(this[f]=p&255;++z<m&&(M*=256);)this[f+z]=p/M&255;return f+m},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,f,m,S){if(p=+p,f=f>>>0,m=m>>>0,!S){let it=Math.pow(2,8*m)-1;_t(this,p,f,m,it,0)}let M=m-1,z=1;for(this[f+M]=p&255;--M>=0&&(z*=256);)this[f+M]=p/z&255;return f+m},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,1,255,0),this[f]=p&255,f+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,2,65535,0),this[f]=p&255,this[f+1]=p>>>8,f+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,2,65535,0),this[f]=p>>>8,this[f+1]=p&255,f+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,4,4294967295,0),this[f+3]=p>>>24,this[f+2]=p>>>16,this[f+1]=p>>>8,this[f]=p&255,f+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,4,4294967295,0),this[f]=p>>>24,this[f+1]=p>>>16,this[f+2]=p>>>8,this[f+3]=p&255,f+4};function v(p,f,m,S,M){nt(f,S,M,p,m,7);let z=Number(f&BigInt(4294967295));p[m++]=z,z=z>>8,p[m++]=z,z=z>>8,p[m++]=z,z=z>>8,p[m++]=z;let it=Number(f>>BigInt(32)&BigInt(4294967295));return p[m++]=it,it=it>>8,p[m++]=it,it=it>>8,p[m++]=it,it=it>>8,p[m++]=it,m}function X(p,f,m,S,M){nt(f,S,M,p,m,7);let z=Number(f&BigInt(4294967295));p[m+7]=z,z=z>>8,p[m+6]=z,z=z>>8,p[m+5]=z,z=z>>8,p[m+4]=z;let it=Number(f>>BigInt(32)&BigInt(4294967295));return p[m+3]=it,it=it>>8,p[m+2]=it,it=it>>8,p[m+1]=it,it=it>>8,p[m]=it,m+8}s.prototype.writeBigUInt64LE=V(function(p,f=0){return v(this,p,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=V(function(p,f=0){return X(this,p,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,f,m,S){if(p=+p,f=f>>>0,!S){let kt=Math.pow(2,8*m-1);_t(this,p,f,m,kt-1,-kt)}let M=0,z=1,it=0;for(this[f]=p&255;++M<m&&(z*=256);)p<0&&it===0&&this[f+M-1]!==0&&(it=1),this[f+M]=(p/z>>0)-it&255;return f+m},s.prototype.writeIntBE=function(p,f,m,S){if(p=+p,f=f>>>0,!S){let kt=Math.pow(2,8*m-1);_t(this,p,f,m,kt-1,-kt)}let M=m-1,z=1,it=0;for(this[f+M]=p&255;--M>=0&&(z*=256);)p<0&&it===0&&this[f+M+1]!==0&&(it=1),this[f+M]=(p/z>>0)-it&255;return f+m},s.prototype.writeInt8=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,1,127,-128),p<0&&(p=255+p+1),this[f]=p&255,f+1},s.prototype.writeInt16LE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,2,32767,-32768),this[f]=p&255,this[f+1]=p>>>8,f+2},s.prototype.writeInt16BE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,2,32767,-32768),this[f]=p>>>8,this[f+1]=p&255,f+2},s.prototype.writeInt32LE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,4,2147483647,-2147483648),this[f]=p&255,this[f+1]=p>>>8,this[f+2]=p>>>16,this[f+3]=p>>>24,f+4},s.prototype.writeInt32BE=function(p,f,m){return p=+p,f=f>>>0,m||_t(this,p,f,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[f]=p>>>24,this[f+1]=p>>>16,this[f+2]=p>>>8,this[f+3]=p&255,f+4},s.prototype.writeBigInt64LE=V(function(p,f=0){return v(this,p,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=V(function(p,f=0){return X(this,p,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function lt(p,f,m,S,M,z){if(m+S>p.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function wt(p,f,m,S,M){return f=+f,m=m>>>0,M||lt(p,f,m,4),t.write(p,f,m,S,23,4),m+4}s.prototype.writeFloatLE=function(p,f,m){return wt(this,p,f,!0,m)},s.prototype.writeFloatBE=function(p,f,m){return wt(this,p,f,!1,m)};function ot(p,f,m,S,M){return f=+f,m=m>>>0,M||lt(p,f,m,8),t.write(p,f,m,S,52,8),m+8}s.prototype.writeDoubleLE=function(p,f,m){return ot(this,p,f,!0,m)},s.prototype.writeDoubleBE=function(p,f,m){return ot(this,p,f,!1,m)},s.prototype.copy=function(p,f,m,S){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(m||(m=0),!S&&S!==0&&(S=this.length),f>=p.length&&(f=p.length),f||(f=0),S>0&&S<m&&(S=m),S===m||p.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),p.length-f<S-m&&(S=p.length-f+m);let M=S-m;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,m,S):Uint8Array.prototype.set.call(p,this.subarray(m,S),f),M},s.prototype.fill=function(p,f,m,S){if(typeof p=="string"){if(typeof f=="string"?(S=f,f=0,m=this.length):typeof m=="string"&&(S=m,m=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!s.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(p.length===1){let z=p.charCodeAt(0);(S==="utf8"&&z<128||S==="latin1")&&(p=z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;f=f>>>0,m=m===void 0?this.length:m>>>0,p||(p=0);let M;if(typeof p=="number")for(M=f;M<m;++M)this[M]=p;else{let z=s.isBuffer(p)?p:s.from(p,S),it=z.length;if(it===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(M=0;M<m-f;++M)this[M+f]=z[M%it]}return this};let D={};function C(p,f,m){D[p]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(S){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:S,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}C("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(p,f){return`The "${p}" argument must be of type number. Received type ${typeof f}`},TypeError),C("ERR_OUT_OF_RANGE",function(p,f,m){let S=`The value of "${p}" is out of range.`,M=m;return Number.isInteger(m)&&Math.abs(m)>2**32?M=G(String(m)):typeof m=="bigint"&&(M=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(M=G(M)),M+="n"),S+=` It must be ${f}. Received ${M}`,S},RangeError);function G(p){let f="",m=p.length,S=p[0]==="-"?1:0;for(;m>=S+4;m-=3)f=`_${p.slice(m-3,m)}${f}`;return`${p.slice(0,m)}${f}`}function dt(p,f,m){tt(f,"offset"),(p[f]===void 0||p[f+m]===void 0)&&yt(f,p.length-(m+1))}function nt(p,f,m,S,M,z){if(p>m||p<f){let it=typeof f=="bigint"?"n":"",kt;throw f===0||f===BigInt(0)?kt=`>= 0${it} and < 2${it} ** ${(z+1)*8}${it}`:kt=`>= -(2${it} ** ${(z+1)*8-1}${it}) and < 2 ** ${(z+1)*8-1}${it}`,new D.ERR_OUT_OF_RANGE("value",kt,p)}dt(S,M,z)}function tt(p,f){if(typeof p!="number")throw new D.ERR_INVALID_ARG_TYPE(f,"number",p)}function yt(p,f,m){throw Math.floor(p)!==p?(tt(p,m),new D.ERR_OUT_OF_RANGE("offset","an integer",p)):f<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,p)}let pt=/[^+/0-9A-Za-z-_]/g;function B(p){if(p=p.split("=")[0],p=p.trim().replace(pt,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function F(p,f){f=f||1/0;let m,S=p.length,M=null,z=[];for(let it=0;it<S;++it){if(m=p.charCodeAt(it),m>55295&&m<57344){if(!M){if(m>56319){(f-=3)>-1&&z.push(239,191,189);continue}else if(it+1===S){(f-=3)>-1&&z.push(239,191,189);continue}M=m;continue}if(m<56320){(f-=3)>-1&&z.push(239,191,189),M=m;continue}m=(M-55296<<10|m-56320)+65536}else M&&(f-=3)>-1&&z.push(239,191,189);if(M=null,m<128){if((f-=1)<0)break;z.push(m)}else if(m<2048){if((f-=2)<0)break;z.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;z.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;z.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return z}function W(p){let f=[];for(let m=0;m<p.length;++m)f.push(p.charCodeAt(m)&255);return f}function at(p,f){let m,S,M,z=[];for(let it=0;it<p.length&&!((f-=2)<0);++it)m=p.charCodeAt(it),S=m>>8,M=m%256,z.push(M),z.push(S);return z}function Z(p){return e.toByteArray(B(p))}function j(p,f,m,S){let M;for(M=0;M<S&&!(M+m>=f.length||M>=p.length);++M)f[M+m]=p[M];return M}function Y(p,f){return p instanceof f||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===f.name}function R(p){return p!==p}let U=function(){let p="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){let S=m*16;for(let M=0;M<16;++M)f[S+M]=p[m]+p[M]}return f}();function V(p){return typeof BigInt>"u"?ht:p}function ht(){throw new Error("BigInt not supported")}return ei}var Fi,ho,an,co,ei,uo,je,cr,Rh,Bh,ne=ee(()=>{ct(),ft(),ut(),Fi={},ho=!1,an={},co=!1,ei={},uo=!1,je=mf(),je.Buffer,je.SlowBuffer,je.INSPECT_MAX_BYTES,je.kMaxLength,cr=je.Buffer,Rh=je.INSPECT_MAX_BYTES,Bh=je.kMaxLength}),ft=ee(()=>{ne()}),bf=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(i){this.aliasToTopic={},this.max=i}put(i,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=i,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(i){return this.aliasToTopic[i]}clear(){this.aliasToTopic={}}};e.default=t}),Kt=bt((e,t)=>{ct(),ft(),ut(),t.exports={ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,n){return i.includes(n)},ArrayPrototypeIndexOf(i,n){return i.indexOf(n)},ArrayPrototypeJoin(i,n){return i.join(n)},ArrayPrototypeMap(i,n){return i.map(n)},ArrayPrototypePop(i,n){return i.pop(n)},ArrayPrototypePush(i,n){return i.push(n)},ArrayPrototypeSlice(i,n,o){return i.slice(n,o)},Error,FunctionPrototypeCall(i,n,...o){return i.call(n,...o)},FunctionPrototypeSymbolHasInstance(i,n){return Function.prototype[Symbol.hasInstance].call(i,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,n){return Object.defineProperties(i,n)},ObjectDefineProperty(i,n,o){return Object.defineProperty(i,n,o)},ObjectGetOwnPropertyDescriptor(i,n){return Object.getOwnPropertyDescriptor(i,n)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,n){return Object.setPrototypeOf(i,n)},Promise,PromisePrototypeCatch(i,n){return i.catch(n)},PromisePrototypeThen(i,n,o){return i.then(n,o)},PromiseReject(i){return Promise.reject(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,n){return i.test(n)},SafeSet:Set,String,StringPrototypeSlice(i,n,o){return i.slice(n,o)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(i,n,o){return i.set(n,o)},Uint8Array}}),Ye=bt((e,t)=>{ct(),ft(),ut();var i=(ne(),Nt(ie)),n=Object.getPrototypeOf(async function(){}).constructor,o=globalThis.Blob||i.Blob,r=typeof o<"u"?function(a){return a instanceof o}:function(a){return!1},s=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let l="";for(let h=0;h<a.length;h++)l+=`    ${a[h].stack}
`;super(l),this.name="AggregateError",this.errors=a}};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(a){let l=!1;return function(...h){l||(l=!0,a.apply(this,h))}},createDeferredPromise:function(){let a,l;return{promise:new Promise((h,c)=>{a=h,l=c}),resolve:a,reject:l}},promisify(a){return new Promise((l,h)=>{a((c,...u)=>c?h(c):l(...u))})},debuglog(){return function(){}},format(a,...l){return a.replace(/%([sdifj])/g,function(...[h,c]){let u=l.shift();return c==="f"?u.toFixed(6):c==="j"?JSON.stringify(u):c==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}},types:{isAsyncFunction(a){return a instanceof n},isArrayBufferView(a){return ArrayBuffer.isView(a)}},isBlob:r},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Vo=bt((e,t)=>{ct(),ft(),ut();var{AbortController:i,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=i,t.exports.AbortSignal=n,t.exports.default=i}),ue=bt((e,t)=>{ct(),ft(),ut();var{format:i,inspect:n,AggregateError:o}=Ye(),r=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,h="__node_internal_",c={};function u(x,w){if(!x)throw new c.ERR_INTERNAL_ASSERTION(w)}function d(x){let w="",O=x.length,P=x[0]==="-"?1:0;for(;O>=P+4;O-=3)w=`_${x.slice(O-3,O)}${w}`;return`${x.slice(0,O)}${w}`}function g(x,w,O){if(typeof w=="function")return u(w.length<=O.length,`Code: ${x}; The provided arguments length (${O.length}) does not match the required ones (${w.length}).`),w(...O);let P=(w.match(/%[dfijoOs]/g)||[]).length;return u(P===O.length,`Code: ${x}; The provided arguments length (${O.length}) does not match the required ones (${P}).`),O.length===0?w:i(w,...O)}function b(x,w,O){O||(O=Error);class P extends O{constructor(...T){super(g(x,w,T))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(P.prototype,{name:{value:O.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),P.prototype.code=x,P.prototype[s]=!0,c[x]=P}function y(x){let w=h+x.name;return Object.defineProperty(x,"name",{value:w}),x}function _(x,w){if(x&&w&&x!==w){if(Array.isArray(w.errors))return w.errors.push(x),w;let O=new r([w,x],w.message);return O.code=w.code,O}return x||w}var E=class extends Error{constructor(x="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",w);super(x,w),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(x,w,O)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let P="The ";x.endsWith(" argument")?P+=`${x} `:P+=`"${x}" ${x.includes(".")?"property":"argument"} `,P+="must be ";let k=[],T=[],I=[];for(let K of w)u(typeof K=="string","All expected entries have to be of type string"),a.includes(K)?k.push(K.toLowerCase()):l.test(K)?T.push(K):(u(K!=="object",'The value "object" should be written as "Object"'),I.push(K));if(T.length>0){let K=k.indexOf("object");K!==-1&&(k.splice(k,K,1),T.push("Object"))}if(k.length>0){switch(k.length){case 1:P+=`of type ${k[0]}`;break;case 2:P+=`one of type ${k[0]} or ${k[1]}`;break;default:{let K=k.pop();P+=`one of type ${k.join(", ")}, or ${K}`}}(T.length>0||I.length>0)&&(P+=" or ")}if(T.length>0){switch(T.length){case 1:P+=`an instance of ${T[0]}`;break;case 2:P+=`an instance of ${T[0]} or ${T[1]}`;break;default:{let K=T.pop();P+=`an instance of ${T.join(", ")}, or ${K}`}}I.length>0&&(P+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(P+="an "),P+=`${I[0]}`;break;case 2:P+=`one of ${I[0]} or ${I[1]}`;break;default:{let K=I.pop();P+=`one of ${I.join(", ")}, or ${K}`}}if(O==null)P+=`. Received ${O}`;else if(typeof O=="function"&&O.name)P+=`. Received function ${O.name}`;else if(typeof O=="object"){var N;if((N=O.constructor)!==null&&N!==void 0&&N.name)P+=`. Received an instance of ${O.constructor.name}`;else{let K=n(O,{depth:-1});P+=`. Received ${K}`}}else{let K=n(O,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),P+=`. Received type ${typeof O} (${K})`}return P},TypeError),b("ERR_INVALID_ARG_VALUE",(x,w,O="is invalid")=>{let P=n(w);return P.length>128&&(P=P.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${O}. Received ${P}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(x,w,O)=>{var P;let k=O!=null&&(P=O.constructor)!==null&&P!==void 0&&P.name?`instance of ${O.constructor.name}`:`type ${typeof O}`;return`Expected ${x} to be returned from the "${w}" function but got ${k}.`},TypeError),b("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let w,O=x.length;switch(x=(Array.isArray(x)?x:[x]).map(P=>`"${P}"`).join(" or "),O){case 1:w+=`The ${x[0]} argument`;break;case 2:w+=`The ${x[0]} and ${x[1]} arguments`;break;default:{let P=x.pop();w+=`The ${x.join(", ")}, and ${P} arguments`}break}return`${w} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(x,w,O)=>{u(w,'Missing "range" argument');let P;return Number.isInteger(O)&&Math.abs(O)>2**32?P=d(String(O)):typeof O=="bigint"?(P=String(O),(O>2n**32n||O<-(2n**32n))&&(P=d(P)),P+="n"):P=n(O),`The value of "${x}" is out of range. It must be ${w}. Received ${P}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:E,aggregateTwoErrors:y(_),hideStackFrames:y,codes:c}}),Er=bt((e,t)=>{ct(),ft(),ut();var{ArrayIsArray:i,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:o,ArrayPrototypeMap:r,NumberIsInteger:s,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:h,NumberParseInt:c,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:g,StringPrototypeToUpperCase:b,StringPrototypeTrim:y}=Kt(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:O,ERR_UNKNOWN_SIGNAL:P}}=ue(),{normalizeEncoding:k}=Ye(),{isAsyncFunction:T,isArrayBufferView:I}=Ye().types,N={};function K(j){return j===(j|0)}function Q(j){return j===j>>>0}var A=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function J(j,Y,R){if(typeof j>"u"&&(j=R),typeof j=="string"){if(d(A,j)===null)throw new w(Y,j,H);j=c(j,8)}return et(j,Y),j}var q=_((j,Y,R=h,U=l)=>{if(typeof j!="number")throw new x(Y,"number",j);if(!s(j))throw new O(Y,"an integer",j);if(j<R||j>U)throw new O(Y,`>= ${R} && <= ${U}`,j)}),st=_((j,Y,R=-2147483648,U=2147483647)=>{if(typeof j!="number")throw new x(Y,"number",j);if(!s(j))throw new O(Y,"an integer",j);if(j<R||j>U)throw new O(Y,`>= ${R} && <= ${U}`,j)}),et=_((j,Y,R=!1)=>{if(typeof j!="number")throw new x(Y,"number",j);if(!s(j))throw new O(Y,"an integer",j);let U=R?1:0,V=4294967295;if(j<U||j>V)throw new O(Y,`>= ${U} && <= ${V}`,j)});function $(j,Y){if(typeof j!="string")throw new x(Y,"string",j)}function mt(j,Y,R=void 0,U){if(typeof j!="number")throw new x(Y,"number",j);if(R!=null&&j<R||U!=null&&j>U||(R!=null||U!=null)&&a(j))throw new O(Y,`${R!=null?`>= ${R}`:""}${R!=null&&U!=null?" && ":""}${U!=null?`<= ${U}`:""}`,j)}var rt=_((j,Y,R)=>{if(!n(R,j)){let U="must be one of: "+o(r(R,V=>typeof V=="string"?`'${V}'`:g(V)),", ");throw new w(Y,j,U)}});function _t(j,Y){if(typeof j!="boolean")throw new x(Y,"boolean",j)}function v(j,Y,R){return j==null||!u(j,Y)?R:j[Y]}var X=_((j,Y,R=null)=>{let U=v(R,"allowArray",!1),V=v(R,"allowFunction",!1);if(!v(R,"nullable",!1)&&j===null||!U&&i(j)||typeof j!="object"&&(!V||typeof j!="function"))throw new x(Y,"Object",j)}),lt=_((j,Y)=>{if(j!=null&&typeof j!="object"&&typeof j!="function")throw new x(Y,"a dictionary",j)}),wt=_((j,Y,R=0)=>{if(!i(j))throw new x(Y,"Array",j);if(j.length<R){let U=`must be longer than ${R}`;throw new w(Y,j,U)}});function ot(j,Y){wt(j,Y);for(let R=0;R<j.length;R++)$(j[R],`${Y}[${R}]`)}function D(j,Y){wt(j,Y);for(let R=0;R<j.length;R++)_t(j[R],`${Y}[${R}]`)}function C(j,Y="signal"){if($(j,Y),N[j]===void 0)throw N[b(j)]!==void 0?new P(j+" (signals must use all capital letters)"):new P(j)}var G=_((j,Y="buffer")=>{if(!I(j))throw new x(Y,["Buffer","TypedArray","DataView"],j)});function dt(j,Y){let R=k(Y),U=j.length;if(R==="hex"&&U%2!==0)throw new w("encoding",Y,`is invalid for data of length ${U}`)}function nt(j,Y="Port",R=!0){if(typeof j!="number"&&typeof j!="string"||typeof j=="string"&&y(j).length===0||+j!==+j>>>0||j>65535||j===0&&!R)throw new E(Y,j,R);return j|0}var tt=_((j,Y)=>{if(j!==void 0&&(j===null||typeof j!="object"||!("aborted"in j)))throw new x(Y,"AbortSignal",j)}),yt=_((j,Y)=>{if(typeof j!="function")throw new x(Y,"Function",j)}),pt=_((j,Y)=>{if(typeof j!="function"||T(j))throw new x(Y,"Function",j)}),B=_((j,Y)=>{if(j!==void 0)throw new x(Y,"undefined",j)});function F(j,Y,R){if(!n(R,j))throw new x(Y,`('${o(R,"|")}')`,j)}var W=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function at(j,Y){if(typeof j>"u"||!d(W,j))throw new w(Y,j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Z(j){if(typeof j=="string")return at(j,"hints"),j;if(i(j)){let Y=j.length,R="";if(Y===0)return R;for(let U=0;U<Y;U++){let V=j[U];at(V,"hints"),R+=V,U!==Y-1&&(R+=", ")}return R}throw new w("hints",j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:K,isUint32:Q,parseFileMode:J,validateArray:wt,validateStringArray:ot,validateBooleanArray:D,validateBoolean:_t,validateBuffer:G,validateDictionary:lt,validateEncoding:dt,validateFunction:yt,validateInt32:st,validateInteger:q,validateNumber:mt,validateObject:X,validateOneOf:rt,validatePlainFunction:pt,validatePort:nt,validateSignalName:C,validateString:$,validateUint32:et,validateUndefined:B,validateUnion:F,validateAbortSignal:tt,validateLinkHeaderValue:Z}}),Ri=bt((e,t)=>{ct(),ft(),ut();var i=t.exports={},n,o;function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=r}catch{n=r}try{typeof clearTimeout=="function"?o=clearTimeout:o=s}catch{o=s}})();function a(E){if(n===setTimeout)return setTimeout(E,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(E,0);try{return n(E,0)}catch{try{return n.call(null,E,0)}catch{return n.call(this,E,0)}}}function l(E){if(o===clearTimeout)return clearTimeout(E);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(E);try{return o(E)}catch{try{return o.call(null,E)}catch{return o.call(this,E)}}}var h=[],c=!1,u,d=-1;function g(){!c||!u||(c=!1,u.length?h=u.concat(h):d=-1,h.length&&b())}function b(){if(!c){var E=a(g);c=!0;for(var x=h.length;x;){for(u=h,h=[];++d<x;)u&&u[d].run();d=-1,x=h.length}u=null,c=!1,l(E)}}i.nextTick=function(E){var x=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)x[w-1]=arguments[w];h.push(new y(E,x)),h.length===1&&!c&&a(b)};function y(E,x){this.fun=E,this.array=x}y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(E){return[]},i.binding=function(E){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(E){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}),Xe=bt((e,t)=>{ct(),ft(),ut();var{Symbol:i,SymbolAsyncIterator:n,SymbolIterator:o,SymbolFor:r}=Kt(),s=i("kDestroyed"),a=i("kIsErrored"),l=i("kIsReadable"),h=i("kIsDisturbed"),c=r("nodejs.webstream.isClosedPromise"),u=r("nodejs.webstream.controllerErrorFunction");function d(v,X=!1){var lt;return!!(v&&typeof v.pipe=="function"&&typeof v.on=="function"&&(!X||typeof v.pause=="function"&&typeof v.resume=="function")&&(!v._writableState||((lt=v._readableState)===null||lt===void 0?void 0:lt.readable)!==!1)&&(!v._writableState||v._readableState))}function g(v){var X;return!!(v&&typeof v.write=="function"&&typeof v.on=="function"&&(!v._readableState||((X=v._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function b(v){return!!(v&&typeof v.pipe=="function"&&v._readableState&&typeof v.on=="function"&&typeof v.write=="function")}function y(v){return v&&(v._readableState||v._writableState||typeof v.write=="function"&&typeof v.on=="function"||typeof v.pipe=="function"&&typeof v.on=="function")}function _(v){return!!(v&&!y(v)&&typeof v.pipeThrough=="function"&&typeof v.getReader=="function"&&typeof v.cancel=="function")}function E(v){return!!(v&&!y(v)&&typeof v.getWriter=="function"&&typeof v.abort=="function")}function x(v){return!!(v&&!y(v)&&typeof v.readable=="object"&&typeof v.writable=="object")}function w(v){return _(v)||E(v)||x(v)}function O(v,X){return v==null?!1:X===!0?typeof v[n]=="function":X===!1?typeof v[o]=="function":typeof v[n]=="function"||typeof v[o]=="function"}function P(v){if(!y(v))return null;let X=v._writableState,lt=v._readableState,wt=X||lt;return!!(v.destroyed||v[s]||wt!=null&&wt.destroyed)}function k(v){if(!g(v))return null;if(v.writableEnded===!0)return!0;let X=v._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function T(v,X){if(!g(v))return null;if(v.writableFinished===!0)return!0;let lt=v._writableState;return lt!=null&&lt.errored?!1:typeof(lt==null?void 0:lt.finished)!="boolean"?null:!!(lt.finished||X===!1&&lt.ended===!0&&lt.length===0)}function I(v){if(!d(v))return null;if(v.readableEnded===!0)return!0;let X=v._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function N(v,X){if(!d(v))return null;let lt=v._readableState;return lt!=null&&lt.errored?!1:typeof(lt==null?void 0:lt.endEmitted)!="boolean"?null:!!(lt.endEmitted||X===!1&&lt.ended===!0&&lt.length===0)}function K(v){return v&&v[l]!=null?v[l]:typeof(v==null?void 0:v.readable)!="boolean"?null:P(v)?!1:d(v)&&v.readable&&!N(v)}function Q(v){return typeof(v==null?void 0:v.writable)!="boolean"?null:P(v)?!1:g(v)&&v.writable&&!k(v)}function A(v,X){return y(v)?P(v)?!0:!((X==null?void 0:X.readable)!==!1&&K(v)||(X==null?void 0:X.writable)!==!1&&Q(v)):null}function H(v){var X,lt;return y(v)?v.writableErrored?v.writableErrored:(X=(lt=v._writableState)===null||lt===void 0?void 0:lt.errored)!==null&&X!==void 0?X:null:null}function J(v){var X,lt;return y(v)?v.readableErrored?v.readableErrored:(X=(lt=v._readableState)===null||lt===void 0?void 0:lt.errored)!==null&&X!==void 0?X:null:null}function q(v){if(!y(v))return null;if(typeof v.closed=="boolean")return v.closed;let X=v._writableState,lt=v._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(lt==null?void 0:lt.closed)=="boolean"?(X==null?void 0:X.closed)||(lt==null?void 0:lt.closed):typeof v._closed=="boolean"&&st(v)?v._closed:null}function st(v){return typeof v._closed=="boolean"&&typeof v._defaultKeepAlive=="boolean"&&typeof v._removedConnection=="boolean"&&typeof v._removedContLen=="boolean"}function et(v){return typeof v._sent100=="boolean"&&st(v)}function $(v){var X;return typeof v._consuming=="boolean"&&typeof v._dumped=="boolean"&&((X=v.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function mt(v){if(!y(v))return null;let X=v._writableState,lt=v._readableState,wt=X||lt;return!wt&&et(v)||!!(wt&&wt.autoDestroy&&wt.emitClose&&wt.closed===!1)}function rt(v){var X;return!!(v&&((X=v[h])!==null&&X!==void 0?X:v.readableDidRead||v.readableAborted))}function _t(v){var X,lt,wt,ot,D,C,G,dt,nt,tt;return!!(v&&((X=(lt=(wt=(ot=(D=(C=v[a])!==null&&C!==void 0?C:v.readableErrored)!==null&&D!==void 0?D:v.writableErrored)!==null&&ot!==void 0?ot:(G=v._readableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&wt!==void 0?wt:(dt=v._writableState)===null||dt===void 0?void 0:dt.errorEmitted)!==null&&lt!==void 0?lt:(nt=v._readableState)===null||nt===void 0?void 0:nt.errored)!==null&&X!==void 0?X:!((tt=v._writableState)===null||tt===void 0)&&tt.errored))}t.exports={kDestroyed:s,isDisturbed:rt,kIsDisturbed:h,isErrored:_t,kIsErrored:a,isReadable:K,kIsReadable:l,kIsClosedPromise:c,kControllerErrorFunction:u,isClosed:q,isDestroyed:P,isDuplexNodeStream:b,isFinished:A,isIterable:O,isReadableNodeStream:d,isReadableStream:_,isReadableEnded:I,isReadableFinished:N,isReadableErrored:J,isNodeStream:y,isWebStream:w,isWritable:Q,isWritableNodeStream:g,isWritableStream:E,isWritableEnded:k,isWritableFinished:T,isWritableErrored:H,isServerRequest:$,isServerResponse:et,willEmitClose:mt,isTransformStream:x}}),hi=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{AbortError:n,codes:o}=ue(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:a,once:l}=Ye(),{validateAbortSignal:h,validateFunction:c,validateObject:u,validateBoolean:d}=Er(),{Promise:g,PromisePrototypeThen:b}=Kt(),{isClosed:y,isReadable:_,isReadableNodeStream:E,isReadableStream:x,isReadableFinished:w,isReadableErrored:O,isWritable:P,isWritableNodeStream:k,isWritableStream:T,isWritableFinished:I,isWritableErrored:N,isNodeStream:K,willEmitClose:Q,kIsClosedPromise:A}=Xe();function H($){return $.setHeader&&typeof $.abort=="function"}var J=()=>{};function q($,mt,rt){var _t,v;if(arguments.length===2?(rt=mt,mt=a):mt==null?mt=a:u(mt,"options"),c(rt,"callback"),h(mt.signal,"options.signal"),rt=l(rt),x($)||T($))return st($,mt,rt);if(!K($))throw new r("stream",["ReadableStream","WritableStream","Stream"],$);let X=(_t=mt.readable)!==null&&_t!==void 0?_t:E($),lt=(v=mt.writable)!==null&&v!==void 0?v:k($),wt=$._writableState,ot=$._readableState,D=()=>{$.writable||dt()},C=Q($)&&E($)===X&&k($)===lt,G=I($,!1),dt=()=>{G=!0,$.destroyed&&(C=!1),!(C&&(!$.readable||X))&&(!X||nt)&&rt.call($)},nt=w($,!1),tt=()=>{nt=!0,$.destroyed&&(C=!1),!(C&&(!$.writable||lt))&&(!lt||G)&&rt.call($)},yt=Z=>{rt.call($,Z)},pt=y($),B=()=>{pt=!0;let Z=N($)||O($);if(Z&&typeof Z!="boolean")return rt.call($,Z);if(X&&!nt&&E($,!0)&&!w($,!1))return rt.call($,new s);if(lt&&!G&&!I($,!1))return rt.call($,new s);rt.call($)},F=()=>{pt=!0;let Z=N($)||O($);if(Z&&typeof Z!="boolean")return rt.call($,Z);rt.call($)},W=()=>{$.req.on("finish",dt)};H($)?($.on("complete",dt),C||$.on("abort",B),$.req?W():$.on("request",W)):lt&&!wt&&($.on("end",D),$.on("close",D)),!C&&typeof $.aborted=="boolean"&&$.on("aborted",B),$.on("end",tt),$.on("finish",dt),mt.error!==!1&&$.on("error",yt),$.on("close",B),pt?i.nextTick(B):wt!=null&&wt.errorEmitted||ot!=null&&ot.errorEmitted?C||i.nextTick(F):(!X&&(!C||_($))&&(G||P($)===!1)||!lt&&(!C||P($))&&(nt||_($)===!1)||ot&&$.req&&$.aborted)&&i.nextTick(F);let at=()=>{rt=J,$.removeListener("aborted",B),$.removeListener("complete",dt),$.removeListener("abort",B),$.removeListener("request",W),$.req&&$.req.removeListener("finish",dt),$.removeListener("end",D),$.removeListener("close",D),$.removeListener("finish",dt),$.removeListener("end",tt),$.removeListener("error",yt),$.removeListener("close",B)};if(mt.signal&&!pt){let Z=()=>{let j=rt;at(),j.call($,new n(void 0,{cause:mt.signal.reason}))};if(mt.signal.aborted)i.nextTick(Z);else{let j=rt;rt=l((...Y)=>{mt.signal.removeEventListener("abort",Z),j.apply($,Y)}),mt.signal.addEventListener("abort",Z)}}return at}function st($,mt,rt){let _t=!1,v=J;if(mt.signal)if(v=()=>{_t=!0,rt.call($,new n(void 0,{cause:mt.signal.reason}))},mt.signal.aborted)i.nextTick(v);else{let lt=rt;rt=l((...wt)=>{mt.signal.removeEventListener("abort",v),lt.apply($,wt)}),mt.signal.addEventListener("abort",v)}let X=(...lt)=>{_t||i.nextTick(()=>rt.apply($,lt))};return b($[A].promise,X,X),J}function et($,mt){var rt;let _t=!1;return mt===null&&(mt=a),(rt=mt)!==null&&rt!==void 0&&rt.cleanup&&(d(mt.cleanup,"cleanup"),_t=mt.cleanup),new g((v,X)=>{let lt=q($,mt,wt=>{_t&&lt(),wt?X(wt):v()})})}t.exports=q,t.exports.finished=et}),qi=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:r}=ue(),{Symbol:s}=Kt(),{kDestroyed:a,isDestroyed:l,isFinished:h,isServerRequest:c}=Xe(),u=s("kDestroy"),d=s("kConstruct");function g(A,H,J){A&&(A.stack,H&&!H.errored&&(H.errored=A),J&&!J.errored&&(J.errored=A))}function b(A,H){let J=this._readableState,q=this._writableState,st=q||J;return q!=null&&q.destroyed||J!=null&&J.destroyed?(typeof H=="function"&&H(),this):(g(A,q,J),q&&(q.destroyed=!0),J&&(J.destroyed=!0),st.constructed?y(this,A,H):this.once(u,function(et){y(this,n(et,A),H)}),this)}function y(A,H,J){let q=!1;function st(et){if(q)return;q=!0;let $=A._readableState,mt=A._writableState;g(et,mt,$),mt&&(mt.closed=!0),$&&($.closed=!0),typeof J=="function"&&J(et),et?i.nextTick(_,A,et):i.nextTick(E,A)}try{A._destroy(H||null,st)}catch(et){st(et)}}function _(A,H){x(A,H),E(A)}function E(A){let H=A._readableState,J=A._writableState;J&&(J.closeEmitted=!0),H&&(H.closeEmitted=!0),(J!=null&&J.emitClose||H!=null&&H.emitClose)&&A.emit("close")}function x(A,H){let J=A._readableState,q=A._writableState;q!=null&&q.errorEmitted||J!=null&&J.errorEmitted||(q&&(q.errorEmitted=!0),J&&(J.errorEmitted=!0),A.emit("error",H))}function w(){let A=this._readableState,H=this._writableState;A&&(A.constructed=!0,A.closed=!1,A.closeEmitted=!1,A.destroyed=!1,A.errored=null,A.errorEmitted=!1,A.reading=!1,A.ended=A.readable===!1,A.endEmitted=A.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function O(A,H,J){let q=A._readableState,st=A._writableState;if(st!=null&&st.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||st!=null&&st.autoDestroy?A.destroy(H):H&&(H.stack,st&&!st.errored&&(st.errored=H),q&&!q.errored&&(q.errored=H),J?i.nextTick(x,A,H):x(A,H))}function P(A,H){if(typeof A._construct!="function")return;let J=A._readableState,q=A._writableState;J&&(J.constructed=!1),q&&(q.constructed=!1),A.once(d,H),!(A.listenerCount(d)>1)&&i.nextTick(k,A)}function k(A){let H=!1;function J(q){if(H){O(A,q??new o);return}H=!0;let st=A._readableState,et=A._writableState,$=et||st;st&&(st.constructed=!0),et&&(et.constructed=!0),$.destroyed?A.emit(u,q):q?O(A,q,!0):i.nextTick(T,A)}try{A._construct(q=>{i.nextTick(J,q)})}catch(q){i.nextTick(J,q)}}function T(A){A.emit(d)}function I(A){return(A==null?void 0:A.setHeader)&&typeof A.abort=="function"}function N(A){A.emit("close")}function K(A,H){A.emit("error",H),i.nextTick(N,A)}function Q(A,H){!A||l(A)||(!H&&!h(A)&&(H=new r),c(A)?(A.socket=null,A.destroy(H)):I(A)?A.abort():I(A.req)?A.req.abort():typeof A.destroy=="function"?A.destroy(H):typeof A.close=="function"?A.close():H?i.nextTick(K,A,H):i.nextTick(N,A),A.destroyed||(A[a]=!0))}t.exports={construct:P,destroyer:Q,destroy:b,undestroy:w,errorOrDestroy:O}});function Dt(){Dt.init.call(this)}function tr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Lh(e){return e._maxListeners===void 0?Dt.defaultMaxListeners:e._maxListeners}function va(e,t,i,n){var o,r,s,a;if(tr(i),(r=e._events)===void 0?(r=e._events=Object.create(null),e._eventsCount=0):(r.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),s=r[t]),s===void 0)s=r[t]=i,++e._eventsCount;else if(typeof s=="function"?s=r[t]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(o=Lh(e))>0&&s.length>o&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function yf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Sa(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},o=yf.bind(n);return o.listener=i,n.wrapFn=o,o}function xa(e,t,i){var n=e._events;if(n===void 0)return[];var o=n[t];return o===void 0?[]:typeof o=="function"?i?[o.listener||o]:[o]:i?function(r){for(var s=new Array(r.length),a=0;a<s.length;++a)s[a]=r[a].listener||r[a];return s}(o):Dh(o,o.length)}function Ea(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}function Dh(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}var ka,Aa,ci,Br,Lr,Dr,de,Ta=ee(()=>{ct(),ft(),ut(),ci=typeof Reflect=="object"?Reflect:null,Br=ci&&typeof ci.apply=="function"?ci.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Aa=ci&&typeof ci.ownKeys=="function"?ci.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Lr=Number.isNaN||function(e){return e!=e},ka=Dt,Dt.EventEmitter=Dt,Dt.prototype._events=void 0,Dt.prototype._eventsCount=0,Dt.prototype._maxListeners=void 0,Dr=10,Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return Dr},set:function(e){if(typeof e!="number"||e<0||Lr(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Dr=e}}),Dt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Dt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Lr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Dt.prototype.getMaxListeners=function(){return Lh(this)},Dt.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n=e==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")Br(a,this,t);else{var l=a.length,h=Dh(a,l);for(i=0;i<l;++i)Br(h[i],this,t)}return!0},Dt.prototype.addListener=function(e,t){return va(this,e,t,!1)},Dt.prototype.on=Dt.prototype.addListener,Dt.prototype.prependListener=function(e,t){return va(this,e,t,!0)},Dt.prototype.once=function(e,t){return tr(t),this.on(e,Sa(this,e,t)),this},Dt.prototype.prependOnceListener=function(e,t){return tr(t),this.prependListener(e,Sa(this,e,t)),this},Dt.prototype.removeListener=function(e,t){var i,n,o,r,s;if(tr(t),(n=this._events)===void 0)return this;if((i=n[e])===void 0)return this;if(i===t||i.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){s=i[r].listener,o=r;break}if(o<0)return this;o===0?i.shift():function(a,l){for(;l+1<a.length;l++)a[l]=a[l+1];a.pop()}(i,o),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,s||t)}return this},Dt.prototype.off=Dt.prototype.removeListener,Dt.prototype.removeAllListeners=function(e){var t,i,n;if((i=this._events)===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o,r=Object.keys(i);for(n=0;n<r.length;++n)(o=r[n])!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=i[e])=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},Dt.prototype.listeners=function(e){return xa(this,e,!0)},Dt.prototype.rawListeners=function(e){return xa(this,e,!1)},Dt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Ea.call(e,t)},Dt.prototype.listenerCount=Ea,Dt.prototype.eventNames=function(){return this._eventsCount>0?Aa(this._events):[]},de=ka,de.EventEmitter,de.defaultMaxListeners,de.init,de.listenerCount,de.EventEmitter,de.defaultMaxListeners,de.init,de.listenerCount}),Bi={};Mi(Bi,{EventEmitter:()=>Nh,default:()=>de,defaultMaxListeners:()=>jh,init:()=>Uh,listenerCount:()=>Fh,on:()=>Wh,once:()=>zh});var Nh,jh,Uh,Fh,Wh,zh,Yi=ee(()=>{ct(),ft(),ut(),Ta(),Ta(),de.once=function(e,t){return new Promise((i,n)=>{function o(...s){r!==void 0&&e.removeListener("error",r),i(s)}let r;t!=="error"&&(r=s=>{e.removeListener(name,o),n(s)},e.once("error",r)),e.once(t,o)})},de.on=function(e,t){let i=[],n=[],o=null,r=!1,s={async next(){let h=i.shift();if(h)return createIterResult(h,!1);if(o){let c=Promise.reject(o);return o=null,c}return r?createIterResult(void 0,!0):new Promise((c,u)=>n.push({resolve:c,reject:u}))},async return(){e.removeListener(t,a),e.removeListener("error",l),r=!0;for(let h of n)h.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(h){o=h,e.removeListener(t,a),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(t,a),e.on("error",l),s;function a(...h){let c=n.shift();c?c.resolve(createIterResult(h,!1)):i.push(h)}function l(h){r=!0;let c=n.shift();c?c.reject(h):o=h,s.return()}},{EventEmitter:Nh,defaultMaxListeners:jh,init:Uh,listenerCount:Fh,on:Wh,once:zh}=de}),qo=bt((e,t)=>{ct(),ft(),ut();var{ArrayIsArray:i,ObjectSetPrototypeOf:n}=Kt(),{EventEmitter:o}=(Yi(),Nt(Bi));function r(a){o.call(this,a)}n(r.prototype,o.prototype),n(r,o),r.prototype.pipe=function(a,l){let h=this;function c(E){a.writable&&a.write(E)===!1&&h.pause&&h.pause()}h.on("data",c);function u(){h.readable&&h.resume&&h.resume()}a.on("drain",u),!a._isStdio&&(!l||l.end!==!1)&&(h.on("end",g),h.on("close",b));let d=!1;function g(){d||(d=!0,a.end())}function b(){d||(d=!0,typeof a.destroy=="function"&&a.destroy())}function y(E){_(),o.listenerCount(this,"error")===0&&this.emit("error",E)}s(h,"error",y),s(a,"error",y);function _(){h.removeListener("data",c),a.removeListener("drain",u),h.removeListener("end",g),h.removeListener("close",b),h.removeListener("error",y),a.removeListener("error",y),h.removeListener("end",_),h.removeListener("close",_),a.removeListener("close",_)}return h.on("end",_),h.on("close",_),a.on("close",_),a.emit("pipe",h),a};function s(a,l,h){if(typeof a.prependListener=="function")return a.prependListener(l,h);!a._events||!a._events[l]?a.on(l,h):i(a._events[l])?a._events[l].unshift(h):a._events[l]=[h,a._events[l]]}t.exports={Stream:r,prependListener:s}}),kr=bt((e,t)=>{ct(),ft(),ut();var{AbortError:i,codes:n}=ue(),{isNodeStream:o,isWebStream:r,kControllerErrorFunction:s}=Xe(),a=hi(),{ERR_INVALID_ARG_TYPE:l}=n,h=(c,u)=>{if(typeof c!="object"||!("aborted"in c))throw new l(u,"AbortSignal",c)};t.exports.addAbortSignal=function(c,u){if(h(c,"signal"),!o(u)&&!r(u))throw new l("stream",["ReadableStream","WritableStream","Stream"],u);return t.exports.addAbortSignalNoValidate(c,u)},t.exports.addAbortSignalNoValidate=function(c,u){if(typeof c!="object"||!("aborted"in c))return u;let d=o(u)?()=>{u.destroy(new i(void 0,{cause:c.reason}))}:()=>{u[s](new i(void 0,{cause:c.reason}))};return c.aborted?d():(c.addEventListener("abort",d),a(u,()=>c.removeEventListener("abort",d))),u}}),_f=bt((e,t)=>{ct(),ft(),ut();var{StringPrototypeSlice:i,SymbolIterator:n,TypedArrayPrototypeSet:o,Uint8Array:r}=Kt(),{Buffer:s}=(ne(),Nt(ie)),{inspect:a}=Ye();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let h={data:l,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(l){let h={data:l,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let h=this.head,c=""+h.data;for(;(h=h.next)!==null;)c+=l+h.data;return c}concat(l){if(this.length===0)return s.alloc(0);let h=s.allocUnsafe(l>>>0),c=this.head,u=0;for(;c;)o(h,c.data,u),u+=c.data.length,c=c.next;return h}consume(l,h){let c=this.head.data;if(l<c.length){let u=c.slice(0,l);return this.head.data=c.slice(l),u}return l===c.length?this.shift():h?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[n](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let h="",c=this.head,u=0;do{let d=c.data;if(l>d.length)h+=d,l-=d.length;else{l===d.length?(h+=d,++u,c.next?this.head=c.next:this.head=this.tail=null):(h+=i(d,0,l),this.head=c,c.data=i(d,l));break}++u}while((c=c.next)!==null);return this.length-=u,h}_getBuffer(l){let h=s.allocUnsafe(l),c=l,u=this.head,d=0;do{let g=u.data;if(l>g.length)o(h,g,c-l),l-=g.length;else{l===g.length?(o(h,g,c-l),++d,u.next?this.head=u.next:this.head=this.tail=null):(o(h,new r(g.buffer,g.byteOffset,l),c-l),this.head=u,u.data=g.slice(l));break}++d}while((u=u.next)!==null);return this.length-=d,h}[Symbol.for("nodejs.util.inspect.custom")](l,h){return a(this,{...h,depth:0,customInspect:!1})}}}),Yo=bt((e,t)=>{ct(),ft(),ut();var{MathFloor:i,NumberIsInteger:n}=Kt(),{ERR_INVALID_ARG_VALUE:o}=ue().codes;function r(l,h,c){return l.highWaterMark!=null?l.highWaterMark:h?l[c]:null}function s(l){return l?16:16*1024}function a(l,h,c,u){let d=r(h,u,c);if(d!=null){if(!n(d)||d<0){let g=u?`options.${c}`:"options.highWaterMark";throw new o(g,d)}return i(d)}return s(l.objectMode)}t.exports={getHighWaterMark:a,getDefaultHighWaterMark:s}});function Ia(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function wf(e,t,i){for(var n,o,r=[],s=t;s<i;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),r.push(Se[(o=n)>>18&63]+Se[o>>12&63]+Se[o>>6&63]+Se[63&o]);return r.join("")}function Ve(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,gt.prototype),t}function gt(e,t,i){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return fo(e)}return Hh(e,t,i)}function Hh(e,t,i){if(typeof e=="string")return function(r,s){if(typeof s=="string"&&s!==""||(s="utf8"),!gt.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|Vh(r,s),l=Ve(a),h=l.write(r,s);return h!==a&&(l=l.slice(0,h)),l}(e,t);if(ArrayBuffer.isView(e))return Nr(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(qe(e,ArrayBuffer)||e&&qe(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qe(e,SharedArrayBuffer)||e&&qe(e.buffer,SharedArrayBuffer)))return vf(e,t,i);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return gt.from(n,t,i);var o=function(r){if(gt.isBuffer(r)){var s=0|Ko(r.length),a=Ve(s);return a.length===0||r.copy(a,0,0,s),a}if(r.length!==void 0)return typeof r.length!="number"||Go(r.length)?Ve(0):Nr(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Nr(r.data)}(e);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return gt.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function $h(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function fo(e){return $h(e),Ve(e<0?0:0|Ko(e))}function Nr(e){for(var t=e.length<0?0:0|Ko(e.length),i=Ve(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function vf(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=t===void 0&&i===void 0?new Uint8Array(e):i===void 0?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(n,gt.prototype),n}function Ko(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Vh(e,t){if(gt.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||qe(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&i===0)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return po(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Gh(e).length;default:if(o)return n?-1:po(e).length;t=(""+t).toLowerCase(),o=!0}}function Sf(e,t,i){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Pf(this,t,i);case"utf8":case"utf-8":return Yh(this,t,i);case"ascii":return Cf(this,t,i);case"latin1":case"binary":return Of(this,t,i);case"base64":return If(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mf(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function ui(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function Ca(e,t,i,n,o){if(e.length===0)return-1;if(typeof i=="string"?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Go(i=+i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if(typeof t=="string"&&(t=gt.from(t,n)),gt.isBuffer(t))return t.length===0?-1:Oa(e,t,i,n,o);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):Oa(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function Oa(e,t,i,n,o){var r,s=1,a=e.length,l=t.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,i/=2}function h(g,b){return s===1?g[b]:g.readUInt16BE(b*s)}if(o){var c=-1;for(r=i;r<a;r++)if(h(e,r)===h(t,c===-1?0:r-c)){if(c===-1&&(c=r),r-c+1===l)return c*s}else c!==-1&&(r-=r-c),c=-1}else for(i+l>a&&(i=a-l),r=i;r>=0;r--){for(var u=!0,d=0;d<l;d++)if(h(e,r+d)!==h(t,d)){u=!1;break}if(u)return r}return-1}function xf(e,t,i,n){i=Number(i)||0;var o=e.length-i;n?(n=Number(n))>o&&(n=o):n=o;var r=t.length;n>r/2&&(n=r/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(Go(a))return s;e[i+s]=a}return s}function Ef(e,t,i,n){return Ar(po(t,e.length-i),e,i,n)}function qh(e,t,i,n){return Ar(function(o){for(var r=[],s=0;s<o.length;++s)r.push(255&o.charCodeAt(s));return r}(t),e,i,n)}function kf(e,t,i,n){return qh(e,t,i,n)}function Af(e,t,i,n){return Ar(Gh(t),e,i,n)}function Tf(e,t,i,n){return Ar(function(o,r){for(var s,a,l,h=[],c=0;c<o.length&&!((r-=2)<0);++c)s=o.charCodeAt(c),a=s>>8,l=s%256,h.push(l),h.push(a);return h}(t,e.length-i),e,i,n)}function If(e,t,i){return t===0&&i===e.length?ur.fromByteArray(e):ur.fromByteArray(e.slice(t,i))}function Yh(e,t,i){i=Math.min(e.length,i);for(var n=[],o=t;o<i;){var r,s,a,l,h=e[o],c=null,u=h>239?4:h>223?3:h>191?2:1;if(o+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:(192&(r=e[o+1]))==128&&(l=(31&h)<<6|63&r)>127&&(c=l);break;case 3:r=e[o+1],s=e[o+2],(192&r)==128&&(192&s)==128&&(l=(15&h)<<12|(63&r)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:r=e[o+1],s=e[o+2],a=e[o+3],(192&r)==128&&(192&s)==128&&(192&a)==128&&(l=(15&h)<<18|(63&r)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}c===null?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=u}return function(d){var g=d.length;if(g<=4096)return String.fromCharCode.apply(String,d);for(var b="",y=0;y<g;)b+=String.fromCharCode.apply(String,d.slice(y,y+=4096));return b}(n)}function Cf(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o)n+=String.fromCharCode(127&e[o]);return n}function Of(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o)n+=String.fromCharCode(e[o]);return n}function Pf(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var o="",r=t;r<i;++r)o+=Xh[e[r]];return o}function Mf(e,t,i){for(var n=e.slice(t,i),o="",r=0;r<n.length;r+=2)o+=String.fromCharCode(n[r]+256*n[r+1]);return o}function Xt(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function le(e,t,i,n,o,r){if(!gt.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<r)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function Kh(e,t,i,n,o,r){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Pa(e,t,i,n,o){return t=+t,i>>>=0,o||Kh(e,0,i,4),xi.write(e,t,i,n,23,4),i+4}function Ma(e,t,i,n,o){return t=+t,i>>>=0,o||Kh(e,0,i,8),xi.write(e,t,i,n,52,8),i+8}function po(e,t){var i;t=t||1/0;for(var n=e.length,o=null,r=[],s=0;s<n;++s){if((i=e.charCodeAt(s))>55295&&i<57344){if(!o){if(i>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(i<56320){(t-=3)>-1&&r.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(t-=3)>-1&&r.push(239,191,189);if(o=null,i<128){if((t-=1)<0)break;r.push(i)}else if(i<2048){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function Gh(e){return ur.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Qh,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(e))}function Ar(e,t,i,n){for(var o=0;o<n&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function qe(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Go(e){return e!=e}function Ra(e,t){for(var i in e)t[i]=e[i]}function fi(e,t,i){return we(e,t,i)}function Qi(e){var t;switch(this.encoding=function(i){var n=function(o){if(!o)return"utf8";for(var r;;)switch(o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:if(r)return;o=(""+o).toLowerCase(),r=!0}}(i);if(typeof n!="string"&&(fr.isEncoding===go||!go(i)))throw new Error("Unknown encoding: "+i);return n||i}(e),this.encoding){case"utf16le":this.text=Bf,this.end=Lf,t=4;break;case"utf8":this.fillLast=Rf,t=4;break;case"base64":this.text=Df,this.end=Nf,t=3;break;default:return this.write=jf,this.end=Uf,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=fr.allocUnsafe(t)}function jr(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Rf(e){var t=this.lastTotal-this.lastNeed,i=function(n,o,r){if((192&o[0])!=128)return n.lastNeed=0,"�";if(n.lastNeed>1&&o.length>1){if((192&o[1])!=128)return n.lastNeed=1,"�";if(n.lastNeed>2&&o.length>2&&(192&o[2])!=128)return n.lastNeed=2,"�"}}(this,e);return i!==void 0?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length,void 0)}function Bf(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Lf(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function Df(e,t){var i=(e.length-t)%3;return i===0?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,i===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function Nf(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function jf(e){return e.toString(this.encoding)}function Uf(e){return e&&e.length?this.write(e):""}var Ba,Se,fe,La,Pn,di,Da,Na,ke,ur,xi,Ur,Qh,Xh,Xi,Ji,we,ja,Wi,fr,go,Ua=ee(()=>{for(ct(),ft(),ut(),Ba={byteLength:function(e){var t=Ia(e),i=t[0],n=t[1];return 3*(i+n)/4-n},toByteArray:function(e){var t,i,n=Ia(e),o=n[0],r=n[1],s=new La(function(h,c,u){return 3*(c+u)/4-u}(0,o,r)),a=0,l=r>0?o-4:o;for(i=0;i<l;i+=4)t=fe[e.charCodeAt(i)]<<18|fe[e.charCodeAt(i+1)]<<12|fe[e.charCodeAt(i+2)]<<6|fe[e.charCodeAt(i+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return r===2&&(t=fe[e.charCodeAt(i)]<<2|fe[e.charCodeAt(i+1)]>>4,s[a++]=255&t),r===1&&(t=fe[e.charCodeAt(i)]<<10|fe[e.charCodeAt(i+1)]<<4|fe[e.charCodeAt(i+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(e){for(var t,i=e.length,n=i%3,o=[],r=0,s=i-n;r<s;r+=16383)o.push(wf(e,r,r+16383>s?s:r+16383));return n===1?(t=e[i-1],o.push(Se[t>>2]+Se[t<<4&63]+"==")):n===2&&(t=(e[i-2]<<8)+e[i-1],o.push(Se[t>>10]+Se[t>>4&63]+Se[t<<2&63]+"=")),o.join("")}},Se=[],fe=[],La=typeof Uint8Array<"u"?Uint8Array:Array,Pn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",di=0,Da=Pn.length;di<Da;++di)Se[di]=Pn[di],fe[Pn.charCodeAt(di)]=di;fe[45]=62,fe[95]=63,Na={read:function(e,t,i,n,o){var r,s,a=8*o-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?o-1:0,d=i?-1:1,g=e[t+u];for(u+=d,r=g&(1<<-c)-1,g>>=-c,c+=a;c>0;r=256*r+e[t+u],u+=d,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=n;c>0;s=256*s+e[t+u],u+=d,c-=8);if(r===0)r=1-h;else{if(r===l)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),r-=h}return(g?-1:1)*s*Math.pow(2,r-n)},write:function(e,t,i,n,o,r){var s,a,l,h=8*r-o-1,c=(1<<h)-1,u=c>>1,d=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:r-1,b=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(t*l-1)*Math.pow(2,o),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;e[i+g]=255&a,g+=b,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;e[i+g]=255&s,g+=b,s/=256,h-=8);e[i+g-b]|=128*y}},ke={},ur=Ba,xi=Na,Ur=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,ke.Buffer=gt,ke.SlowBuffer=function(e){return+e!=e&&(e=0),gt.alloc(+e)},ke.INSPECT_MAX_BYTES=50,ke.kMaxLength=2147483647,gt.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}(),gt.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(gt.prototype,"parent",{enumerable:!0,get:function(){if(gt.isBuffer(this))return this.buffer}}),Object.defineProperty(gt.prototype,"offset",{enumerable:!0,get:function(){if(gt.isBuffer(this))return this.byteOffset}}),gt.poolSize=8192,gt.from=function(e,t,i){return Hh(e,t,i)},Object.setPrototypeOf(gt.prototype,Uint8Array.prototype),Object.setPrototypeOf(gt,Uint8Array),gt.alloc=function(e,t,i){return function(n,o,r){return $h(n),n<=0?Ve(n):o!==void 0?typeof r=="string"?Ve(n).fill(o,r):Ve(n).fill(o):Ve(n)}(e,t,i)},gt.allocUnsafe=function(e){return fo(e)},gt.allocUnsafeSlow=function(e){return fo(e)},gt.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==gt.prototype},gt.compare=function(e,t){if(qe(e,Uint8Array)&&(e=gt.from(e,e.offset,e.byteLength)),qe(t,Uint8Array)&&(t=gt.from(t,t.offset,t.byteLength)),!gt.isBuffer(e)||!gt.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,o=0,r=Math.min(i,n);o<r;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0},gt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},gt.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return gt.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=gt.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var r=e[i];if(qe(r,Uint8Array)&&(r=gt.from(r)),!gt.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,o),o+=r.length}return n},gt.byteLength=Vh,gt.prototype._isBuffer=!0,gt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ui(this,t,t+1);return this},gt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ui(this,t,t+3),ui(this,t+1,t+2);return this},gt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ui(this,t,t+7),ui(this,t+1,t+6),ui(this,t+2,t+5),ui(this,t+3,t+4);return this},gt.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Yh(this,0,e):Sf.apply(this,arguments)},gt.prototype.toLocaleString=gt.prototype.toString,gt.prototype.equals=function(e){if(!gt.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||gt.compare(this,e)===0},gt.prototype.inspect=function(){var e="",t=ke.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Ur&&(gt.prototype[Ur]=gt.prototype.inspect),gt.prototype.compare=function(e,t,i,n,o){if(qe(e,Uint8Array)&&(e=gt.from(e,e.offset,e.byteLength)),!gt.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(this===e)return 0;for(var r=(o>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),a=Math.min(r,s),l=this.slice(n,o),h=e.slice(t,i),c=0;c<a;++c)if(l[c]!==h[c]){r=l[c],s=h[c];break}return r<s?-1:s<r?1:0},gt.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},gt.prototype.indexOf=function(e,t,i){return Ca(this,e,t,i,!0)},gt.prototype.lastIndexOf=function(e,t,i){return Ca(this,e,t,i,!1)},gt.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,n===void 0&&(n="utf8")):(n=i,i=void 0)}var o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return xf(this,e,t,i);case"utf8":case"utf-8":return Ef(this,e,t,i);case"ascii":return qh(this,e,t,i);case"latin1":case"binary":return kf(this,e,t,i);case"base64":return Af(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tf(this,e,t,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},gt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},gt.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=t===void 0?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,gt.prototype),n},gt.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||Xt(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n},gt.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||Xt(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},gt.prototype.readUInt8=function(e,t){return e>>>=0,t||Xt(e,1,this.length),this[e]},gt.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Xt(e,2,this.length),this[e]|this[e+1]<<8},gt.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Xt(e,2,this.length),this[e]<<8|this[e+1]},gt.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},gt.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},gt.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||Xt(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},gt.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||Xt(e,t,this.length);for(var n=t,o=1,r=this[e+--n];n>0&&(o*=256);)r+=this[e+--n]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},gt.prototype.readInt8=function(e,t){return e>>>=0,t||Xt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},gt.prototype.readInt16LE=function(e,t){e>>>=0,t||Xt(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},gt.prototype.readInt16BE=function(e,t){e>>>=0,t||Xt(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},gt.prototype.readInt32LE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},gt.prototype.readInt32BE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},gt.prototype.readFloatLE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),xi.read(this,e,!0,23,4)},gt.prototype.readFloatBE=function(e,t){return e>>>=0,t||Xt(e,4,this.length),xi.read(this,e,!1,23,4)},gt.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Xt(e,8,this.length),xi.read(this,e,!0,52,8)},gt.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Xt(e,8,this.length),xi.read(this,e,!1,52,8)},gt.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||le(this,e,t,i,Math.pow(2,8*i)-1,0);var o=1,r=0;for(this[t]=255&e;++r<i&&(o*=256);)this[t+r]=e/o&255;return t+i},gt.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||le(this,e,t,i,Math.pow(2,8*i)-1,0);var o=i-1,r=1;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=e/r&255;return t+i},gt.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,1,255,0),this[t]=255&e,t+1},gt.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},gt.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},gt.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},gt.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},gt.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*i-1);le(this,e,t,i,o-1,-o)}var r=0,s=1,a=0;for(this[t]=255&e;++r<i&&(s*=256);)e<0&&a===0&&this[t+r-1]!==0&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+i},gt.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*i-1);le(this,e,t,i,o-1,-o)}var r=i-1,s=1,a=0;for(this[t+r]=255&e;--r>=0&&(s*=256);)e<0&&a===0&&this[t+r+1]!==0&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+i},gt.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},gt.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},gt.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},gt.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},gt.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||le(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},gt.prototype.writeFloatLE=function(e,t,i){return Pa(this,e,t,!0,i)},gt.prototype.writeFloatBE=function(e,t,i){return Pa(this,e,t,!1,i)},gt.prototype.writeDoubleLE=function(e,t,i){return Ma(this,e,t,!0,i)},gt.prototype.writeDoubleBE=function(e,t,i){return Ma(this,e,t,!1,i)},gt.prototype.copy=function(e,t,i,n){if(!gt.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||n===0||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var r=o-1;r>=0;--r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return o},gt.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!gt.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){var o=e.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(e=o)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var r;if(t>>>=0,i=i===void 0?this.length:i>>>0,e||(e=0),typeof e=="number")for(r=t;r<i;++r)this[r]=e;else{var s=gt.isBuffer(e)?e:gt.from(e,n),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<i-t;++r)this[r+t]=s[r%a]}return this},Qh=/[^+/0-9A-Za-z-_]/g,Xh=function(){for(var e=new Array(256),t=0;t<16;++t)for(var i=16*t,n=0;n<16;++n)e[i+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}(),ke.Buffer,ke.INSPECT_MAX_BYTES,ke.kMaxLength,Xi={},Ji=ke,we=Ji.Buffer,we.from&&we.alloc&&we.allocUnsafe&&we.allocUnsafeSlow?Xi=Ji:(Ra(Ji,Xi),Xi.Buffer=fi),fi.prototype=Object.create(we.prototype),Ra(we,fi),fi.from=function(e,t,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return we(e,t,i)},fi.alloc=function(e,t,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=we(e);return t!==void 0?typeof i=="string"?n.fill(t,i):n.fill(t):n.fill(0),n},fi.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return we(e)},fi.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ji.SlowBuffer(e)},ja=Xi,Wi={},fr=ja.Buffer,go=fr.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},Wi.StringDecoder=Qi,Qi.prototype.write=function(e){if(e.length===0)return"";var t,i;if(this.lastNeed){if((t=this.fillLast(e))===void 0)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},Qi.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},Qi.prototype.text=function(e,t){var i=function(o,r,s){var a=r.length-1;if(a<s)return 0;var l=jr(r[a]);return l>=0?(l>0&&(o.lastNeed=l-1),l):--a<s||l===-2?0:(l=jr(r[a]))>=0?(l>0&&(o.lastNeed=l-2),l):--a<s||l===-2?0:(l=jr(r[a]))>=0?(l>0&&(l===2?l=0:o.lastNeed=l-3),l):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},Qi.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},Wi.StringDecoder,Wi.StringDecoder}),Jh={};Mi(Jh,{StringDecoder:()=>Zh,default:()=>Wi});var Zh,Ff=ee(()=>{ct(),ft(),ut(),Ua(),Ua(),Zh=Wi.StringDecoder}),tc=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:r}=Kt(),{Buffer:s}=(ne(),Nt(ie)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:l}=ue().codes;function h(c,u,d){let g;if(typeof u=="string"||u instanceof s)return new c({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let b;if(u&&u[o])b=!0,g=u[o]();else if(u&&u[r])b=!1,g=u[r]();else throw new a("iterable",["Iterable"],u);let y=new c({objectMode:!0,highWaterMark:1,...d}),_=!1;y._read=function(){_||(_=!0,x())},y._destroy=function(w,O){n(E(w),()=>i.nextTick(O,w),P=>i.nextTick(O,P||w))};async function E(w){let O=w!=null,P=typeof g.throw=="function";if(O&&P){let{value:k,done:T}=await g.throw(w);if(await k,T)return}if(typeof g.return=="function"){let{value:k}=await g.return();await k}}async function x(){for(;;){try{let{value:w,done:O}=b?await g.next():g.next();if(O)y.push(null);else{let P=w&&typeof w.then=="function"?await w:w;if(P===null)throw _=!1,new l;if(y.push(P))continue;_=!1}}catch(w){y.destroy(w)}break}}return y}t.exports=h}),Tr=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:r,NumberParseInt:s,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:h,Promise:c,SafeSet:u,SymbolAsyncIterator:d,Symbol:g}=Kt();t.exports=v,v.ReadableState=_t;var{EventEmitter:b}=(Yi(),Nt(Bi)),{Stream:y,prependListener:_}=qo(),{Buffer:E}=(ne(),Nt(ie)),{addAbortSignal:x}=kr(),w=hi(),O=Ye().debuglog("stream",f=>{O=f}),P=_f(),k=qi(),{getHighWaterMark:T,getDefaultHighWaterMark:I}=Yo(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:K,ERR_METHOD_NOT_IMPLEMENTED:Q,ERR_OUT_OF_RANGE:A,ERR_STREAM_PUSH_AFTER_EOF:H,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:J}}=ue(),{validateObject:q}=Er(),st=g("kPaused"),{StringDecoder:et}=(Ff(),Nt(Jh)),$=tc();h(v.prototype,y.prototype),h(v,y);var mt=()=>{},{errorOrDestroy:rt}=k;function _t(f,m,S){typeof S!="boolean"&&(S=m instanceof Ke()),this.objectMode=!!(f&&f.objectMode),S&&(this.objectMode=this.objectMode||!!(f&&f.readableObjectMode)),this.highWaterMark=f?T(this,f,"readableHighWaterMark",S):I(!1),this.buffer=new P,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[st]=null,this.errorEmitted=!1,this.emitClose=!f||f.emitClose!==!1,this.autoDestroy=!f||f.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,f&&f.encoding&&(this.decoder=new et(f.encoding),this.encoding=f.encoding)}function v(f){if(!(this instanceof v))return new v(f);let m=this instanceof Ke();this._readableState=new _t(f,this,m),f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&!m&&x(f.signal,this)),y.call(this,f),k.construct(this,()=>{this._readableState.needReadable&&nt(this,this._readableState)})}v.prototype.destroy=k.destroy,v.prototype._undestroy=k.undestroy,v.prototype._destroy=function(f,m){m(f)},v.prototype[b.captureRejectionSymbol]=function(f){this.destroy(f)},v.prototype.push=function(f,m){return X(this,f,m,!1)},v.prototype.unshift=function(f,m){return X(this,f,m,!0)};function X(f,m,S,M){O("readableAddChunk",m);let z=f._readableState,it;if(z.objectMode||(typeof m=="string"?(S=S||z.defaultEncoding,z.encoding!==S&&(M&&z.encoding?m=E.from(m,S).toString(z.encoding):(m=E.from(m,S),S=""))):m instanceof E?S="":y._isUint8Array(m)?(m=y._uint8ArrayToBuffer(m),S=""):m!=null&&(it=new K("chunk",["string","Buffer","Uint8Array"],m))),it)rt(f,it);else if(m===null)z.reading=!1,C(f,z);else if(z.objectMode||m&&m.length>0)if(M)if(z.endEmitted)rt(f,new J);else{if(z.destroyed||z.errored)return!1;lt(f,z,m,!0)}else if(z.ended)rt(f,new H);else{if(z.destroyed||z.errored)return!1;z.reading=!1,z.decoder&&!S?(m=z.decoder.write(m),z.objectMode||m.length!==0?lt(f,z,m,!1):nt(f,z)):lt(f,z,m,!1)}else M||(z.reading=!1,nt(f,z));return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function lt(f,m,S,M){m.flowing&&m.length===0&&!m.sync&&f.listenerCount("data")>0?(m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null,m.dataEmitted=!0,f.emit("data",S)):(m.length+=m.objectMode?1:S.length,M?m.buffer.unshift(S):m.buffer.push(S),m.needReadable&&G(f)),nt(f,m)}v.prototype.isPaused=function(){let f=this._readableState;return f[st]===!0||f.flowing===!1},v.prototype.setEncoding=function(f){let m=new et(f);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;let S=this._readableState.buffer,M="";for(let z of S)M+=m.write(z);return S.clear(),M!==""&&S.push(M),this._readableState.length=M.length,this};var wt=1073741824;function ot(f){if(f>wt)throw new A("size","<= 1GiB",f);return f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++,f}function D(f,m){return f<=0||m.length===0&&m.ended?0:m.objectMode?1:r(f)?m.flowing&&m.length?m.buffer.first().length:m.length:f<=m.length?f:m.ended?m.length:0}v.prototype.read=function(f){O("read",f),f===void 0?f=NaN:o(f)||(f=s(f,10));let m=this._readableState,S=f;if(f>m.highWaterMark&&(m.highWaterMark=ot(f)),f!==0&&(m.emittedReadable=!1),f===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return O("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?R(this):G(this),null;if(f=D(f,m),f===0&&m.ended)return m.length===0&&R(this),null;let M=m.needReadable;if(O("need readable",M),(m.length===0||m.length-f<m.highWaterMark)&&(M=!0,O("length less than watermark",M)),m.ended||m.reading||m.destroyed||m.errored||!m.constructed)M=!1,O("reading, ended or constructing",M);else if(M){O("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0);try{this._read(m.highWaterMark)}catch(it){rt(this,it)}m.sync=!1,m.reading||(f=D(S,m))}let z;return f>0?z=Y(f,m):z=null,z===null?(m.needReadable=m.length<=m.highWaterMark,f=0):(m.length-=f,m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null),m.length===0&&(m.ended||(m.needReadable=!0),S!==f&&m.ended&&R(this)),z!==null&&!m.errorEmitted&&!m.closeEmitted&&(m.dataEmitted=!0,this.emit("data",z)),z};function C(f,m){if(O("onEofChunk"),!m.ended){if(m.decoder){let S=m.decoder.end();S&&S.length&&(m.buffer.push(S),m.length+=m.objectMode?1:S.length)}m.ended=!0,m.sync?G(f):(m.needReadable=!1,m.emittedReadable=!0,dt(f))}}function G(f){let m=f._readableState;O("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(O("emitReadable",m.flowing),m.emittedReadable=!0,i.nextTick(dt,f))}function dt(f){let m=f._readableState;O("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&!m.errored&&(m.length||m.ended)&&(f.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,at(f)}function nt(f,m){!m.readingMore&&m.constructed&&(m.readingMore=!0,i.nextTick(tt,f,m))}function tt(f,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){let S=m.length;if(O("maybeReadMore read 0"),f.read(0),S===m.length)break}m.readingMore=!1}v.prototype._read=function(f){throw new Q("_read()")},v.prototype.pipe=function(f,m){let S=this,M=this._readableState;M.pipes.length===1&&(M.multiAwaitDrain||(M.multiAwaitDrain=!0,M.awaitDrainWriters=new u(M.awaitDrainWriters?[M.awaitDrainWriters]:[]))),M.pipes.push(f),O("pipe count=%d opts=%j",M.pipes.length,m);let z=(!m||m.end!==!1)&&f!==i.stdout&&f!==i.stderr?kt:te;M.endEmitted?i.nextTick(z):S.once("end",z),f.on("unpipe",it);function it(ae,Qt){O("onunpipe"),ae===S&&Qt&&Qt.hasUnpiped===!1&&(Qt.hasUnpiped=!0,xt())}function kt(){O("onend"),f.end()}let It,Ct=!1;function xt(){O("cleanup"),f.removeListener("close",Gt),f.removeListener("finish",Vt),It&&f.removeListener("drain",It),f.removeListener("error",jt),f.removeListener("unpipe",it),S.removeListener("end",kt),S.removeListener("end",te),S.removeListener("data",At),Ct=!0,It&&M.awaitDrainWriters&&(!f._writableState||f._writableState.needDrain)&&It()}function Tt(){Ct||(M.pipes.length===1&&M.pipes[0]===f?(O("false write response, pause",0),M.awaitDrainWriters=f,M.multiAwaitDrain=!1):M.pipes.length>1&&M.pipes.includes(f)&&(O("false write response, pause",M.awaitDrainWriters.size),M.awaitDrainWriters.add(f)),S.pause()),It||(It=yt(S,f),f.on("drain",It))}S.on("data",At);function At(ae){O("ondata");let Qt=f.write(ae);O("dest.write",Qt),Qt===!1&&Tt()}function jt(ae){if(O("onerror",ae),te(),f.removeListener("error",jt),f.listenerCount("error")===0){let Qt=f._writableState||f._readableState;Qt&&!Qt.errorEmitted?rt(f,ae):f.emit("error",ae)}}_(f,"error",jt);function Gt(){f.removeListener("finish",Vt),te()}f.once("close",Gt);function Vt(){O("onfinish"),f.removeListener("close",Gt),te()}f.once("finish",Vt);function te(){O("unpipe"),S.unpipe(f)}return f.emit("pipe",S),f.writableNeedDrain===!0?M.flowing&&Tt():M.flowing||(O("pipe resume"),S.resume()),f};function yt(f,m){return function(){let S=f._readableState;S.awaitDrainWriters===m?(O("pipeOnDrain",1),S.awaitDrainWriters=null):S.multiAwaitDrain&&(O("pipeOnDrain",S.awaitDrainWriters.size),S.awaitDrainWriters.delete(m)),(!S.awaitDrainWriters||S.awaitDrainWriters.size===0)&&f.listenerCount("data")&&f.resume()}}v.prototype.unpipe=function(f){let m=this._readableState,S={hasUnpiped:!1};if(m.pipes.length===0)return this;if(!f){let z=m.pipes;m.pipes=[],this.pause();for(let it=0;it<z.length;it++)z[it].emit("unpipe",this,{hasUnpiped:!1});return this}let M=n(m.pipes,f);return M===-1?this:(m.pipes.splice(M,1),m.pipes.length===0&&this.pause(),f.emit("unpipe",this,S),this)},v.prototype.on=function(f,m){let S=y.prototype.on.call(this,f,m),M=this._readableState;return f==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):f==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,O("on readable",M.length,M.reading),M.length?G(this):M.reading||i.nextTick(B,this)),S},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(f,m){let S=y.prototype.removeListener.call(this,f,m);return f==="readable"&&i.nextTick(pt,this),S},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(f){let m=y.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&i.nextTick(pt,this),m};function pt(f){let m=f._readableState;m.readableListening=f.listenerCount("readable")>0,m.resumeScheduled&&m[st]===!1?m.flowing=!0:f.listenerCount("data")>0?f.resume():m.readableListening||(m.flowing=null)}function B(f){O("readable nexttick read 0"),f.read(0)}v.prototype.resume=function(){let f=this._readableState;return f.flowing||(O("resume"),f.flowing=!f.readableListening,F(this,f)),f[st]=!1,this};function F(f,m){m.resumeScheduled||(m.resumeScheduled=!0,i.nextTick(W,f,m))}function W(f,m){O("resume",m.reading),m.reading||f.read(0),m.resumeScheduled=!1,f.emit("resume"),at(f),m.flowing&&!m.reading&&f.read(0)}v.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[st]=!0,this};function at(f){let m=f._readableState;for(O("flow",m.flowing);m.flowing&&f.read()!==null;);}v.prototype.wrap=function(f){let m=!1;f.on("data",M=>{!this.push(M)&&f.pause&&(m=!0,f.pause())}),f.on("end",()=>{this.push(null)}),f.on("error",M=>{rt(this,M)}),f.on("close",()=>{this.destroy()}),f.on("destroy",()=>{this.destroy()}),this._read=()=>{m&&f.resume&&(m=!1,f.resume())};let S=l(f);for(let M=1;M<S.length;M++){let z=S[M];this[z]===void 0&&typeof f[z]=="function"&&(this[z]=f[z].bind(f))}return this},v.prototype[d]=function(){return Z(this)},v.prototype.iterator=function(f){return f!==void 0&&q(f,"options"),Z(this,f)};function Z(f,m){typeof f.read!="function"&&(f=v.wrap(f,{objectMode:!0}));let S=j(f,m);return S.stream=f,S}async function*j(f,m){let S=mt;function M(kt){this===f?(S(),S=mt):S=kt}f.on("readable",M);let z,it=w(f,{writable:!1},kt=>{z=kt?N(z,kt):null,S(),S=mt});try{for(;;){let kt=f.destroyed?null:f.read();if(kt!==null)yield kt;else{if(z)throw z;if(z===null)return;await new c(M)}}}catch(kt){throw z=N(z,kt),z}finally{(z||(m==null?void 0:m.destroyOnReturn)!==!1)&&(z===void 0||f._readableState.autoDestroy)?k.destroyer(f,null):(f.off("readable",M),it())}}a(v.prototype,{readable:{__proto__:null,get(){let f=this._readableState;return!!f&&f.readable!==!1&&!f.destroyed&&!f.errorEmitted&&!f.endEmitted},set(f){this._readableState&&(this._readableState.readable=!!f)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(f){this._readableState&&(this._readableState.destroyed=f)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(_t.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[st]!==!1},set(f){this[st]=!!f}}}),v._fromList=Y;function Y(f,m){if(m.length===0)return null;let S;return m.objectMode?S=m.buffer.shift():!f||f>=m.length?(m.decoder?S=m.buffer.join(""):m.buffer.length===1?S=m.buffer.first():S=m.buffer.concat(m.length),m.buffer.clear()):S=m.buffer.consume(f,m.decoder),S}function R(f){let m=f._readableState;O("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,i.nextTick(U,m,f))}function U(f,m){if(O("endReadableNT",f.endEmitted,f.length),!f.errored&&!f.closeEmitted&&!f.endEmitted&&f.length===0){if(f.endEmitted=!0,m.emit("end"),m.writable&&m.allowHalfOpen===!1)i.nextTick(V,m);else if(f.autoDestroy){let S=m._writableState;(!S||S.autoDestroy&&(S.finished||S.writable===!1))&&m.destroy()}}}function V(f){f.writable&&!f.writableEnded&&!f.destroyed&&f.end()}v.from=function(f,m){return $(v,f,m)};var ht;function p(){return ht===void 0&&(ht={}),ht}v.fromWeb=function(f,m){return p().newStreamReadableFromReadableStream(f,m)},v.toWeb=function(f,m){return p().newReadableStreamFromStreamReadable(f,m)},v.wrap=function(f,m){var S,M;return new v({objectMode:(S=(M=f.readableObjectMode)!==null&&M!==void 0?M:f.objectMode)!==null&&S!==void 0?S:!0,...m,destroy(z,it){k.destroyer(f,z),it(z)}}).wrap(f)}}),ec=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:s,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:h,Symbol:c,SymbolHasInstance:u}=Kt();t.exports=et,et.WritableState=q;var{EventEmitter:d}=(Yi(),Nt(Bi)),g=qo().Stream,{Buffer:b}=(ne(),Nt(ie)),y=qi(),{addAbortSignal:_}=kr(),{getHighWaterMark:E,getDefaultHighWaterMark:x}=Yo(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:N,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:Q}=ue().codes,{errorOrDestroy:A}=y;l(et.prototype,g.prototype),l(et,g);function H(){}var J=c("kOnFinished");function q(B,F,W){typeof W!="boolean"&&(W=F instanceof Ke()),this.objectMode=!!(B&&B.objectMode),W&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?E(this,B,"writableHighWaterMark",W):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let at=!!(B&&B.decodeStrings===!1);this.decodeStrings=!at,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=v.bind(void 0,F),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,st(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function st(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}q.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},s(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function et(B){let F=this instanceof Ke();if(!F&&!r(et,this))return new et(B);this._writableState=new q(B,this,F),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&_(B.signal,this)),g.call(this,B),y.construct(this,()=>{let W=this._writableState;W.writing||ot(this,W),dt(this,W)})}s(et,u,{__proto__:null,value:function(B){return r(this,B)?!0:this!==et?!1:B&&B._writableState instanceof q}}),et.prototype.pipe=function(){A(this,new k)};function $(B,F,W,at){let Z=B._writableState;if(typeof W=="function")at=W,W=Z.defaultEncoding;else{if(!W)W=Z.defaultEncoding;else if(W!=="buffer"&&!b.isEncoding(W))throw new Q(W);typeof at!="function"&&(at=H)}if(F===null)throw new N;if(!Z.objectMode)if(typeof F=="string")Z.decodeStrings!==!1&&(F=b.from(F,W),W="buffer");else if(F instanceof b)W="buffer";else if(g._isUint8Array(F))F=g._uint8ArrayToBuffer(F),W="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],F);let j;return Z.ending?j=new K:Z.destroyed&&(j=new T("write")),j?(i.nextTick(at,j),A(B,j,!0),j):(Z.pendingcb++,mt(B,Z,F,W,at))}et.prototype.write=function(B,F,W){return $(this,B,F,W)===!0},et.prototype.cork=function(){this._writableState.corked++},et.prototype.uncork=function(){let B=this._writableState;B.corked&&(B.corked--,B.writing||ot(this,B))},et.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=h(B)),!b.isEncoding(B))throw new Q(B);return this._writableState.defaultEncoding=B,this};function mt(B,F,W,at,Z){let j=F.objectMode?1:W.length;F.length+=j;let Y=F.length<F.highWaterMark;return Y||(F.needDrain=!0),F.writing||F.corked||F.errored||!F.constructed?(F.buffered.push({chunk:W,encoding:at,callback:Z}),F.allBuffers&&at!=="buffer"&&(F.allBuffers=!1),F.allNoop&&Z!==H&&(F.allNoop=!1)):(F.writelen=j,F.writecb=Z,F.writing=!0,F.sync=!0,B._write(W,at,F.onwrite),F.sync=!1),Y&&!F.errored&&!F.destroyed}function rt(B,F,W,at,Z,j,Y){F.writelen=at,F.writecb=Y,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new T("write")):W?B._writev(Z,F.onwrite):B._write(Z,j,F.onwrite),F.sync=!1}function _t(B,F,W,at){--F.pendingcb,at(W),wt(F),A(B,W)}function v(B,F){let W=B._writableState,at=W.sync,Z=W.writecb;if(typeof Z!="function"){A(B,new P);return}W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0,F?(F.stack,W.errored||(W.errored=F),B._readableState&&!B._readableState.errored&&(B._readableState.errored=F),at?i.nextTick(_t,B,W,F,Z):_t(B,W,F,Z)):(W.buffered.length>W.bufferedIndex&&ot(B,W),at?W.afterWriteTickInfo!==null&&W.afterWriteTickInfo.cb===Z?W.afterWriteTickInfo.count++:(W.afterWriteTickInfo={count:1,cb:Z,stream:B,state:W},i.nextTick(X,W.afterWriteTickInfo)):lt(B,W,1,Z))}function X({stream:B,state:F,count:W,cb:at}){return F.afterWriteTickInfo=null,lt(B,F,W,at)}function lt(B,F,W,at){for(!F.ending&&!B.destroyed&&F.length===0&&F.needDrain&&(F.needDrain=!1,B.emit("drain"));W-- >0;)F.pendingcb--,at();F.destroyed&&wt(F),dt(B,F)}function wt(B){if(B.writing)return;for(let Z=B.bufferedIndex;Z<B.buffered.length;++Z){var F;let{chunk:j,callback:Y}=B.buffered[Z],R=B.objectMode?1:j.length;B.length-=R,Y((F=B.errored)!==null&&F!==void 0?F:new T("write"))}let W=B[J].splice(0);for(let Z=0;Z<W.length;Z++){var at;W[Z]((at=B.errored)!==null&&at!==void 0?at:new T("end"))}st(B)}function ot(B,F){if(F.corked||F.bufferProcessing||F.destroyed||!F.constructed)return;let{buffered:W,bufferedIndex:at,objectMode:Z}=F,j=W.length-at;if(!j)return;let Y=at;if(F.bufferProcessing=!0,j>1&&B._writev){F.pendingcb-=j-1;let R=F.allNoop?H:V=>{for(let ht=Y;ht<W.length;++ht)W[ht].callback(V)},U=F.allNoop&&Y===0?W:n(W,Y);U.allBuffers=F.allBuffers,rt(B,F,!0,F.length,U,"",R),st(F)}else{do{let{chunk:R,encoding:U,callback:V}=W[Y];W[Y++]=null;let ht=Z?1:R.length;rt(B,F,!1,ht,R,U,V)}while(Y<W.length&&!F.writing);Y===W.length?st(F):Y>256?(W.splice(0,Y),F.bufferedIndex=0):F.bufferedIndex=Y}F.bufferProcessing=!1}et.prototype._write=function(B,F,W){if(this._writev)this._writev([{chunk:B,encoding:F}],W);else throw new O("_write()")},et.prototype._writev=null,et.prototype.end=function(B,F,W){let at=this._writableState;typeof B=="function"?(W=B,B=null,F=null):typeof F=="function"&&(W=F,F=null);let Z;if(B!=null){let j=$(this,B,F);j instanceof o&&(Z=j)}return at.corked&&(at.corked=1,this.uncork()),Z||(!at.errored&&!at.ending?(at.ending=!0,dt(this,at,!0),at.ended=!0):at.finished?Z=new I("end"):at.destroyed&&(Z=new T("end"))),typeof W=="function"&&(Z||at.finished?i.nextTick(W,Z):at[J].push(W)),this};function D(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function C(B,F){let W=!1;function at(Z){if(W){A(B,Z??P());return}if(W=!0,F.pendingcb--,Z){let j=F[J].splice(0);for(let Y=0;Y<j.length;Y++)j[Y](Z);A(B,Z,F.sync)}else D(F)&&(F.prefinished=!0,B.emit("prefinish"),F.pendingcb++,i.nextTick(nt,B,F))}F.sync=!0,F.pendingcb++;try{B._final(at)}catch(Z){at(Z)}F.sync=!1}function G(B,F){!F.prefinished&&!F.finalCalled&&(typeof B._final=="function"&&!F.destroyed?(F.finalCalled=!0,C(B,F)):(F.prefinished=!0,B.emit("prefinish")))}function dt(B,F,W){D(F)&&(G(B,F),F.pendingcb===0&&(W?(F.pendingcb++,i.nextTick((at,Z)=>{D(Z)?nt(at,Z):Z.pendingcb--},B,F)):D(F)&&(F.pendingcb++,nt(B,F))))}function nt(B,F){F.pendingcb--,F.finished=!0;let W=F[J].splice(0);for(let at=0;at<W.length;at++)W[at]();if(B.emit("finish"),F.autoDestroy){let at=B._readableState;(!at||at.autoDestroy&&(at.endEmitted||at.readable===!1))&&B.destroy()}}a(et.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){let B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var tt=y.destroy;et.prototype.destroy=function(B,F){let W=this._writableState;return!W.destroyed&&(W.bufferedIndex<W.buffered.length||W[J].length)&&i.nextTick(wt,W),tt.call(this,B,F),this},et.prototype._undestroy=y.undestroy,et.prototype._destroy=function(B,F){F(B)},et.prototype[d.captureRejectionSymbol]=function(B){this.destroy(B)};var yt;function pt(){return yt===void 0&&(yt={}),yt}et.fromWeb=function(B,F){return pt().newStreamWritableFromWritableStream(B,F)},et.toWeb=function(B){return pt().newWritableStreamFromStreamWritable(B)}}),Wf=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),n=(ne(),Nt(ie)),{isReadable:o,isWritable:r,isIterable:s,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:h,isDuplexNodeStream:c}=Xe(),u=hi(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:b}}=ue(),{destroyer:y}=qi(),_=Ke(),E=Tr(),{createDeferredPromise:x}=Ye(),w=tc(),O=globalThis.Blob||n.Blob,P=typeof O<"u"?function(Q){return Q instanceof O}:function(Q){return!1},k=globalThis.AbortController||Vo().AbortController,{FunctionPrototypeCall:T}=Kt(),I=class extends _{constructor(Q){super(Q),(Q==null?void 0:Q.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Q==null?void 0:Q.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function Q(A,H){if(c(A))return A;if(l(A))return K({readable:A});if(h(A))return K({writable:A});if(a(A))return K({writable:!1,readable:!1});if(typeof A=="function"){let{value:q,write:st,final:et,destroy:$}=N(A);if(s(q))return w(I,q,{objectMode:!0,write:st,final:et,destroy:$});let mt=q==null?void 0:q.then;if(typeof mt=="function"){let rt,_t=T(mt,q,v=>{if(v!=null)throw new b("nully","body",v)},v=>{y(rt,v)});return rt=new I({objectMode:!0,readable:!1,write:st,final(v){et(async()=>{try{await _t,i.nextTick(v,null)}catch(X){i.nextTick(v,X)}})},destroy:$})}throw new b("Iterable, AsyncIterable or AsyncFunction",H,q)}if(P(A))return Q(A.arrayBuffer());if(s(A))return w(I,A,{objectMode:!0,writable:!1});if(typeof(A==null?void 0:A.writable)=="object"||typeof(A==null?void 0:A.readable)=="object"){let q=A!=null&&A.readable?l(A==null?void 0:A.readable)?A==null?void 0:A.readable:Q(A.readable):void 0,st=A!=null&&A.writable?h(A==null?void 0:A.writable)?A==null?void 0:A.writable:Q(A.writable):void 0;return K({readable:q,writable:st})}let J=A==null?void 0:A.then;if(typeof J=="function"){let q;return T(J,A,st=>{st!=null&&q.push(st),q.push(null)},st=>{y(q,st)}),q=new I({objectMode:!0,writable:!1,read(){}})}throw new g(H,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],A)};function N(Q){let{promise:A,resolve:H}=x(),J=new k,q=J.signal;return{value:Q(async function*(){for(;;){let st=A;A=null;let{chunk:et,done:$,cb:mt}=await st;if(i.nextTick(mt),$)return;if(q.aborted)throw new d(void 0,{cause:q.reason});({promise:A,resolve:H}=x()),yield et}}(),{signal:q}),write(st,et,$){let mt=H;H=null,mt({chunk:st,done:!1,cb:$})},final(st){let et=H;H=null,et({done:!0,cb:st})},destroy(st,et){J.abort(),et(st)}}}function K(Q){let A=Q.readable&&typeof Q.readable.read!="function"?E.wrap(Q.readable):Q.readable,H=Q.writable,J=!!o(A),q=!!r(H),st,et,$,mt,rt;function _t(v){let X=mt;mt=null,X?X(v):v&&rt.destroy(v)}return rt=new I({readableObjectMode:!!(A!=null&&A.readableObjectMode),writableObjectMode:!!(H!=null&&H.writableObjectMode),readable:J,writable:q}),q&&(u(H,v=>{q=!1,v&&y(A,v),_t(v)}),rt._write=function(v,X,lt){H.write(v,X)?lt():st=lt},rt._final=function(v){H.end(),et=v},H.on("drain",function(){if(st){let v=st;st=null,v()}}),H.on("finish",function(){if(et){let v=et;et=null,v()}})),J&&(u(A,v=>{J=!1,v&&y(A,v),_t(v)}),A.on("readable",function(){if($){let v=$;$=null,v()}}),A.on("end",function(){rt.push(null)}),rt._read=function(){for(;;){let v=A.read();if(v===null){$=rt._read;return}if(!rt.push(v))return}}),rt._destroy=function(v,X){!v&&mt!==null&&(v=new d),$=null,st=null,et=null,mt===null?X(v):(mt=X,y(H,v),y(A,v))},rt}}),Ke=bt((e,t)=>{ct(),ft(),ut();var{ObjectDefineProperties:i,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:o,ObjectSetPrototypeOf:r}=Kt();t.exports=l;var s=Tr(),a=ec();r(l.prototype,s.prototype),r(l,s);{let d=o(a.prototype);for(let g=0;g<d.length;g++){let b=d[g];l.prototype[b]||(l.prototype[b]=a.prototype[b])}}function l(d){if(!(this instanceof l))return new l(d);s.call(this,d),a.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}i(l.prototype,{writable:{__proto__:null,...n(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(a.prototype,"writableLength")},writableFinished:{__proto__:null,...n(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var h;function c(){return h===void 0&&(h={}),h}l.fromWeb=function(d,g){return c().newStreamDuplexFromReadableWritablePair(d,g)},l.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};var u;l.from=function(d){return u||(u=Wf()),u(d,"body")}}),ic=bt((e,t)=>{ct(),ft(),ut();var{ObjectSetPrototypeOf:i,Symbol:n}=Kt();t.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:o}=ue().codes,r=Ke(),{getHighWaterMark:s}=Yo();i(l.prototype,r.prototype),i(l,r);var a=n("kCallback");function l(u){if(!(this instanceof l))return new l(u);let d=u?s(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[a]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",c)}function h(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,g)=>{if(d){u?u(d):this.destroy(d);return}g!=null&&this.push(g),this.push(null),u&&u()}):(this.push(null),u&&u())}function c(){this._final!==h&&h.call(this)}l.prototype._final=h,l.prototype._transform=function(u,d,g){throw new o("_transform()")},l.prototype._write=function(u,d,g){let b=this._readableState,y=this._writableState,_=b.length;this._transform(u,d,(E,x)=>{if(E){g(E);return}x!=null&&this.push(x),y.ended||_===b.length||b.length<b.highWaterMark?g():this[a]=g})},l.prototype._read=function(){if(this[a]){let u=this[a];this[a]=null,u()}}}),nc=bt((e,t)=>{ct(),ft(),ut();var{ObjectSetPrototypeOf:i}=Kt();t.exports=o;var n=ic();i(o.prototype,n.prototype),i(o,n);function o(r){if(!(this instanceof o))return new o(r);n.call(this,r)}o.prototype._transform=function(r,s,a){a(null,r)}}),Qo=bt((e,t)=>{ct(),ft(),ut();var i=Ri(),{ArrayIsArray:n,Promise:o,SymbolAsyncIterator:r}=Kt(),s=hi(),{once:a}=Ye(),l=qi(),h=Ke(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:g,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:_}=ue(),{validateFunction:E,validateAbortSignal:x}=Er(),{isIterable:w,isReadable:O,isReadableNodeStream:P,isNodeStream:k,isTransformStream:T,isWebStream:I,isReadableStream:N,isReadableEnded:K}=Xe(),Q=globalThis.AbortController||Vo().AbortController,A,H;function J(X,lt,wt){let ot=!1;X.on("close",()=>{ot=!0});let D=s(X,{readable:lt,writable:wt},C=>{ot=!C});return{destroy:C=>{ot||(ot=!0,l.destroyer(X,C||new b("pipe")))},cleanup:D}}function q(X){return E(X[X.length-1],"streams[stream.length - 1]"),X.pop()}function st(X){if(w(X))return X;if(P(X))return et(X);throw new u("val",["Readable","Iterable","AsyncIterable"],X)}async function*et(X){H||(H=Tr()),yield*H.prototype[r].call(X)}async function $(X,lt,wt,{end:ot}){let D,C=null,G=tt=>{if(tt&&(D=tt),C){let yt=C;C=null,yt()}},dt=()=>new o((tt,yt)=>{D?yt(D):C=()=>{D?yt(D):tt()}});lt.on("drain",G);let nt=s(lt,{readable:!1},G);try{lt.writableNeedDrain&&await dt();for await(let tt of X)lt.write(tt)||await dt();ot&&lt.end(),await dt(),wt()}catch(tt){wt(D!==tt?c(D,tt):tt)}finally{nt(),lt.off("drain",G)}}async function mt(X,lt,wt,{end:ot}){T(lt)&&(lt=lt.writable);let D=lt.getWriter();try{for await(let C of X)await D.ready,D.write(C).catch(()=>{});await D.ready,ot&&await D.close(),wt()}catch(C){try{await D.abort(C),wt(C)}catch(G){wt(G)}}}function rt(...X){return _t(X,a(q(X)))}function _t(X,lt,wt){if(X.length===1&&n(X[0])&&(X=X[0]),X.length<2)throw new g("streams");let ot=new Q,D=ot.signal,C=wt==null?void 0:wt.signal,G=[];x(C,"options.signal");function dt(){F(new _)}C==null||C.addEventListener("abort",dt);let nt,tt,yt=[],pt=0;function B(j){F(j,--pt===0)}function F(j,Y){if(j&&(!nt||nt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(nt=j),!(!nt&&!Y)){for(;yt.length;)yt.shift()(nt);C==null||C.removeEventListener("abort",dt),ot.abort(),Y&&(nt||G.forEach(R=>R()),i.nextTick(lt,nt,tt))}}let W;for(let j=0;j<X.length;j++){let Y=X[j],R=j<X.length-1,U=j>0,V=R||(wt==null?void 0:wt.end)!==!1,ht=j===X.length-1;if(k(Y)){let p=function(f){f&&f.name!=="AbortError"&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"&&B(f)};if(V){let{destroy:f,cleanup:m}=J(Y,R,U);yt.push(f),O(Y)&&ht&&G.push(m)}Y.on("error",p),O(Y)&&ht&&G.push(()=>{Y.removeListener("error",p)})}if(j===0)if(typeof Y=="function"){if(W=Y({signal:D}),!w(W))throw new d("Iterable, AsyncIterable or Stream","source",W)}else w(Y)||P(Y)||T(Y)?W=Y:W=h.from(Y);else if(typeof Y=="function"){if(T(W)){var at;W=st((at=W)===null||at===void 0?void 0:at.readable)}else W=st(W);if(W=Y(W,{signal:D}),R){if(!w(W,!0))throw new d("AsyncIterable",`transform[${j-1}]`,W)}else{var Z;A||(A=nc());let p=new A({objectMode:!0}),f=(Z=W)===null||Z===void 0?void 0:Z.then;if(typeof f=="function")pt++,f.call(W,M=>{tt=M,M!=null&&p.write(M),V&&p.end(),i.nextTick(B)},M=>{p.destroy(M),i.nextTick(B,M)});else if(w(W,!0))pt++,$(W,p,B,{end:V});else if(N(W)||T(W)){let M=W.readable||W;pt++,$(M,p,B,{end:V})}else throw new d("AsyncIterable or Promise","destination",W);W=p;let{destroy:m,cleanup:S}=J(W,!1,!0);yt.push(m),ht&&G.push(S)}}else if(k(Y)){if(P(W)){pt+=2;let p=v(W,Y,B,{end:V});O(Y)&&ht&&G.push(p)}else if(T(W)||N(W)){let p=W.readable||W;pt++,$(p,Y,B,{end:V})}else if(w(W))pt++,$(W,Y,B,{end:V});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=Y}else if(I(Y)){if(P(W))pt++,mt(st(W),Y,B,{end:V});else if(N(W)||w(W))pt++,mt(W,Y,B,{end:V});else if(T(W))pt++,mt(W.readable,Y,B,{end:V});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=Y}else W=h.from(Y)}return(D!=null&&D.aborted||C!=null&&C.aborted)&&i.nextTick(dt),W}function v(X,lt,wt,{end:ot}){let D=!1;if(lt.on("close",()=>{D||wt(new y)}),X.pipe(lt,{end:!1}),ot){let C=function(){D=!0,lt.end()};K(X)?i.nextTick(C):X.once("end",C)}else wt();return s(X,{readable:!0,writable:!1},C=>{let G=X._readableState;C&&C.code==="ERR_STREAM_PREMATURE_CLOSE"&&G&&G.ended&&!G.errored&&!G.errorEmitted?X.once("end",wt).once("error",wt):wt(C)}),s(lt,{readable:!1,writable:!0},wt)}t.exports={pipelineImpl:_t,pipeline:rt}}),rc=bt((e,t)=>{ct(),ft(),ut();var{pipeline:i}=Qo(),n=Ke(),{destroyer:o}=qi(),{isNodeStream:r,isReadable:s,isWritable:a,isWebStream:l,isTransformStream:h,isWritableStream:c,isReadableStream:u}=Xe(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:b}}=ue(),y=hi();t.exports=function(..._){if(_.length===0)throw new b("streams");if(_.length===1)return n.from(_[0]);let E=[..._];if(typeof _[0]=="function"&&(_[0]=n.from(_[0])),typeof _[_.length-1]=="function"){let A=_.length-1;_[A]=n.from(_[A])}for(let A=0;A<_.length;++A)if(!(!r(_[A])&&!l(_[A]))){if(A<_.length-1&&!(s(_[A])||u(_[A])||h(_[A])))throw new g(`streams[${A}]`,E[A],"must be readable");if(A>0&&!(a(_[A])||c(_[A])||h(_[A])))throw new g(`streams[${A}]`,E[A],"must be writable")}let x,w,O,P,k;function T(A){let H=P;P=null,H?H(A):A?k.destroy(A):!Q&&!K&&k.destroy()}let I=_[0],N=i(_,T),K=!!(a(I)||c(I)||h(I)),Q=!!(s(N)||u(N)||h(N));if(k=new n({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(N!=null&&N.writableObjectMode),writable:K,readable:Q}),K){if(r(I))k._write=function(H,J,q){I.write(H,J)?q():x=q},k._final=function(H){I.end(),w=H},I.on("drain",function(){if(x){let H=x;x=null,H()}});else if(l(I)){let H=(h(I)?I.writable:I).getWriter();k._write=async function(J,q,st){try{await H.ready,H.write(J).catch(()=>{}),st()}catch(et){st(et)}},k._final=async function(J){try{await H.ready,H.close().catch(()=>{}),w=J}catch(q){J(q)}}}let A=h(N)?N.readable:N;y(A,()=>{if(w){let H=w;w=null,H()}})}if(Q){if(r(N))N.on("readable",function(){if(O){let A=O;O=null,A()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){let A=N.read();if(A===null){O=k._read;return}if(!k.push(A))return}};else if(l(N)){let A=(h(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{let{value:H,done:J}=await A.read();if(!k.push(H))return;if(J){k.push(null);return}}catch{return}}}}return k._destroy=function(A,H){!A&&P!==null&&(A=new d),O=null,x=null,w=null,P===null?H(A):(P=H,r(N)&&o(N,A))},k}}),zf=bt((e,t)=>{ct(),ft(),ut();var i=globalThis.AbortController||Vo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:s},AbortError:a}=ue(),{validateAbortSignal:l,validateInteger:h,validateObject:c}=Er(),u=Kt().Symbol("kWeak"),{finished:d}=hi(),g=rc(),{addAbortSignalNoValidate:b}=kr(),{isWritable:y,isNodeStream:_}=Xe(),{ArrayPrototypePush:E,MathFloor:x,Number:w,NumberIsNaN:O,Promise:P,PromiseReject:k,PromisePrototypeThen:T,Symbol:I}=Kt(),N=I("kEmpty"),K=I("kEof");function Q(ot,D){if(D!=null&&c(D,"options"),(D==null?void 0:D.signal)!=null&&l(D.signal,"options.signal"),_(ot)&&!y(ot))throw new n("stream",ot,"must be writable");let C=g(this,ot);return D!=null&&D.signal&&b(D.signal,C),C}function A(ot,D){if(typeof ot!="function")throw new o("fn",["Function","AsyncFunction"],ot);D!=null&&c(D,"options"),(D==null?void 0:D.signal)!=null&&l(D.signal,"options.signal");let C=1;return(D==null?void 0:D.concurrency)!=null&&(C=x(D.concurrency)),h(C,"concurrency",1),(async function*(){var G,dt;let nt=new i,tt=this,yt=[],pt=nt.signal,B={signal:pt},F=()=>nt.abort();D!=null&&(G=D.signal)!==null&&G!==void 0&&G.aborted&&F(),D==null||(dt=D.signal)===null||dt===void 0||dt.addEventListener("abort",F);let W,at,Z=!1;function j(){Z=!0}async function Y(){try{for await(let V of tt){var R;if(Z)return;if(pt.aborted)throw new a;try{V=ot(V,B)}catch(ht){V=k(ht)}V!==N&&(typeof((R=V)===null||R===void 0?void 0:R.catch)=="function"&&V.catch(j),yt.push(V),W&&(W(),W=null),!Z&&yt.length&&yt.length>=C&&await new P(ht=>{at=ht}))}yt.push(K)}catch(V){let ht=k(V);T(ht,void 0,j),yt.push(ht)}finally{var U;Z=!0,W&&(W(),W=null),D==null||(U=D.signal)===null||U===void 0||U.removeEventListener("abort",F)}}Y();try{for(;;){for(;yt.length>0;){let R=await yt[0];if(R===K)return;if(pt.aborted)throw new a;R!==N&&(yield R),yt.shift(),at&&(at(),at=null)}await new P(R=>{W=R})}}finally{nt.abort(),Z=!0,at&&(at(),at=null)}}).call(this)}function H(ot=void 0){return ot!=null&&c(ot,"options"),(ot==null?void 0:ot.signal)!=null&&l(ot.signal,"options.signal"),(async function*(){let D=0;for await(let G of this){var C;if(ot!=null&&(C=ot.signal)!==null&&C!==void 0&&C.aborted)throw new a({cause:ot.signal.reason});yield[D++,G]}}).call(this)}async function J(ot,D=void 0){for await(let C of $.call(this,ot,D))return!0;return!1}async function q(ot,D=void 0){if(typeof ot!="function")throw new o("fn",["Function","AsyncFunction"],ot);return!await J.call(this,async(...C)=>!await ot(...C),D)}async function st(ot,D){for await(let C of $.call(this,ot,D))return C}async function et(ot,D){if(typeof ot!="function")throw new o("fn",["Function","AsyncFunction"],ot);async function C(G,dt){return await ot(G,dt),N}for await(let G of A.call(this,C,D));}function $(ot,D){if(typeof ot!="function")throw new o("fn",["Function","AsyncFunction"],ot);async function C(G,dt){return await ot(G,dt)?G:N}return A.call(this,C,D)}var mt=class extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function rt(ot,D,C){var G;if(typeof ot!="function")throw new o("reducer",["Function","AsyncFunction"],ot);C!=null&&c(C,"options"),(C==null?void 0:C.signal)!=null&&l(C.signal,"options.signal");let dt=arguments.length>1;if(C!=null&&(G=C.signal)!==null&&G!==void 0&&G.aborted){let B=new a(void 0,{cause:C.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(B)),B}let nt=new i,tt=nt.signal;if(C!=null&&C.signal){let B={once:!0,[u]:this};C.signal.addEventListener("abort",()=>nt.abort(),B)}let yt=!1;try{for await(let B of this){var pt;if(yt=!0,C!=null&&(pt=C.signal)!==null&&pt!==void 0&&pt.aborted)throw new a;dt?D=await ot(D,B,{signal:tt}):(D=B,dt=!0)}if(!yt&&!dt)throw new mt}finally{nt.abort()}return D}async function _t(ot){ot!=null&&c(ot,"options"),(ot==null?void 0:ot.signal)!=null&&l(ot.signal,"options.signal");let D=[];for await(let G of this){var C;if(ot!=null&&(C=ot.signal)!==null&&C!==void 0&&C.aborted)throw new a(void 0,{cause:ot.signal.reason});E(D,G)}return D}function v(ot,D){let C=A.call(this,ot,D);return(async function*(){for await(let G of C)yield*G}).call(this)}function X(ot){if(ot=w(ot),O(ot))return 0;if(ot<0)throw new s("number",">= 0",ot);return ot}function lt(ot,D=void 0){return D!=null&&c(D,"options"),(D==null?void 0:D.signal)!=null&&l(D.signal,"options.signal"),ot=X(ot),(async function*(){var C;if(D!=null&&(C=D.signal)!==null&&C!==void 0&&C.aborted)throw new a;for await(let dt of this){var G;if(D!=null&&(G=D.signal)!==null&&G!==void 0&&G.aborted)throw new a;ot--<=0&&(yield dt)}}).call(this)}function wt(ot,D=void 0){return D!=null&&c(D,"options"),(D==null?void 0:D.signal)!=null&&l(D.signal,"options.signal"),ot=X(ot),(async function*(){var C;if(D!=null&&(C=D.signal)!==null&&C!==void 0&&C.aborted)throw new a;for await(let dt of this){var G;if(D!=null&&(G=D.signal)!==null&&G!==void 0&&G.aborted)throw new a;if(ot-- >0)yield dt;else return}}).call(this)}t.exports.streamReturningOperators={asIndexedPairs:H,drop:lt,filter:$,flatMap:v,map:A,take:wt,compose:Q},t.exports.promiseReturningOperators={every:q,forEach:et,reduce:rt,toArray:_t,some:J,find:st}}),sc=bt((e,t)=>{ct(),ft(),ut();var{ArrayPrototypePop:i,Promise:n}=Kt(),{isIterable:o,isNodeStream:r,isWebStream:s}=Xe(),{pipelineImpl:a}=Qo(),{finished:l}=hi();oc();function h(...c){return new n((u,d)=>{let g,b,y=c[c.length-1];if(y&&typeof y=="object"&&!r(y)&&!o(y)&&!s(y)){let _=i(c);g=_.signal,b=_.end}a(c,(_,E)=>{_?d(_):u(E)},{signal:g,end:b})})}t.exports={finished:l,pipeline:h}}),oc=bt((e,t)=>{ct(),ft(),ut();var{Buffer:i}=(ne(),Nt(ie)),{ObjectDefineProperty:n,ObjectKeys:o,ReflectApply:r}=Kt(),{promisify:{custom:s}}=Ye(),{streamReturningOperators:a,promiseReturningOperators:l}=zf(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=ue(),c=rc(),{pipeline:u}=Qo(),{destroyer:d}=qi(),g=hi(),b=sc(),y=Xe(),_=t.exports=qo().Stream;_.isDisturbed=y.isDisturbed,_.isErrored=y.isErrored,_.isReadable=y.isReadable,_.Readable=Tr();for(let x of o(a)){let w=function(...P){if(new.target)throw h();return _.Readable.from(r(O,this,P))},O=a[x];n(w,"name",{__proto__:null,value:O.name}),n(w,"length",{__proto__:null,value:O.length}),n(_.Readable.prototype,x,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(let x of o(l)){let w=function(...P){if(new.target)throw h();return r(O,this,P)},O=l[x];n(w,"name",{__proto__:null,value:O.name}),n(w,"length",{__proto__:null,value:O.length}),n(_.Readable.prototype,x,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}_.Writable=ec(),_.Duplex=Ke(),_.Transform=ic(),_.PassThrough=nc(),_.pipeline=u;var{addAbortSignal:E}=kr();_.addAbortSignal=E,_.finished=g,_.destroy=d,_.compose=c,n(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),n(u,s,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),n(g,s,{__proto__:null,enumerable:!0,get(){return b.finished}}),_.Stream=_,_._isUint8Array=function(x){return x instanceof Uint8Array},_._uint8ArrayToBuffer=function(x){return i.from(x.buffer,x.byteOffset,x.byteLength)}}),Li=bt((e,t)=>{ct(),ft(),ut();var i=oc(),n=sc(),o=i.Readable.destroy;t.exports=i.Readable,t.exports._uint8ArrayToBuffer=i._uint8ArrayToBuffer,t.exports._isUint8Array=i._isUint8Array,t.exports.isDisturbed=i.isDisturbed,t.exports.isErrored=i.isErrored,t.exports.isReadable=i.isReadable,t.exports.Readable=i.Readable,t.exports.Writable=i.Writable,t.exports.Duplex=i.Duplex,t.exports.Transform=i.Transform,t.exports.PassThrough=i.PassThrough,t.exports.addAbortSignal=i.addAbortSignal,t.exports.finished=i.finished,t.exports.destroy=i.destroy,t.exports.destroy=o,t.exports.pipeline=i.pipeline,t.exports.compose=i.compose,Object.defineProperty(i,"promises",{configurable:!0,enumerable:!0,get(){return n}}),t.exports.Stream=i.Stream,t.exports.default=t.exports}),Hf=bt((e,t)=>{ct(),ft(),ut(),typeof Object.create=="function"?t.exports=function(i,n){n&&(i.super_=n,i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,n){if(n){i.super_=n;var o=function(){};o.prototype=n.prototype,i.prototype=new o,i.prototype.constructor=i}}}),$f=bt((e,t)=>{ct(),ft(),ut();var{Buffer:i}=(ne(),Nt(ie)),n=Symbol.for("BufferList");function o(r){if(!(this instanceof o))return new o(r);o._init.call(this,r)}o._init=function(r){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,r&&this.append(r)},o.prototype._new=function(r){return new o(r)},o.prototype._offset=function(r){if(r===0)return[0,0];let s=0;for(let a=0;a<this._bufs.length;a++){let l=s+this._bufs[a].length;if(r<l||a===this._bufs.length-1)return[a,r-s];s=l}},o.prototype._reverseOffset=function(r){let s=r[0],a=r[1];for(let l=0;l<s;l++)a+=this._bufs[l].length;return a},o.prototype.get=function(r){if(r>this.length||r<0)return;let s=this._offset(r);return this._bufs[s[0]][s[1]]},o.prototype.slice=function(r,s){return typeof r=="number"&&r<0&&(r+=this.length),typeof s=="number"&&s<0&&(s+=this.length),this.copy(null,0,r,s)},o.prototype.copy=function(r,s,a,l){if((typeof a!="number"||a<0)&&(a=0),(typeof l!="number"||l>this.length)&&(l=this.length),a>=this.length||l<=0)return r||i.alloc(0);let h=!!r,c=this._offset(a),u=l-a,d=u,g=h&&s||0,b=c[1];if(a===0&&l===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:i.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(r,g),g+=this._bufs[y].length;return r}if(d<=this._bufs[c[0]].length-b)return h?this._bufs[c[0]].copy(r,s,b,b+d):this._bufs[c[0]].slice(b,b+d);h||(r=i.allocUnsafe(u));for(let y=c[0];y<this._bufs.length;y++){let _=this._bufs[y].length-b;if(d>_)this._bufs[y].copy(r,g,b),g+=_;else{this._bufs[y].copy(r,g,b,b+d),g+=_;break}d-=_,b&&(b=0)}return r.length>g?r.slice(0,g):r},o.prototype.shallowSlice=function(r,s){if(r=r||0,s=typeof s!="number"?this.length:s,r<0&&(r+=this.length),s<0&&(s+=this.length),r===s)return this._new();let a=this._offset(r),l=this._offset(s),h=this._bufs.slice(a[0],l[0]+1);return l[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,l[1]),a[1]!==0&&(h[0]=h[0].slice(a[1])),this._new(h)},o.prototype.toString=function(r,s,a){return this.slice(s,a).toString(r)},o.prototype.consume=function(r){if(r=Math.trunc(r),Number.isNaN(r)||r<=0)return this;for(;this._bufs.length;)if(r>=this._bufs[0].length)r-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(r),this.length-=r;break}return this},o.prototype.duplicate=function(){let r=this._new();for(let s=0;s<this._bufs.length;s++)r.append(this._bufs[s]);return r},o.prototype.append=function(r){if(r==null)return this;if(r.buffer)this._appendBuffer(i.from(r.buffer,r.byteOffset,r.byteLength));else if(Array.isArray(r))for(let s=0;s<r.length;s++)this.append(r[s]);else if(this._isBufferList(r))for(let s=0;s<r._bufs.length;s++)this.append(r._bufs[s]);else typeof r=="number"&&(r=r.toString()),this._appendBuffer(i.from(r));return this},o.prototype._appendBuffer=function(r){this._bufs.push(r),this.length+=r.length},o.prototype.indexOf=function(r,s,a){if(a===void 0&&typeof s=="string"&&(a=s,s=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=i.from([r]):typeof r=="string"?r=i.from(r,a):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=i.from(r.buffer,r.byteOffset,r.byteLength):i.isBuffer(r)||(r=i.from(r)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),r.length===0)return s>this.length?this.length:s;let l=this._offset(s),h=l[0],c=l[1];for(;h<this._bufs.length;h++){let u=this._bufs[h];for(;c<u.length;)if(u.length-c>=r.length){let d=u.indexOf(r,c);if(d!==-1)return this._reverseOffset([h,d]);c=u.length-r.length+1}else{let d=this._reverseOffset([h,c]);if(this._match(d,r))return d;c++}c=0}return-1},o.prototype._match=function(r,s){if(this.length-r<s.length)return!1;for(let a=0;a<s.length;a++)if(this.get(r+a)!==s[a])return!1;return!0},function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let s in r)(function(a){r[a]===null?o.prototype[a]=function(l,h){return this.slice(l,l+h)[a](0,h)}:o.prototype[a]=function(l=0){return this.slice(l,l+r[a])[a](0)}})(s)}(),o.prototype._isBufferList=function(r){return r instanceof o||o.isBufferList(r)},o.isBufferList=function(r){return r!=null&&r[n]},t.exports=o}),Vf=bt((e,t)=>{ct(),ft(),ut();var i=Li().Duplex,n=Hf(),o=$f();function r(s){if(!(this instanceof r))return new r(s);if(typeof s=="function"){this._callback=s;let a=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",a)}),this.on("unpipe",function(l){l.removeListener("error",a)}),s=null}o._init.call(this,s),i.call(this)}n(r,i),Object.assign(r.prototype,o.prototype),r.prototype._new=function(s){return new r(s)},r.prototype._write=function(s,a,l){this._appendBuffer(s),typeof l=="function"&&l()},r.prototype._read=function(s){if(!this.length)return this.push(null);s=Math.min(s,this.length),this.push(this.slice(0,s)),this.consume(s)},r.prototype.end=function(s){i.prototype.end.call(this,s),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(s,a){this._bufs.length=0,this.length=0,a(s)},r.prototype._isBufferList=function(s){return s instanceof r||s instanceof o||r.isBufferList(s)},r.isBufferList=o.isBufferList,t.exports=r,t.exports.BufferListStream=r,t.exports.BufferList=o}),qf=bt((e,t)=>{ct(),ft(),ut();var i=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};t.exports=i}),ac=bt((e,t)=>{ct(),ft(),ut();var i=t.exports,{Buffer:n}=(ne(),Nt(ie));i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},i.requiredHeaderFlagsErrors={};for(let r in i.requiredHeaderFlags){let s=i.requiredHeaderFlags[r];i.requiredHeaderFlagsErrors[r]="Invalid header flag bits, must be 0x"+s.toString(16)+" for "+i.types[r]+" packet"}i.codes={};for(let r in i.types){let s=i.types[r];i.codes[s]=r}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=n.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=n.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=n.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={};for(let r in i.properties){let s=i.properties[r];i.propertiesCodes[s]=r}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function o(r){return[0,1,2].map(s=>[0,1].map(a=>[0,1].map(l=>{let h=n.alloc(1);return h.writeUInt8(i.codes[r]<<i.CMD_SHIFT|(a?i.DUP_MASK:0)|s<<i.QOS_SHIFT|l,0,!0),h})))}i.PUBLISH_HEADER=o("publish"),i.SUBSCRIBE_HEADER=o("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=o("unsubscribe"),i.ACKS={unsuback:o("unsuback"),puback:o("puback"),pubcomp:o("pubcomp"),pubrel:o("pubrel"),pubrec:o("pubrec")},i.SUBACK_HEADER=n.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=n.from([3]),i.VERSION4=n.from([4]),i.VERSION5=n.from([5]),i.VERSION131=n.from([131]),i.VERSION132=n.from([132]),i.QOS=[0,1,2].map(r=>n.from([r])),i.EMPTY={pingreq:n.from([i.codes.pingreq<<4,0]),pingresp:n.from([i.codes.pingresp<<4,0]),disconnect:n.from([i.codes.disconnect<<4,0])},i.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},i.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},i.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},i.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Yf=bt((e,t)=>{ct(),ft(),ut();var i=1e3,n=i*60,o=n*60,r=o*24,s=r*7,a=r*365.25;t.exports=function(d,g){g=g||{};var b=typeof d;if(b==="string"&&d.length>0)return l(d);if(b==="number"&&isFinite(d))return g.long?c(d):h(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function l(d){if(d=String(d),!(d.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(g){var b=parseFloat(g[1]),y=(g[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*s;case"days":case"day":case"d":return b*r;case"hours":case"hour":case"hrs":case"hr":case"h":return b*o;case"minutes":case"minute":case"mins":case"min":case"m":return b*n;case"seconds":case"second":case"secs":case"sec":case"s":return b*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(d){var g=Math.abs(d);return g>=r?Math.round(d/r)+"d":g>=o?Math.round(d/o)+"h":g>=n?Math.round(d/n)+"m":g>=i?Math.round(d/i)+"s":d+"ms"}function c(d){var g=Math.abs(d);return g>=r?u(d,g,r,"day"):g>=o?u(d,g,o,"hour"):g>=n?u(d,g,n,"minute"):g>=i?u(d,g,i,"second"):d+" ms"}function u(d,g,b,y){var _=g>=b*1.5;return Math.round(d/b)+" "+y+(_?"s":"")}}),Kf=bt((e,t)=>{ct(),ft(),ut();function i(n){r.debug=r,r.default=r,r.coerce=u,r.disable=l,r.enable=a,r.enabled=h,r.humanize=Yf(),r.destroy=d,Object.keys(n).forEach(g=>{r[g]=n[g]}),r.names=[],r.skips=[],r.formatters={};function o(g){let b=0;for(let y=0;y<g.length;y++)b=(b<<5)-b+g.charCodeAt(y),b|=0;return r.colors[Math.abs(b)%r.colors.length]}r.selectColor=o;function r(g){let b,y=null,_,E;function x(...w){if(!x.enabled)return;let O=x,P=Number(new Date),k=P-(b||P);O.diff=k,O.prev=b,O.curr=P,b=P,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let T=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(I,N)=>{if(I==="%%")return"%";T++;let K=r.formatters[N];if(typeof K=="function"){let Q=w[T];I=K.call(O,Q),w.splice(T,1),T--}return I}),r.formatArgs.call(O,w),(O.log||r.log).apply(O,w)}return x.namespace=g,x.useColors=r.useColors(),x.color=r.selectColor(g),x.extend=s,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(_!==r.namespaces&&(_=r.namespaces,E=r.enabled(g)),E),set:w=>{y=w}}),typeof r.init=="function"&&r.init(x),x}function s(g,b){let y=r(this.namespace+(typeof b>"u"?":":b)+g);return y.log=this.log,y}function a(g){r.save(g),r.namespaces=g,r.names=[],r.skips=[];let b,y=(typeof g=="string"?g:"").split(/[\s,]+/),_=y.length;for(b=0;b<_;b++)y[b]&&(g=y[b].replace(/\*/g,".*?"),g[0]==="-"?r.skips.push(new RegExp("^"+g.slice(1)+"$")):r.names.push(new RegExp("^"+g+"$")))}function l(){let g=[...r.names.map(c),...r.skips.map(c).map(b=>"-"+b)].join(",");return r.enable(""),g}function h(g){if(g[g.length-1]==="*")return!0;let b,y;for(b=0,y=r.skips.length;b<y;b++)if(r.skips[b].test(g))return!1;for(b=0,y=r.names.length;b<y;b++)if(r.names[b].test(g))return!0;return!1}function c(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function u(g){return g instanceof Error?g.stack||g.message:g}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}t.exports=i}),Ge=bt((e,t)=>{ct(),ft(),ut(),e.formatArgs=n,e.save=o,e.load=r,e.useColors=i,e.storage=s(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let h="color: "+this.color;l.splice(1,0,h,"color: inherit");let c=0,u=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(u=c))}),l.splice(u,0,h)}e.log=console.debug||console.log||(()=>{});function o(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function r(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof Rt<"u"&&"env"in Rt&&(l=Rt.env.DEBUG),l}function s(){try{return localStorage}catch{}}t.exports=Kf()(e);var{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}),Gf=bt((e,t)=>{ct(),ft(),ut();var i=Vf(),{EventEmitter:n}=(Yi(),Nt(Bi)),o=qf(),r=ac(),s=Ge()("mqtt-packet:parser"),a=class mo extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof mo?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new mo().parser(h)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=i(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let h=this._list.readUInt8(0),c=h>>r.CMD_SHIFT;this.packet.cmd=r.types[c];let u=h&15,d=r.requiredHeaderFlags[c];return d!=null&&u!==d?this._emitError(new Error(r.requiredHeaderFlagsErrors[c])):(this.packet.retain=(h&r.RETAIN_MASK)!==0,this.packet.qos=h>>r.QOS_SHIFT&r.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(h&r.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),s("_parseLength %d",h.value),!!h}_parsePayload(){s("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return s("_parsePayload complete result: %s",h),h}_parseConnect(){s("_parseConnect");let h,c,u,d,g={},b=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&r.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&r.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&r.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&r.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&r.WILL_QOS_MASK)>>r.WILL_QOS_SHIFT;if(g.will)b.will={},b.will.retain=_,b.will.qos=E;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&r.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(b.properties=w)}let x=this._parseString();if(x===null)return this._emitError(new Error("Packet too short"));if(b.clientId=x,s("_parseConnect: packet.clientId: %s",b.clientId),g.will){if(b.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(b.will.properties=w)}if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=h,s("_parseConnect: packet.will.topic: %s",b.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=c,s("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(g.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));b.username=d,s("_parseConnect: packet.username: %s",b.username)}if(g.password){if(u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse password"));b.password=u}return this.settings=b,s("_parseConnect: complete"),b}_parseConnack(){s("_parseConnack");let h=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(h.sessionPresent=!!(c&r.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(h.properties=u)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}h.payload=this._list.slice(this._pos,h.length),s("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){s("_parseSubscribe");let h=this.packet,c,u,d,g,b,y,_;if(h.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}if(h.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(u=this._parseByte(),this.settings.protocolVersion===5){if(u&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(u&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=u&r.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(u>>r.SUBSCRIBE_OPTIONS_NL_SHIFT&r.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(u>>r.SUBSCRIBE_OPTIONS_RAP_SHIFT&r.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=u>>r.SUBSCRIBE_OPTIONS_RH_SHIFT&r.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:c,qos:d},this.settings.protocolVersion===5?(_.nl=y,_.rap=b,_.rh=g):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",_),h.subscriptions.push(_)}}}_parseSuback(){s("_parseSuback");let h=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}if(h.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!r.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let h=this.packet;if(h.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}if(h.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<h.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),h.unsubscriptions.push(c)}}}_parseUnsuback(){s("_parseUnsuback");let h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&h.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(h.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(h.properties=c),h.granted=[];this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(!r.MQTT5_UNSUBACK_CODES[u])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(u)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(h.length>2){switch(h.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!r.MQTT5_PUBACK_PUBREC_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!r.MQTT5_PUBREL_PUBCOMP_CODES[h.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}s("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)}else h.reasonCode=0;if(h.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}}return!0}_parseDisconnect(){let h=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(h.reasonCode=this._parseByte(),r.MQTT5_DISCONNECT_CODES[h.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):h.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(h.reasonCode=this._parseByte(),!r.MQTT5_AUTH_CODES[h.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(h.properties=c),s("_parseAuth: result: true"),!0}_parseMessageId(){let h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){let c=this._parseNum(),u=c+this._pos;if(c===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,u);return this._pos+=c,s("_parseString: result: %s",d),d}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let h=this._parseNum(),c=h+this._pos;if(h===-1||c>this._list.length||c>this.packet.length)return null;let u=this._list.slice(this._pos,c);return this._pos+=h,s("_parseBuffer: result: %o",u),u}_parseNum(){if(this._list.length-this._pos<2)return-1;let h=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let h=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){s("_parseVarByteNum");let c=4,u=0,d=1,g=0,b=!1,y,_=this._pos?this._pos:0;for(;u<c&&_+u<this._list.length;){if(y=this._list.readUInt8(_+u++),g+=d*(y&r.VARBYTEINT_MASK),d*=128,!(y&r.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=u)break}return!b&&u===c&&this._list.length>=u&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=u),b?h?b={bytes:u,value:g}:b=g:b=!1,s("_parseVarByteNum: result: %o",b),b}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",h),h}_parseByType(h){switch(s("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let h=this._parseVarByteNum(),c=this._pos+h,u={};for(;this._pos<c;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let g=r.propertiesCodes[d];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){u[g]||(u[g]=Object.create(null));let b=this._parseByType(r.propertiesTypes[g]);if(u[g][b.name])if(Array.isArray(u[g][b.name]))u[g][b.name].push(b.value);else{let y=u[g][b.name];u[g][b.name]=[y],u[g][b.name].push(b.value)}else u[g][b.name]=b.value;continue}u[g]?Array.isArray(u[g])?u[g].push(this._parseByType(r.propertiesTypes[g])):(u[g]=[u[g]],u[g].push(this._parseByType(r.propertiesTypes[g]))):u[g]=this._parseByType(r.propertiesTypes[g])}return u}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(h){s("_emitError",h),this.error=h,this.emit("error",h)}};t.exports=a}),Qf=bt((e,t)=>{ct(),ft(),ut();var{Buffer:i}=(ne(),Nt(ie)),n=65536,o={},r=i.isBuffer(i.from([1,2]).subarray(0,1));function s(c){let u=i.allocUnsafe(2);return u.writeUInt8(c>>8,0),u.writeUInt8(c&255,1),u}function a(){for(let c=0;c<n;c++)o[c]=s(c)}function l(c){let u=0,d=0,g=i.allocUnsafe(4);do u=c%128|0,c=c/128|0,c>0&&(u=u|128),g.writeUInt8(u,d++);while(c>0&&d<4);return c>0&&(d=0),r?g.subarray(0,d):g.slice(0,d)}function h(c){let u=i.allocUnsafe(4);return u.writeUInt32BE(c,0),u}t.exports={cache:o,generateCache:a,generateNumber:s,genBufVariableByteInt:l,generate4ByteBuffer:h}}),Xf=bt((e,t)=>{ct(),ft(),ut(),typeof Rt>"u"||!Rt.version||Rt.version.indexOf("v0.")===0||Rt.version.indexOf("v1.")===0&&Rt.version.indexOf("v1.8.")!==0?t.exports={nextTick:i}:t.exports=Rt;function i(n,o,r,s){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,l,h;switch(a){case 0:case 1:return Rt.nextTick(n);case 2:return Rt.nextTick(function(){n.call(null,o)});case 3:return Rt.nextTick(function(){n.call(null,o,r)});case 4:return Rt.nextTick(function(){n.call(null,o,r,s)});default:for(l=new Array(a-1),h=0;h<l.length;)l[h++]=arguments[h];return Rt.nextTick(function(){n.apply(null,l)})}}}),lc=bt((e,t)=>{ct(),ft(),ut();var i=ac(),{Buffer:n}=(ne(),Nt(ie)),o=n.allocUnsafe(0),r=n.from([0]),s=Qf(),a=Xf().nextTick,l=Ge()("mqtt-packet:writeToStream"),h=s.cache,c=s.generateNumber,u=s.generateCache,d=s.genBufVariableByteInt,g=s.generate4ByteBuffer,b=et,y=!0;function _(D,C,G){switch(l("generate called"),C.cork&&(C.cork(),a(E,C)),y&&(y=!1,u()),l("generate: packet.cmd: %s",D.cmd),D.cmd){case"connect":return x(D,C);case"connack":return w(D,C,G);case"publish":return O(D,C,G);case"puback":case"pubrec":case"pubrel":case"pubcomp":return P(D,C,G);case"subscribe":return k(D,C,G);case"suback":return T(D,C,G);case"unsubscribe":return I(D,C,G);case"unsuback":return N(D,C,G);case"pingreq":case"pingresp":return K(D,C);case"disconnect":return Q(D,C,G);case"auth":return A(D,C,G);default:return C.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return b===et},set(D){D?((!h||Object.keys(h).length===0)&&(y=!0),b=et):(y=!1,b=$)}});function E(D){D.uncork()}function x(D,C,G){let dt=D||{},nt=dt.protocolId||"MQTT",tt=dt.protocolVersion||4,yt=dt.will,pt=dt.clean,B=dt.keepalive||0,F=dt.clientId||"",W=dt.username,at=dt.password,Z=dt.properties;pt===void 0&&(pt=!0);let j=0;if(!nt||typeof nt!="string"&&!n.isBuffer(nt))return C.destroy(new Error("Invalid protocolId")),!1;if(j+=nt.length+2,tt!==3&&tt!==4&&tt!==5)return C.destroy(new Error("Invalid protocol version")),!1;if(j+=1,(typeof F=="string"||n.isBuffer(F))&&(F||tt>=4)&&(F||pt))j+=n.byteLength(F)+2;else{if(tt<4)return C.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(pt*1===0)return C.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof B!="number"||B<0||B>65535||B%1!==0)return C.destroy(new Error("Invalid keepalive")),!1;j+=2,j+=1;let Y,R;if(tt===5){if(Y=_t(C,Z),!Y)return!1;j+=Y.length}if(yt){if(typeof yt!="object")return C.destroy(new Error("Invalid will")),!1;if(!yt.topic||typeof yt.topic!="string")return C.destroy(new Error("Invalid will topic")),!1;if(j+=n.byteLength(yt.topic)+2,j+=2,yt.payload)if(yt.payload.length>=0)typeof yt.payload=="string"?j+=n.byteLength(yt.payload):j+=yt.payload.length;else return C.destroy(new Error("Invalid will payload")),!1;if(R={},tt===5){if(R=_t(C,yt.properties),!R)return!1;j+=R.length}}let U=!1;if(W!=null)if(ot(W))U=!0,j+=n.byteLength(W)+2;else return C.destroy(new Error("Invalid username")),!1;if(at!=null){if(!U)return C.destroy(new Error("Username is required to use password")),!1;if(ot(at))j+=wt(at)+2;else return C.destroy(new Error("Invalid password")),!1}C.write(i.CONNECT_HEADER),J(C,j),rt(C,nt),dt.bridgeMode&&(tt+=128),C.write(tt===131?i.VERSION131:tt===132?i.VERSION132:tt===4?i.VERSION4:tt===5?i.VERSION5:i.VERSION3);let V=0;return V|=W!=null?i.USERNAME_MASK:0,V|=at!=null?i.PASSWORD_MASK:0,V|=yt&&yt.retain?i.WILL_RETAIN_MASK:0,V|=yt&&yt.qos?yt.qos<<i.WILL_QOS_SHIFT:0,V|=yt?i.WILL_FLAG_MASK:0,V|=pt?i.CLEAN_SESSION_MASK:0,C.write(n.from([V])),b(C,B),tt===5&&Y.write(),rt(C,F),yt&&(tt===5&&R.write(),q(C,yt.topic),rt(C,yt.payload)),W!=null&&rt(C,W),at!=null&&rt(C,at),!0}function w(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=dt===5?nt.reasonCode:nt.returnCode,yt=nt.properties,pt=2;if(typeof tt!="number")return C.destroy(new Error("Invalid return code")),!1;let B=null;if(dt===5){if(B=_t(C,yt),!B)return!1;pt+=B.length}return C.write(i.CONNACK_HEADER),J(C,pt),C.write(nt.sessionPresent?i.SESSIONPRESENT_HEADER:r),C.write(n.from([tt])),B==null||B.write(),!0}function O(D,C,G){l("publish: packet: %o",D);let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.qos||0,yt=nt.retain?i.RETAIN_MASK:0,pt=nt.topic,B=nt.payload||o,F=nt.messageId,W=nt.properties,at=0;if(typeof pt=="string")at+=n.byteLength(pt)+2;else if(n.isBuffer(pt))at+=pt.length+2;else return C.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(B)?at+=B.length:at+=n.byteLength(B),tt&&typeof F!="number")return C.destroy(new Error("Invalid messageId")),!1;tt&&(at+=2);let Z=null;if(dt===5){if(Z=_t(C,W),!Z)return!1;at+=Z.length}return C.write(i.PUBLISH_HEADER[tt][nt.dup?1:0][yt?1:0]),J(C,at),b(C,wt(pt)),C.write(pt),tt>0&&b(C,F),Z==null||Z.write(),l("publish: payload: %o",B),C.write(B)}function P(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.cmd||"puback",yt=nt.messageId,pt=nt.dup&&tt==="pubrel"?i.DUP_MASK:0,B=0,F=nt.reasonCode,W=nt.properties,at=dt===5?3:2;if(tt==="pubrel"&&(B=1),typeof yt!="number")return C.destroy(new Error("Invalid messageId")),!1;let Z=null;if(dt===5&&typeof W=="object"){if(Z=v(C,W,G,at),!Z)return!1;at+=Z.length}return C.write(i.ACKS[tt][B][pt][0]),at===3&&(at+=F!==0?1:-1),J(C,at),b(C,yt),dt===5&&at!==2&&C.write(n.from([F])),Z!==null?Z.write():at===4&&C.write(n.from([0])),!0}function k(D,C,G){l("subscribe: packet: ");let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.dup?i.DUP_MASK:0,yt=nt.messageId,pt=nt.subscriptions,B=nt.properties,F=0;if(typeof yt!="number")return C.destroy(new Error("Invalid messageId")),!1;F+=2;let W=null;if(dt===5){if(W=_t(C,B),!W)return!1;F+=W.length}if(typeof pt=="object"&&pt.length)for(let Z=0;Z<pt.length;Z+=1){let j=pt[Z].topic,Y=pt[Z].qos;if(typeof j!="string")return C.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof Y!="number")return C.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(dt===5){if(typeof(pt[Z].nl||!1)!="boolean")return C.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(pt[Z].rap||!1)!="boolean")return C.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let R=pt[Z].rh||0;if(typeof R!="number"||R>2)return C.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}F+=n.byteLength(j)+2+1}else return C.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",i.SUBSCRIBE_HEADER),C.write(i.SUBSCRIBE_HEADER[1][tt?1:0][0]),J(C,F),b(C,yt),W!==null&&W.write();let at=!0;for(let Z of pt){let j=Z.topic,Y=Z.qos,R=+Z.nl,U=+Z.rap,V=Z.rh,ht;q(C,j),ht=i.SUBSCRIBE_OPTIONS_QOS[Y],dt===5&&(ht|=R?i.SUBSCRIBE_OPTIONS_NL:0,ht|=U?i.SUBSCRIBE_OPTIONS_RAP:0,ht|=V?i.SUBSCRIBE_OPTIONS_RH[V]:0),at=C.write(n.from([ht]))}return at}function T(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.messageId,yt=nt.granted,pt=nt.properties,B=0;if(typeof tt!="number")return C.destroy(new Error("Invalid messageId")),!1;if(B+=2,typeof yt=="object"&&yt.length)for(let W=0;W<yt.length;W+=1){if(typeof yt[W]!="number")return C.destroy(new Error("Invalid qos vector")),!1;B+=1}else return C.destroy(new Error("Invalid qos vector")),!1;let F=null;if(dt===5){if(F=v(C,pt,G,B),!F)return!1;B+=F.length}return C.write(i.SUBACK_HEADER),J(C,B),b(C,tt),F!==null&&F.write(),C.write(n.from(yt))}function I(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.messageId,yt=nt.dup?i.DUP_MASK:0,pt=nt.unsubscriptions,B=nt.properties,F=0;if(typeof tt!="number")return C.destroy(new Error("Invalid messageId")),!1;if(F+=2,typeof pt=="object"&&pt.length)for(let Z=0;Z<pt.length;Z+=1){if(typeof pt[Z]!="string")return C.destroy(new Error("Invalid unsubscriptions")),!1;F+=n.byteLength(pt[Z])+2}else return C.destroy(new Error("Invalid unsubscriptions")),!1;let W=null;if(dt===5){if(W=_t(C,B),!W)return!1;F+=W.length}C.write(i.UNSUBSCRIBE_HEADER[1][yt?1:0][0]),J(C,F),b(C,tt),W!==null&&W.write();let at=!0;for(let Z=0;Z<pt.length;Z++)at=q(C,pt[Z]);return at}function N(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.messageId,yt=nt.dup?i.DUP_MASK:0,pt=nt.granted,B=nt.properties,F=nt.cmd,W=0,at=2;if(typeof tt!="number")return C.destroy(new Error("Invalid messageId")),!1;if(dt===5)if(typeof pt=="object"&&pt.length)for(let j=0;j<pt.length;j+=1){if(typeof pt[j]!="number")return C.destroy(new Error("Invalid qos vector")),!1;at+=1}else return C.destroy(new Error("Invalid qos vector")),!1;let Z=null;if(dt===5){if(Z=v(C,B,G,at),!Z)return!1;at+=Z.length}return C.write(i.ACKS[F][W][yt][0]),J(C,at),b(C,tt),Z!==null&&Z.write(),dt===5&&C.write(n.from(pt)),!0}function K(D,C,G){return C.write(i.EMPTY[D.cmd])}function Q(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.reasonCode,yt=nt.properties,pt=dt===5?1:0,B=null;if(dt===5){if(B=v(C,yt,G,pt),!B)return!1;pt+=B.length}return C.write(n.from([i.codes.disconnect<<4])),J(C,pt),dt===5&&C.write(n.from([tt])),B!==null&&B.write(),!0}function A(D,C,G){let dt=G?G.protocolVersion:4,nt=D||{},tt=nt.reasonCode,yt=nt.properties,pt=dt===5?1:0;dt!==5&&C.destroy(new Error("Invalid mqtt version for auth packet"));let B=v(C,yt,G,pt);return B?(pt+=B.length,C.write(n.from([i.codes.auth<<4])),J(C,pt),C.write(n.from([tt])),B!==null&&B.write(),!0):!1}var H={};function J(D,C){if(C>i.VARBYTEINT_MAX)return D.destroy(new Error(`Invalid variable byte integer: ${C}`)),!1;let G=H[C];return G||(G=d(C),C<16384&&(H[C]=G)),l("writeVarByteInt: writing to stream: %o",G),D.write(G)}function q(D,C){let G=n.byteLength(C);return b(D,G),l("writeString: %s",C),D.write(C,"utf8")}function st(D,C,G){q(D,C),q(D,G)}function et(D,C){return l("writeNumberCached: number: %d",C),l("writeNumberCached: %o",h[C]),D.write(h[C])}function $(D,C){let G=c(C);return l("writeNumberGenerated: %o",G),D.write(G)}function mt(D,C){let G=g(C);return l("write4ByteNumber: %o",G),D.write(G)}function rt(D,C){typeof C=="string"?q(D,C):C?(b(D,C.length),D.write(C)):b(D,0)}function _t(D,C){if(typeof C!="object"||C.length!=null)return{length:1,write(){lt(D,{},0)}};let G=0;function dt(nt,tt){let yt=i.propertiesTypes[nt],pt=0;switch(yt){case"byte":{if(typeof tt!="boolean")return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=2;break}case"int8":{if(typeof tt!="number"||tt<0||tt>255)return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=2;break}case"binary":{if(tt&&tt===null)return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=1+n.byteLength(tt)+2;break}case"int16":{if(typeof tt!="number"||tt<0||tt>65535)return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=3;break}case"int32":{if(typeof tt!="number"||tt<0||tt>4294967295)return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=5;break}case"var":{if(typeof tt!="number"||tt<0||tt>268435455)return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=1+n.byteLength(d(tt));break}case"string":{if(typeof tt!="string")return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=3+n.byteLength(tt.toString());break}case"pair":{if(typeof tt!="object")return D.destroy(new Error(`Invalid ${nt}: ${tt}`)),!1;pt+=Object.getOwnPropertyNames(tt).reduce((B,F)=>{let W=tt[F];return Array.isArray(W)?B+=W.reduce((at,Z)=>(at+=3+n.byteLength(F.toString())+2+n.byteLength(Z.toString()),at),0):B+=3+n.byteLength(F.toString())+2+n.byteLength(tt[F].toString()),B},0);break}default:return D.destroy(new Error(`Invalid property ${nt}: ${tt}`)),!1}return pt}if(C)for(let nt in C){let tt=0,yt=0,pt=C[nt];if(Array.isArray(pt))for(let B=0;B<pt.length;B++){if(yt=dt(nt,pt[B]),!yt)return!1;tt+=yt}else{if(yt=dt(nt,pt),!yt)return!1;tt=yt}if(!tt)return!1;G+=tt}return{length:n.byteLength(d(G))+G,write(){lt(D,C,G)}}}function v(D,C,G,dt){let nt=["reasonString","userProperties"],tt=G&&G.properties&&G.properties.maximumPacketSize?G.properties.maximumPacketSize:0,yt=_t(D,C);if(tt)for(;dt+yt.length>tt;){let pt=nt.shift();if(pt&&C[pt])delete C[pt],yt=_t(D,C);else return!1}return yt}function X(D,C,G){switch(i.propertiesTypes[C]){case"byte":{D.write(n.from([i.properties[C]])),D.write(n.from([+G]));break}case"int8":{D.write(n.from([i.properties[C]])),D.write(n.from([G]));break}case"binary":{D.write(n.from([i.properties[C]])),rt(D,G);break}case"int16":{D.write(n.from([i.properties[C]])),b(D,G);break}case"int32":{D.write(n.from([i.properties[C]])),mt(D,G);break}case"var":{D.write(n.from([i.properties[C]])),J(D,G);break}case"string":{D.write(n.from([i.properties[C]])),q(D,G);break}case"pair":{Object.getOwnPropertyNames(G).forEach(dt=>{let nt=G[dt];Array.isArray(nt)?nt.forEach(tt=>{D.write(n.from([i.properties[C]])),st(D,dt.toString(),tt.toString())}):(D.write(n.from([i.properties[C]])),st(D,dt.toString(),nt.toString()))});break}default:return D.destroy(new Error(`Invalid property ${C} value: ${G}`)),!1}}function lt(D,C,G){J(D,G);for(let dt in C)if(Object.prototype.hasOwnProperty.call(C,dt)&&C[dt]!==null){let nt=C[dt];if(Array.isArray(nt))for(let tt=0;tt<nt.length;tt++)X(D,dt,nt[tt]);else X(D,dt,nt)}}function wt(D){return D?D instanceof n?D.length:n.byteLength(D):0}function ot(D){return typeof D=="string"||D instanceof n}t.exports=_}),Jf=bt((e,t)=>{ct(),ft(),ut();var i=lc(),{EventEmitter:n}=(Yi(),Nt(Bi)),{Buffer:o}=(ne(),Nt(ie));function r(a,l){let h=new s;return i(a,h,l),h.concat()}var s=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0,l=new Array(this._array.length),h=this._array,c=0,u;for(u=0;u<h.length&&h[u]!==void 0;u++)typeof h[u]!="string"?l[u]=h[u].length:l[u]=o.byteLength(h[u]),a+=l[u];let d=o.allocUnsafe(a);for(u=0;u<h.length&&h[u]!==void 0;u++)typeof h[u]!="string"?(h[u].copy(d,c),c+=l[u]):(d.write(h[u],c),c+=l[u]);return d}destroy(a){a&&this.emit("error",a)}};t.exports=r}),Zf=bt(e=>{ct(),ft(),ut(),e.parser=Gf().parser,e.generate=Jf(),e.writeToStream=lc()}),hc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let i=this.nextId++;return this.nextId===65536&&(this.nextId=1),i}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(i){return!0}deallocate(i){}clear(){}};e.default=t}),td=bt((e,t)=>{ct(),ft(),ut(),t.exports=n;function i(r){return r instanceof cr?cr.from(r):new r.constructor(r.buffer.slice(),r.byteOffset,r.length)}function n(r){if(r=r||{},r.circles)return o(r);return r.proto?l:a;function s(h,c){for(var u=Object.keys(h),d=new Array(u.length),g=0;g<u.length;g++){var b=u[g],y=h[b];typeof y!="object"||y===null?d[b]=y:y instanceof Date?d[b]=new Date(y):ArrayBuffer.isView(y)?d[b]=i(y):d[b]=c(y)}return d}function a(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return s(h,a);if(h instanceof Map)return new Map(s(Array.from(h),a));if(h instanceof Set)return new Set(s(Array.from(h),a));var c={};for(var u in h)if(Object.hasOwnProperty.call(h,u)!==!1){var d=h[u];typeof d!="object"||d===null?c[u]=d:d instanceof Date?c[u]=new Date(d):d instanceof Map?c[u]=new Map(s(Array.from(d),a)):d instanceof Set?c[u]=new Set(s(Array.from(d),a)):ArrayBuffer.isView(d)?c[u]=i(d):c[u]=a(d)}return c}function l(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return s(h,l);if(h instanceof Map)return new Map(s(Array.from(h),l));if(h instanceof Set)return new Set(s(Array.from(h),l));var c={};for(var u in h){var d=h[u];typeof d!="object"||d===null?c[u]=d:d instanceof Date?c[u]=new Date(d):d instanceof Map?c[u]=new Map(s(Array.from(d),l)):d instanceof Set?c[u]=new Set(s(Array.from(d),l)):ArrayBuffer.isView(d)?c[u]=i(d):c[u]=l(d)}return c}}function o(r){var s=[],a=[];return r.proto?c:h;function l(u,d){for(var g=Object.keys(u),b=new Array(g.length),y=0;y<g.length;y++){var _=g[y],E=u[_];if(typeof E!="object"||E===null)b[_]=E;else if(E instanceof Date)b[_]=new Date(E);else if(ArrayBuffer.isView(E))b[_]=i(E);else{var x=s.indexOf(E);x!==-1?b[_]=a[x]:b[_]=d(E)}}return b}function h(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u,h);if(u instanceof Map)return new Map(l(Array.from(u),h));if(u instanceof Set)return new Set(l(Array.from(u),h));var d={};s.push(u),a.push(d);for(var g in u)if(Object.hasOwnProperty.call(u,g)!==!1){var b=u[g];if(typeof b!="object"||b===null)d[g]=b;else if(b instanceof Date)d[g]=new Date(b);else if(b instanceof Map)d[g]=new Map(l(Array.from(b),h));else if(b instanceof Set)d[g]=new Set(l(Array.from(b),h));else if(ArrayBuffer.isView(b))d[g]=i(b);else{var y=s.indexOf(b);y!==-1?d[g]=a[y]:d[g]=h(b)}}return s.pop(),a.pop(),d}function c(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u,c);if(u instanceof Map)return new Map(l(Array.from(u),c));if(u instanceof Set)return new Set(l(Array.from(u),c));var d={};s.push(u),a.push(d);for(var g in u){var b=u[g];if(typeof b!="object"||b===null)d[g]=b;else if(b instanceof Date)d[g]=new Date(b);else if(b instanceof Map)d[g]=new Map(l(Array.from(b),c));else if(b instanceof Set)d[g]=new Set(l(Array.from(b),c));else if(ArrayBuffer.isView(b))d[g]=i(b);else{var y=s.indexOf(b);y!==-1?d[g]=a[y]:d[g]=c(b)}}return s.pop(),a.pop(),d}}}),ed=bt((e,t)=>{ct(),ft(),ut(),t.exports=td()()}),id=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function t(n){let o=n.split("/");for(let r=0;r<o.length;r++)if(o[r]!=="+"){if(o[r]==="#")return r===o.length-1;if(o[r].indexOf("+")!==-1||o[r].indexOf("#")!==-1)return!1}return!0}e.validateTopic=t;function i(n){if(n.length===0)return"empty_topic_list";for(let o=0;o<n.length;o++)if(!t(n[o]))return n[o];return null}e.validateTopics=i}),cc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=Li(),i={objectMode:!0},n={clean:!0},o=class{constructor(r){this.options=r||{},this.options=Object.assign(Object.assign({},n),r),this._inflights=new Map}put(r,s){return this._inflights.set(r.messageId,r),s&&s(),this}createStream(){let r=new t.Readable(i),s=[],a=!1,l=0;return this._inflights.forEach((h,c)=>{s.push(h)}),r._read=()=>{!a&&l<s.length?r.push(s[l++]):r.push(null)},r.destroy=h=>{if(!a)return a=!0,setTimeout(()=>{r.emit("close")},0),r},r}del(r,s){let a=this._inflights.get(r.messageId);return a?(this._inflights.delete(r.messageId),s(null,a)):s&&s(new Error("missing packet")),this}get(r,s){let a=this._inflights.get(r.messageId);return a?s(null,a):s&&s(new Error("missing packet")),this}close(r){this.options.clean&&(this._inflights=null),r&&r()}};e.default=o}),nd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153],i=(n,o,r)=>{n.log("handlePublish: packet %o",o),r=typeof r<"u"?r:n.noop;let s=o.topic.toString(),a=o.payload,{qos:l}=o,{messageId:h}=o,{options:c}=n;if(n.options.protocolVersion===5){let u;if(o.properties&&(u=o.properties.topicAlias),typeof u<"u")if(s.length===0)if(u>0&&u<=65535){let d=n.topicAliasRecv.getTopicByAlias(u);if(d)s=d,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,u);else{n.log("handlePublish :: unregistered topic alias. alias: %d",u),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",u),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(s,u))n.log("handlePublish :: registered topic: %s - alias: %d",s,u);else{n.log("handlePublish :: topic alias out of range. alias: %d",u),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",l),l){case 2:{c.customHandleAcks(s,a,o,(u,d)=>{if(typeof u=="number"&&(d=u,u=null),u)return n.emit("error",u);if(t.indexOf(d)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));d?n._sendPacket({cmd:"pubrec",messageId:h,reasonCode:d},r):n.incomingStore.put(o,()=>{n._sendPacket({cmd:"pubrec",messageId:h},r)})});break}case 1:{c.customHandleAcks(s,a,o,(u,d)=>{if(typeof u=="number"&&(d=u,u=null),u)return n.emit("error",u);if(t.indexOf(d)===-1)return n.emit("error",new Error("Wrong reason code for puback"));d||n.emit("message",s,a,o),n.handleMessage(o,g=>{if(g)return r&&r(g);n._sendPacket({cmd:"puback",messageId:h,reasonCode:d},r)})});break}case 0:n.emit("message",s,a,o),n.handleMessage(o,r);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=i}),rd=bt((e,t)=>{t.exports={version:"5.10.3"}}),Ki=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var t=class uc extends Error{constructor(o,r){super(o),this.code=r,Object.setPrototypeOf(this,uc.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t;function i(n,o,r=!1){var s;let a=[o];for(;;){let l=a[0],h=Object.getPrototypeOf(l);if(h!=null&&h.prototype)a.unshift(h);else break}for(let l of a)for(let h of Object.getOwnPropertyNames(l.prototype))(r||h!=="constructor")&&Object.defineProperty(n.prototype,h,(s=Object.getOwnPropertyDescriptor(l.prototype,h))!==null&&s!==void 0?s:Object.create(null))}e.applyMixin=i,e.nextTick=typeof(Rt==null?void 0:Rt.nextTick)=="function"?Rt.nextTick:n=>{setTimeout(n,0)},e.MQTTJS_VERSION=rd().version}),Ir=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var t=Ki();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var i=(n,o)=>{let{messageId:r}=o,s=o.cmd,a=null,l=n.outgoing[r]?n.outgoing[r].cb:null,h=null;if(!l){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",s),s){case"pubcomp":case"puback":{let c=o.reasonCode;c&&c>0&&c!==16?(h=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),n._removeOutgoingAndStoreMessage(r,()=>{l(h,o)})):n._removeOutgoingAndStoreMessage(r,l);break}case"pubrec":{a={cmd:"pubrel",qos:2,messageId:r};let c=o.reasonCode;c&&c>0&&c!==16?(h=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),n._removeOutgoingAndStoreMessage(r,()=>{l(h,o)})):n._sendPacket(a);break}case"suback":{delete n.outgoing[r],n.messageIdProvider.deallocate(r);let c=o.granted;for(let u=0;u<c.length;u++){let d=c[u];if(d&128){h=new Error(`Subscribe error: ${e.ReasonCodes[d]}`),h.code=d;let g=n.messageIdToTopic[r];g&&g.forEach(b=>{delete n._resubscribeTopics[b]})}}delete n.messageIdToTopic[r],n._invokeStoreProcessingQueue(),l(h,o);break}case"unsuback":{delete n.outgoing[r],n.messageIdProvider.deallocate(r),n._invokeStoreProcessingQueue(),l(null,o);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};e.default=i}),sd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ki(),i=Ir(),n=(o,r)=>{let{options:s}=o,a=s.protocolVersion,l=a===5?r.reasonCode:r.returnCode;if(a!==5){let h=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${a}`,l);o.emit("error",h);return}o.handleAuth(r,(h,c)=>{if(h){o.emit("error",h);return}if(l===24)o.reconnecting=!1,o._sendPacket(c);else{let u=new t.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[l]}`,l);o.emit("error",u)}})};e.default=n}),od=bt(e=>{var g,b,y,_,E,x,w,O,P,k,T,I,N,K,Q,A,H,J,q,st,et,$,mt,rt,_t,v,bo,lt,wt,ot,D,fc,G,dt,nt,ii,ni,yo,er,ir,Ft,_o,ln,j;ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,i=new Set,n=typeof Rt=="object"&&Rt?Rt:{},o=(Y,R,U,V)=>{typeof n.emitWarning=="function"?n.emitWarning(Y,R,U,V):console.error(`[${U}] ${R}: ${Y}`)},r=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof r>"u"){s=class{constructor(){vt(this,"onabort");vt(this,"_onabort",[]);vt(this,"reason");vt(this,"aborted",!1)}addEventListener(U,V){this._onabort.push(V)}},r=class{constructor(){vt(this,"signal",new s);R()}abort(U){var V,ht;if(!this.signal.aborted){this.signal.reason=U,this.signal.aborted=!0;for(let p of this.signal._onabort)p(U);(ht=(V=this.signal).onabort)==null||ht.call(V,U)}}};let Y=((g=n.env)==null?void 0:g.LRU_CACHE_IGNORE_AC_WARNING)!=="1",R=()=>{Y&&(Y=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",R))}}var a=Y=>!i.has(Y),l=Y=>Y&&Y===Math.floor(Y)&&Y>0&&isFinite(Y),h=Y=>l(Y)?Y<=Math.pow(2,8)?Uint8Array:Y<=Math.pow(2,16)?Uint16Array:Y<=Math.pow(2,32)?Uint32Array:Y<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(Y){super(Y),this.fill(0)}},u=(b=class{constructor(R,U){vt(this,"heap");vt(this,"length");if(!L(b,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new U(R),this.length=0}static create(R){let U=h(R);if(!U)return[];Et(b,y,!0);let V=new b(R,U);return Et(b,y,!1),V}push(R){this.heap[this.length++]=R}pop(){return this.heap[--this.length]}},y=new WeakMap,Pt(b,y,!1),b),d=(j=class{constructor(R){Pt(this,v);Pt(this,_);Pt(this,E);Pt(this,x);Pt(this,w);Pt(this,O);vt(this,"ttl");vt(this,"ttlResolution");vt(this,"ttlAutopurge");vt(this,"updateAgeOnGet");vt(this,"updateAgeOnHas");vt(this,"allowStale");vt(this,"noDisposeOnSet");vt(this,"noUpdateTTL");vt(this,"maxEntrySize");vt(this,"sizeCalculation");vt(this,"noDeleteOnFetchRejection");vt(this,"noDeleteOnStaleGet");vt(this,"allowStaleOnFetchAbort");vt(this,"allowStaleOnFetchRejection");vt(this,"ignoreFetchAbort");Pt(this,P);Pt(this,k);Pt(this,T);Pt(this,I);Pt(this,N);Pt(this,K);Pt(this,Q);Pt(this,A);Pt(this,H);Pt(this,J);Pt(this,q);Pt(this,st);Pt(this,et);Pt(this,$);Pt(this,mt);Pt(this,rt);Pt(this,_t);Pt(this,lt,()=>{});Pt(this,wt,()=>{});Pt(this,ot,()=>{});Pt(this,D,()=>!1);Pt(this,G,R=>{});Pt(this,dt,(R,U,V)=>{});Pt(this,nt,(R,U,V,ht)=>{if(V||ht)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:U=0,ttl:V,ttlResolution:ht=1,ttlAutopurge:p,updateAgeOnGet:f,updateAgeOnHas:m,allowStale:S,dispose:M,disposeAfter:z,noDisposeOnSet:it,noUpdateTTL:kt,maxSize:It=0,maxEntrySize:Ct=0,sizeCalculation:xt,fetchMethod:Tt,noDeleteOnFetchRejection:At,noDeleteOnStaleGet:jt,allowStaleOnFetchRejection:Gt,allowStaleOnFetchAbort:Vt,ignoreFetchAbort:te}=R;if(U!==0&&!l(U))throw new TypeError("max option must be a nonnegative integer");let ae=U?h(U):Array;if(!ae)throw new Error("invalid max value: "+U);if(Et(this,_,U),Et(this,E,It),this.maxEntrySize=Ct||L(this,E),this.sizeCalculation=xt,this.sizeCalculation){if(!L(this,E)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Tt!==void 0&&typeof Tt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Et(this,O,Tt),Et(this,rt,!!Tt),Et(this,T,new Map),Et(this,I,new Array(U).fill(void 0)),Et(this,N,new Array(U).fill(void 0)),Et(this,K,new ae(U)),Et(this,Q,new ae(U)),Et(this,A,0),Et(this,H,0),Et(this,J,u.create(U)),Et(this,P,0),Et(this,k,0),typeof M=="function"&&Et(this,x,M),typeof z=="function"?(Et(this,w,z),Et(this,q,[])):(Et(this,w,void 0),Et(this,q,void 0)),Et(this,mt,!!L(this,x)),Et(this,_t,!!L(this,w)),this.noDisposeOnSet=!!it,this.noUpdateTTL=!!kt,this.noDeleteOnFetchRejection=!!At,this.allowStaleOnFetchRejection=!!Gt,this.allowStaleOnFetchAbort=!!Vt,this.ignoreFetchAbort=!!te,this.maxEntrySize!==0){if(L(this,E)!==0&&!l(L(this,E)))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");St(this,v,fc).call(this)}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!jt,this.updateAgeOnGet=!!f,this.updateAgeOnHas=!!m,this.ttlResolution=l(ht)||ht===0?ht:1,this.ttlAutopurge=!!p,this.ttl=V||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");St(this,v,bo).call(this)}if(L(this,_)===0&&this.ttl===0&&L(this,E)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!L(this,_)&&!L(this,E)){let Qt="LRU_CACHE_UNBOUNDED";a(Qt)&&(i.add(Qt),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Qt,j))}}static unsafeExposeInternals(R){return{starts:L(R,et),ttls:L(R,$),sizes:L(R,st),keyMap:L(R,T),keyList:L(R,I),valList:L(R,N),next:L(R,K),prev:L(R,Q),get head(){return L(R,A)},get tail(){return L(R,H)},free:L(R,J),isBackgroundFetch:U=>{var V;return St(V=R,v,Ft).call(V,U)},backgroundFetch:(U,V,ht,p)=>{var f;return St(f=R,v,ir).call(f,U,V,ht,p)},moveToTail:U=>{var V;return St(V=R,v,ln).call(V,U)},indexes:U=>{var V;return St(V=R,v,ii).call(V,U)},rindexes:U=>{var V;return St(V=R,v,ni).call(V,U)},isStale:U=>{var V;return L(V=R,D).call(V,U)}}}get max(){return L(this,_)}get maxSize(){return L(this,E)}get calculatedSize(){return L(this,k)}get size(){return L(this,P)}get fetchMethod(){return L(this,O)}get dispose(){return L(this,x)}get disposeAfter(){return L(this,w)}getRemainingTTL(R){return L(this,T).has(R)?1/0:0}*entries(){for(let R of St(this,v,ii).call(this))L(this,N)[R]!==void 0&&L(this,I)[R]!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield[L(this,I)[R],L(this,N)[R]])}*rentries(){for(let R of St(this,v,ni).call(this))L(this,N)[R]!==void 0&&L(this,I)[R]!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield[L(this,I)[R],L(this,N)[R]])}*keys(){for(let R of St(this,v,ii).call(this)){let U=L(this,I)[R];U!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield U)}}*rkeys(){for(let R of St(this,v,ni).call(this)){let U=L(this,I)[R];U!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield U)}}*values(){for(let R of St(this,v,ii).call(this))L(this,N)[R]!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield L(this,N)[R])}*rvalues(){for(let R of St(this,v,ni).call(this))L(this,N)[R]!==void 0&&!St(this,v,Ft).call(this,L(this,N)[R])&&(yield L(this,N)[R])}[Symbol.iterator](){return this.entries()}find(R,U={}){for(let V of St(this,v,ii).call(this)){let ht=L(this,N)[V],p=St(this,v,Ft).call(this,ht)?ht.__staleWhileFetching:ht;if(p!==void 0&&R(p,L(this,I)[V],this))return this.get(L(this,I)[V],U)}}forEach(R,U=this){for(let V of St(this,v,ii).call(this)){let ht=L(this,N)[V],p=St(this,v,Ft).call(this,ht)?ht.__staleWhileFetching:ht;p!==void 0&&R.call(U,p,L(this,I)[V],this)}}rforEach(R,U=this){for(let V of St(this,v,ni).call(this)){let ht=L(this,N)[V],p=St(this,v,Ft).call(this,ht)?ht.__staleWhileFetching:ht;p!==void 0&&R.call(U,p,L(this,I)[V],this)}}purgeStale(){let R=!1;for(let U of St(this,v,ni).call(this,{allowStale:!0}))L(this,D).call(this,U)&&(this.delete(L(this,I)[U]),R=!0);return R}dump(){let R=[];for(let U of St(this,v,ii).call(this,{allowStale:!0})){let V=L(this,I)[U],ht=L(this,N)[U],p=St(this,v,Ft).call(this,ht)?ht.__staleWhileFetching:ht;if(p===void 0||V===void 0)continue;let f={value:p};if(L(this,$)&&L(this,et)){f.ttl=L(this,$)[U];let m=t.now()-L(this,et)[U];f.start=Math.floor(Date.now()-m)}L(this,st)&&(f.size=L(this,st)[U]),R.unshift([V,f])}return R}load(R){this.clear();for(let[U,V]of R){if(V.start){let ht=Date.now()-V.start;V.start=t.now()-ht}this.set(U,V.value,V)}}set(R,U,V={}){var kt,It,Ct,xt,Tt;if(U===void 0)return this.delete(R),this;let{ttl:ht=this.ttl,start:p,noDisposeOnSet:f=this.noDisposeOnSet,sizeCalculation:m=this.sizeCalculation,status:S}=V,{noUpdateTTL:M=this.noUpdateTTL}=V,z=L(this,nt).call(this,R,U,V.size||0,m);if(this.maxEntrySize&&z>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.delete(R),this;let it=L(this,P)===0?void 0:L(this,T).get(R);if(it===void 0)it=L(this,P)===0?L(this,H):L(this,J).length!==0?L(this,J).pop():L(this,P)===L(this,_)?St(this,v,er).call(this,!1):L(this,P),L(this,I)[it]=R,L(this,N)[it]=U,L(this,T).set(R,it),L(this,K)[L(this,H)]=it,L(this,Q)[it]=L(this,H),Et(this,H,it),In(this,P)._++,L(this,dt).call(this,it,z,S),S&&(S.set="add"),M=!1;else{St(this,v,ln).call(this,it);let At=L(this,N)[it];if(U!==At){if(L(this,rt)&&St(this,v,Ft).call(this,At)){At.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:jt}=At;jt!==void 0&&!f&&(L(this,mt)&&((kt=L(this,x))==null||kt.call(this,jt,R,"set")),L(this,_t)&&((It=L(this,q))==null||It.push([jt,R,"set"])))}else f||(L(this,mt)&&((Ct=L(this,x))==null||Ct.call(this,At,R,"set")),L(this,_t)&&((xt=L(this,q))==null||xt.push([At,R,"set"])));if(L(this,G).call(this,it),L(this,dt).call(this,it,z,S),L(this,N)[it]=U,S){S.set="replace";let jt=At&&St(this,v,Ft).call(this,At)?At.__staleWhileFetching:At;jt!==void 0&&(S.oldValue=jt)}}else S&&(S.set="update")}if(ht!==0&&!L(this,$)&&St(this,v,bo).call(this),L(this,$)&&(M||L(this,ot).call(this,it,ht,p),S&&L(this,wt).call(this,S,it)),!f&&L(this,_t)&&L(this,q)){let At=L(this,q),jt;for(;jt=At==null?void 0:At.shift();)(Tt=L(this,w))==null||Tt.call(this,...jt)}return this}pop(){var R;try{for(;L(this,P);){let U=L(this,N)[L(this,A)];if(St(this,v,er).call(this,!0),St(this,v,Ft).call(this,U)){if(U.__staleWhileFetching)return U.__staleWhileFetching}else if(U!==void 0)return U}}finally{if(L(this,_t)&&L(this,q)){let U=L(this,q),V;for(;V=U==null?void 0:U.shift();)(R=L(this,w))==null||R.call(this,...V)}}}has(R,U={}){let{updateAgeOnHas:V=this.updateAgeOnHas,status:ht}=U,p=L(this,T).get(R);if(p!==void 0){let f=L(this,N)[p];if(St(this,v,Ft).call(this,f)&&f.__staleWhileFetching===void 0)return!1;if(L(this,D).call(this,p))ht&&(ht.has="stale",L(this,wt).call(this,ht,p));else return V&&L(this,lt).call(this,p),ht&&(ht.has="hit",L(this,wt).call(this,ht,p)),!0}else ht&&(ht.has="miss");return!1}peek(R,U={}){let{allowStale:V=this.allowStale}=U,ht=L(this,T).get(R);if(ht!==void 0&&(V||!L(this,D).call(this,ht))){let p=L(this,N)[ht];return St(this,v,Ft).call(this,p)?p.__staleWhileFetching:p}}async fetch(R,U={}){let{allowStale:V=this.allowStale,updateAgeOnGet:ht=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,ttl:f=this.ttl,noDisposeOnSet:m=this.noDisposeOnSet,size:S=0,sizeCalculation:M=this.sizeCalculation,noUpdateTTL:z=this.noUpdateTTL,noDeleteOnFetchRejection:it=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:kt=this.allowStaleOnFetchRejection,ignoreFetchAbort:It=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ct=this.allowStaleOnFetchAbort,context:xt,forceRefresh:Tt=!1,status:At,signal:jt}=U;if(!L(this,rt))return At&&(At.fetch="get"),this.get(R,{allowStale:V,updateAgeOnGet:ht,noDeleteOnStaleGet:p,status:At});let Gt={allowStale:V,updateAgeOnGet:ht,noDeleteOnStaleGet:p,ttl:f,noDisposeOnSet:m,size:S,sizeCalculation:M,noUpdateTTL:z,noDeleteOnFetchRejection:it,allowStaleOnFetchRejection:kt,allowStaleOnFetchAbort:Ct,ignoreFetchAbort:It,status:At,signal:jt},Vt=L(this,T).get(R);if(Vt===void 0){At&&(At.fetch="miss");let te=St(this,v,ir).call(this,R,Vt,Gt,xt);return te.__returned=te}else{let te=L(this,N)[Vt];if(St(this,v,Ft).call(this,te)){let ba=V&&te.__staleWhileFetching!==void 0;return At&&(At.fetch="inflight",ba&&(At.returnedStale=!0)),ba?te.__staleWhileFetching:te.__returned=te}let ae=L(this,D).call(this,Vt);if(!Tt&&!ae)return At&&(At.fetch="hit"),St(this,v,ln).call(this,Vt),ht&&L(this,lt).call(this,Vt),At&&L(this,wt).call(this,At,Vt),te;let Qt=St(this,v,ir).call(this,R,Vt,Gt,xt),ma=Qt.__staleWhileFetching!==void 0&&V;return At&&(At.fetch=ae?"stale":"refresh",ma&&ae&&(At.returnedStale=!0)),ma?Qt.__staleWhileFetching:Qt.__returned=Qt}}get(R,U={}){let{allowStale:V=this.allowStale,updateAgeOnGet:ht=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,status:f}=U,m=L(this,T).get(R);if(m!==void 0){let S=L(this,N)[m],M=St(this,v,Ft).call(this,S);return f&&L(this,wt).call(this,f,m),L(this,D).call(this,m)?(f&&(f.get="stale"),M?(f&&V&&S.__staleWhileFetching!==void 0&&(f.returnedStale=!0),V?S.__staleWhileFetching:void 0):(p||this.delete(R),f&&V&&(f.returnedStale=!0),V?S:void 0)):(f&&(f.get="hit"),M?S.__staleWhileFetching:(St(this,v,ln).call(this,m),ht&&L(this,lt).call(this,m),S))}else f&&(f.get="miss")}delete(R){var V,ht,p,f;let U=!1;if(L(this,P)!==0){let m=L(this,T).get(R);if(m!==void 0)if(U=!0,L(this,P)===1)this.clear();else{L(this,G).call(this,m);let S=L(this,N)[m];St(this,v,Ft).call(this,S)?S.__abortController.abort(new Error("deleted")):(L(this,mt)||L(this,_t))&&(L(this,mt)&&((V=L(this,x))==null||V.call(this,S,R,"delete")),L(this,_t)&&((ht=L(this,q))==null||ht.push([S,R,"delete"]))),L(this,T).delete(R),L(this,I)[m]=void 0,L(this,N)[m]=void 0,m===L(this,H)?Et(this,H,L(this,Q)[m]):m===L(this,A)?Et(this,A,L(this,K)[m]):(L(this,K)[L(this,Q)[m]]=L(this,K)[m],L(this,Q)[L(this,K)[m]]=L(this,Q)[m]),In(this,P)._--,L(this,J).push(m)}}if(L(this,_t)&&((p=L(this,q))!=null&&p.length)){let m=L(this,q),S;for(;S=m==null?void 0:m.shift();)(f=L(this,w))==null||f.call(this,...S)}return U}clear(){var R,U,V;for(let ht of St(this,v,ni).call(this,{allowStale:!0})){let p=L(this,N)[ht];if(St(this,v,Ft).call(this,p))p.__abortController.abort(new Error("deleted"));else{let f=L(this,I)[ht];L(this,mt)&&((R=L(this,x))==null||R.call(this,p,f,"delete")),L(this,_t)&&((U=L(this,q))==null||U.push([p,f,"delete"]))}}if(L(this,T).clear(),L(this,N).fill(void 0),L(this,I).fill(void 0),L(this,$)&&L(this,et)&&(L(this,$).fill(0),L(this,et).fill(0)),L(this,st)&&L(this,st).fill(0),Et(this,A,0),Et(this,H,0),L(this,J).length=0,Et(this,k,0),Et(this,P,0),L(this,_t)&&L(this,q)){let ht=L(this,q),p;for(;p=ht==null?void 0:ht.shift();)(V=L(this,w))==null||V.call(this,...p)}}},_=new WeakMap,E=new WeakMap,x=new WeakMap,w=new WeakMap,O=new WeakMap,P=new WeakMap,k=new WeakMap,T=new WeakMap,I=new WeakMap,N=new WeakMap,K=new WeakMap,Q=new WeakMap,A=new WeakMap,H=new WeakMap,J=new WeakMap,q=new WeakMap,st=new WeakMap,et=new WeakMap,$=new WeakMap,mt=new WeakMap,rt=new WeakMap,_t=new WeakMap,v=new WeakSet,bo=function(){let R=new c(L(this,_)),U=new c(L(this,_));Et(this,$,R),Et(this,et,U),Et(this,ot,(p,f,m=t.now())=>{if(U[p]=f!==0?m:0,R[p]=f,f!==0&&this.ttlAutopurge){let S=setTimeout(()=>{L(this,D).call(this,p)&&this.delete(L(this,I)[p])},f+1);S.unref&&S.unref()}}),Et(this,lt,p=>{U[p]=R[p]!==0?t.now():0}),Et(this,wt,(p,f)=>{if(R[f]){let m=R[f],S=U[f];p.ttl=m,p.start=S,p.now=V||ht();let M=p.now-S;p.remainingTTL=m-M}});let V=0,ht=()=>{let p=t.now();if(this.ttlResolution>0){V=p;let f=setTimeout(()=>V=0,this.ttlResolution);f.unref&&f.unref()}return p};this.getRemainingTTL=p=>{let f=L(this,T).get(p);if(f===void 0)return 0;let m=R[f],S=U[f];if(m===0||S===0)return 1/0;let M=(V||ht())-S;return m-M},Et(this,D,p=>R[p]!==0&&U[p]!==0&&(V||ht())-U[p]>R[p])},lt=new WeakMap,wt=new WeakMap,ot=new WeakMap,D=new WeakMap,fc=function(){let R=new c(L(this,_));Et(this,k,0),Et(this,st,R),Et(this,G,U=>{Et(this,k,L(this,k)-R[U]),R[U]=0}),Et(this,nt,(U,V,ht,p)=>{if(St(this,v,Ft).call(this,V))return 0;if(!l(ht))if(p){if(typeof p!="function")throw new TypeError("sizeCalculation must be a function");if(ht=p(V,U),!l(ht))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ht}),Et(this,dt,(U,V,ht)=>{if(R[U]=V,L(this,E)){let p=L(this,E)-R[U];for(;L(this,k)>p;)St(this,v,er).call(this,!0)}Et(this,k,L(this,k)+R[U]),ht&&(ht.entrySize=V,ht.totalCalculatedSize=L(this,k))})},G=new WeakMap,dt=new WeakMap,nt=new WeakMap,ii=function*({allowStale:R=this.allowStale}={}){if(L(this,P))for(let U=L(this,H);!(!St(this,v,yo).call(this,U)||((R||!L(this,D).call(this,U))&&(yield U),U===L(this,A)));)U=L(this,Q)[U]},ni=function*({allowStale:R=this.allowStale}={}){if(L(this,P))for(let U=L(this,A);!(!St(this,v,yo).call(this,U)||((R||!L(this,D).call(this,U))&&(yield U),U===L(this,H)));)U=L(this,K)[U]},yo=function(R){return R!==void 0&&L(this,T).get(L(this,I)[R])===R},er=function(R){var p,f;let U=L(this,A),V=L(this,I)[U],ht=L(this,N)[U];return L(this,rt)&&St(this,v,Ft).call(this,ht)?ht.__abortController.abort(new Error("evicted")):(L(this,mt)||L(this,_t))&&(L(this,mt)&&((p=L(this,x))==null||p.call(this,ht,V,"evict")),L(this,_t)&&((f=L(this,q))==null||f.push([ht,V,"evict"]))),L(this,G).call(this,U),R&&(L(this,I)[U]=void 0,L(this,N)[U]=void 0,L(this,J).push(U)),L(this,P)===1?(Et(this,A,Et(this,H,0)),L(this,J).length=0):Et(this,A,L(this,K)[U]),L(this,T).delete(V),In(this,P)._--,U},ir=function(R,U,V,ht){let p=U===void 0?void 0:L(this,N)[U];if(St(this,v,Ft).call(this,p))return p;let f=new r,{signal:m}=V;m==null||m.addEventListener("abort",()=>f.abort(m.reason),{signal:f.signal});let S={signal:f.signal,options:V,context:ht},M=(xt,Tt=!1)=>{let{aborted:At}=f.signal,jt=V.ignoreFetchAbort&&xt!==void 0;if(V.status&&(At&&!Tt?(V.status.fetchAborted=!0,V.status.fetchError=f.signal.reason,jt&&(V.status.fetchAbortIgnored=!0)):V.status.fetchResolved=!0),At&&!jt&&!Tt)return it(f.signal.reason);let Gt=It;return L(this,N)[U]===It&&(xt===void 0?Gt.__staleWhileFetching?L(this,N)[U]=Gt.__staleWhileFetching:this.delete(R):(V.status&&(V.status.fetchUpdated=!0),this.set(R,xt,S.options))),xt},z=xt=>(V.status&&(V.status.fetchRejected=!0,V.status.fetchError=xt),it(xt)),it=xt=>{let{aborted:Tt}=f.signal,At=Tt&&V.allowStaleOnFetchAbort,jt=At||V.allowStaleOnFetchRejection,Gt=jt||V.noDeleteOnFetchRejection,Vt=It;if(L(this,N)[U]===It&&(!Gt||Vt.__staleWhileFetching===void 0?this.delete(R):At||(L(this,N)[U]=Vt.__staleWhileFetching)),jt)return V.status&&Vt.__staleWhileFetching!==void 0&&(V.status.returnedStale=!0),Vt.__staleWhileFetching;if(Vt.__returned===Vt)throw xt},kt=(xt,Tt)=>{var jt;let At=(jt=L(this,O))==null?void 0:jt.call(this,R,p,S);At&&At instanceof Promise&&At.then(Gt=>xt(Gt===void 0?void 0:Gt),Tt),f.signal.addEventListener("abort",()=>{(!V.ignoreFetchAbort||V.allowStaleOnFetchAbort)&&(xt(void 0),V.allowStaleOnFetchAbort&&(xt=Gt=>M(Gt,!0)))})};V.status&&(V.status.fetchDispatched=!0);let It=new Promise(kt).then(M,z),Ct=Object.assign(It,{__abortController:f,__staleWhileFetching:p,__returned:void 0});return U===void 0?(this.set(R,Ct,{...S.options,status:void 0}),U=L(this,T).get(R)):L(this,N)[U]=Ct,Ct},Ft=function(R){if(!L(this,rt))return!1;let U=R;return!!U&&U instanceof Promise&&U.hasOwnProperty("__staleWhileFetching")&&U.__abortController instanceof r},_o=function(R,U){L(this,Q)[U]=R,L(this,K)[R]=U},ln=function(R){R!==L(this,H)&&(R===L(this,A)?Et(this,A,L(this,K)[R]):St(this,v,_o).call(this,L(this,Q)[R],L(this,K)[R]),St(this,v,_o).call(this,L(this,H),R),Et(this,H,R))},j);e.LRUCache=d}),Je=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var t=class{constructor(o=0){this.iteratorType=o}equals(o){return this.o===o.o}};e.ContainerIterator=t;var i=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=i;var n=class extends i{};e.Container=n}),ad=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Je(),i=class extends t.Base{constructor(o=[]){super(),this.S=[];let r=this;o.forEach(function(s){r.push(s)})}clear(){this.i=0,this.S=[]}push(o){return this.S.push(o),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=i;e.default=n}),ld=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Je(),i=class extends t.Base{constructor(o=[]){super(),this.j=0,this.q=[];let r=this;o.forEach(function(s){r.push(s)})}clear(){this.q=[],this.i=this.j=0}push(o){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let s=this.i;for(let a=0;a<s;++a)this.q[a]=this.q[this.j+a];this.j=0,this.q[this.i]=o}else this.q[this.j+this.i]=o;return++this.i}pop(){if(this.i===0)return;let o=this.q[this.j++];return this.i-=1,o}front(){if(this.i!==0)return this.q[this.j]}},n=i;e.default=n}),hd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Je(),i=class extends t.Base{constructor(o=[],r=function(a,l){return a>l?-1:a<l?1:0},s=!0){if(super(),this.v=r,Array.isArray(o))this.C=s?[...o]:o;else{this.C=[];let l=this;o.forEach(function(h){l.C.push(h)})}this.i=this.C.length;let a=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,a)}m(o){let r=this.C[o];for(;o>0;){let s=o-1>>1,a=this.C[s];if(this.v(a,r)<=0)break;this.C[o]=a,o=s}this.C[o]=r}k(o,r){let s=this.C[o];for(;o<r;){let a=o<<1|1,l=a+1,h=this.C[a];if(l<this.i&&this.v(h,this.C[l])>0&&(a=l,h=this.C[l]),this.v(h,s)>=0)break;this.C[o]=h,o=a}this.C[o]=s}clear(){this.i=0,this.C.length=0}push(o){this.C.push(o),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let o=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),o}top(){return this.C[0]}find(o){return this.C.indexOf(o)>=0}remove(o){let r=this.C.indexOf(o);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(o){let r=this.C.indexOf(o);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},n=i;e.default=n}),Xo=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Je(),i=class extends t.Container{},n=i;e.default=n}),Ze=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=t;function t(){throw new RangeError("Iterator access denied!")}}),dc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=Je(),i=Ze(),n=class extends t.ContainerIterator{constructor(o,r){super(r),this.o=o,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,i.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,i.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,i.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,i.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(o){this.container.setElementByPos(this.o,o)}};e.RandomIterator=n}),cd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(Xo()),i=dc();function n(a){return a&&a.t?a:{default:a}}var o=class pc extends i.RandomIterator{constructor(l,h,c){super(l,c),this.container=h}copy(){return new pc(this.o,this.container,this.iteratorType)}},r=class extends t.default{constructor(a=[],l=!0){if(super(),Array.isArray(a))this.J=l?[...a]:a,this.i=a.length;else{this.J=[];let h=this;a.forEach(function(c){h.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J[a]}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J.splice(a,1),this.i-=1,this.i}eraseElementByValue(a){let l=0;for(let h=0;h<this.i;++h)this.J[h]!==a&&(this.J[l++]=this.J[h]);return this.i=this.J.length=l,this.i}eraseElementByIterator(a){let l=a.o;return a=a.next(),this.eraseElementByPos(l),a}pushBack(a){return this.J.push(a),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;this.J[a]=l}insert(a,l,h=1){if(a<0||a>this.i)throw new RangeError;return this.J.splice(a,0,...new Array(h).fill(l)),this.i+=h,this.i}find(a){for(let l=0;l<this.i;++l)if(this.J[l]===a)return new o(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let a=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[a++]=this.J[l]);return this.i=this.J.length=a,this.i}sort(a){this.J.sort(a)}forEach(a){for(let l=0;l<this.i;++l)a(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},s=r;e.default=s}),ud=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=o(Xo()),i=Je(),n=Ze();function o(l){return l&&l.t?l:{default:l}}var r=class gc extends i.ContainerIterator{constructor(h,c,u,d){super(d),this.o=h,this.h=c,this.container=u,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(h){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=h}copy(){return new gc(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let h=this;l.forEach(function(c){h.pushBack(c)})}V(l){let{L:h,B:c}=l;h.B=c,c.L=h,l===this.p&&(this.p=c),l===this._&&(this._=h),this.i-=1}G(l,h){let c=h.B,u={l,L:h,B:c};h.B=u,c.L=u,h===this.h&&(this.p=u),c===this.h&&(this._=u),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return h.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return this.V(h),this.i}eraseElementByValue(l){let h=this.p;for(;h!==this.h;)h.l===l&&this.V(h),h=h.B;return this.i}eraseElementByIterator(l){let h=l.o;return h===this.h&&(0,n.throwIteratorAccessError)(),l=l.next(),this.V(h),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,h){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;c.l=h}insert(l,h,c=1){if(l<0||l>this.i)throw new RangeError;if(c<=0)return this.i;if(l===0)for(;c--;)this.pushFront(h);else if(l===this.i)for(;c--;)this.pushBack(h);else{let u=this.p;for(let g=1;g<l;++g)u=u.B;let d=u.B;for(this.i+=c;c--;)u.B={l:h,L:u},u.B.L=u,u=u.B;u.B=d,d.L=u}return this.i}find(l){let h=this.p;for(;h!==this.h;){if(h.l===l)return new r(h,this.h,this);h=h.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,h=this._,c=0;for(;c<<1<this.i;){let u=l.l;l.l=h.l,h.l=u,l=l.B,h=h.L,c+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let h=l;for(;h.B!==this.h&&h.l===h.B.l;)h=h.B,this.i-=1;l.B=h.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let h=[];this.forEach(function(u){h.push(u)}),h.sort(l);let c=this.p;h.forEach(function(u){c.l=u,c=c.B})}merge(l){let h=this;if(this.i===0)l.forEach(function(c){h.pushBack(c)});else{let c=this.p;l.forEach(function(u){for(;c!==h.h&&c.l<=u;)c=c.B;h.G(u,c.L)})}return this.i}forEach(l){let h=this.p,c=0;for(;h!==this.h;)l(h.l,c++,this),h=h.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},a=s;e.default=a}),fd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(Xo()),i=dc();function n(a){return a&&a.t?a:{default:a}}var o=class mc extends i.RandomIterator{constructor(l,h,c){super(l,c),this.container=h}copy(){return new mc(this.o,this.container,this.iteratorType)}},r=class extends t.default{constructor(a=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let h=(()=>{if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.size=="function")return a.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(h/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let c=Math.ceil(h/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-h%this.F>>1;let u=this;a.forEach(function(d){u.pushBack(d)})}T(){let a=[],l=Math.max(this.P>>1,1);for(let h=0;h<l;++h)a[h]=new Array(this.F);for(let h=this.j;h<this.P;++h)a[a.length]=this.A[h];for(let h=0;h<this.R;++h)a[a.length]=this.A[h];a[a.length]=[...this.A[this.R]],this.j=l,this.R=a.length-1;for(let h=0;h<l;++h)a[a.length]=new Array(this.F);this.A=a,this.P=a.length}O(a){let l=this.D+a+1,h=l%this.F,c=h-1,u=this.j+(l-h)/this.F;return h===0&&(u-=1),u%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:u,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(a){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=a,this.i}popBack(){if(this.i===0)return;let a=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,a}pushFront(a){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=a,this.i}popFront(){if(this.i===0)return;let a=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,a}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:h}=this.O(a);return this.A[l][h]}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:h,curNodePointerIndex:c}=this.O(a);this.A[h][c]=l}insert(a,l,h=1){if(a<0||a>this.i)throw new RangeError;if(a===0)for(;h--;)this.pushFront(l);else if(a===this.i)for(;h--;)this.pushBack(l);else{let c=[];for(let u=a;u<this.i;++u)c.push(this.getElementByPos(u));this.cut(a-1);for(let u=0;u<h;++u)this.pushBack(l);for(let u=0;u<c.length;++u)this.pushBack(c[u])}return this.i}cut(a){if(a<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:h}=this.O(a);return this.R=l,this.N=h,this.i=a+1,this.i}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;if(a===0)this.popFront();else if(a===this.i-1)this.popBack();else{let l=[];for(let c=a+1;c<this.i;++c)l.push(this.getElementByPos(c));this.cut(a),this.popBack();let h=this;l.forEach(function(c){h.pushBack(c)})}return this.i}eraseElementByValue(a){if(this.i===0)return 0;let l=[];for(let c=0;c<this.i;++c){let u=this.getElementByPos(c);u!==a&&l.push(u)}let h=l.length;for(let c=0;c<h;++c)this.setElementByPos(c,l[c]);return this.cut(h-1)}eraseElementByIterator(a){let l=a.o;return this.eraseElementByPos(l),a=a.next(),a}find(a){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===a)return new o(l,this);return this.end()}reverse(){let a=0,l=this.i-1;for(;a<l;){let h=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(l)),this.setElementByPos(l,h),a+=1,l-=1}}unique(){if(this.i<=1)return this.i;let a=1,l=this.getElementByPos(0);for(let h=1;h<this.i;++h){let c=this.getElementByPos(h);c!==l&&(l=c,this.setElementByPos(a++,c))}for(;this.i>a;)this.popBack();return this.i}sort(a){let l=[];for(let h=0;h<this.i;++h)l.push(this.getElementByPos(h));l.sort(a);for(let h=0;h<this.i;++h)this.setElementByPos(h,l[h])}shrinkToFit(){if(this.i===0)return;let a=[];this.forEach(function(l){a.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<a.length;++l)this.pushBack(a[l])}forEach(a){for(let l=0;l<this.i;++l)a(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let a=0;a<this.i;++a)yield this.getElementByPos(a)}).bind(this)()}},s=r;e.default=s}),dd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(n,o){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=o}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let o=n.tt;for(;o.U===n;)n=o,o=n.tt;n=o}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let o=n.tt;for(;o.W===n;)n=o,o=n.tt;return n.W!==o?o:n}}te(){let n=this.tt,o=this.W,r=o.U;return n.tt===this?n.tt=o:n.U===this?n.U=o:n.W=o,o.tt=n,o.U=this,this.tt=o,this.W=r,r&&(r.tt=this),o}se(){let n=this.tt,o=this.U,r=o.W;return n.tt===this?n.tt=o:n.U===this?n.U=o:n.W=o,o.tt=n,o.W=this,this.tt=o,this.U=r,r&&(r.tt=this),o}};e.TreeNode=t;var i=class extends t{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=i}),bc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=dd(),i=Je(),n=Ze(),o=class extends i.Container{constructor(s=function(l,h){return l<h?-1:l>h?1:0},a=!1){super(),this.Y=void 0,this.v=s,a?(this.re=t.TreeNodeEnableIndex,this.M=function(l,h,c){let u=this.ne(l,h,c);if(u){let d=u.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let g=this.he(u);if(g){let{parentNode:b,grandParent:y,curNode:_}=g;b.ie(),y.ie(),_.ie()}}return this.i},this.V=function(l){let h=this.fe(l);for(;h!==this.h;)h.rt-=1,h=h.tt}):(this.re=t.TreeNode,this.M=function(l,h,c){let u=this.ne(l,h,c);return u&&this.he(u),this.i},this.V=this.fe),this.h=new this.re}X(s,a){let l=this.h;for(;s;){let h=this.v(s.u,a);if(h<0)s=s.W;else if(h>0)l=s,s=s.U;else return s}return l}Z(s,a){let l=this.h;for(;s;)this.v(s.u,a)<=0?s=s.W:(l=s,s=s.U);return l}$(s,a){let l=this.h;for(;s;){let h=this.v(s.u,a);if(h<0)l=s,s=s.W;else if(h>0)s=s.U;else return s}return l}rr(s,a){let l=this.h;for(;s;)this.v(s.u,a)<0?(l=s,s=s.W):s=s.U;return l}ue(s){for(;;){let a=s.tt;if(a===this.h)return;if(s.ee===1){s.ee=0;return}if(s===a.U){let l=a.W;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.te():a.te();else if(l.W&&l.W.ee===1){l.ee=a.ee,a.ee=0,l.W.ee=0,a===this.Y?this.Y=a.te():a.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,s=a)}else{let l=a.U;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.se():a.se();else if(l.U&&l.U.ee===1){l.ee=a.ee,a.ee=0,l.U.ee=0,a===this.Y?this.Y=a.se():a.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,s=a)}}}fe(s){if(this.i===1)return this.clear(),this.h;let a=s;for(;a.U||a.W;){if(a.W)for(a=a.W;a.U;)a=a.U;else a=a.U;[s.u,a.u]=[a.u,s.u],[s.l,a.l]=[a.l,s.l],s=a}this.h.U===a?this.h.U=a.tt:this.h.W===a&&(this.h.W=a.tt),this.ue(a);let l=a.tt;return a===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(s,a){return s===void 0?!1:this.oe(s.U,a)||a(s)?!0:this.oe(s.W,a)}he(s){for(;;){let a=s.tt;if(a.ee===0)return;let l=a.tt;if(a===l.U){let h=l.W;if(h&&h.ee===1){if(h.ee=a.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===a.W){if(s.ee=0,s.U&&(s.U.tt=a),s.W&&(s.W.tt=l),a.W=s.U,l.U=s.W,s.U=a,s.W=l,l===this.Y)this.Y=s,this.h.tt=s;else{let c=l.tt;c.U===l?c.U=s:c.W=s}return s.tt=l.tt,a.tt=s,l.tt=s,l.ee=1,{parentNode:a,grandParent:l,curNode:s}}else a.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let h=l.U;if(h&&h.ee===1){if(h.ee=a.ee=0,l===this.Y)return;l.ee=1,s=l;continue}else if(s===a.U){if(s.ee=0,s.U&&(s.U.tt=l),s.W&&(s.W.tt=a),l.W=s.U,a.U=s.W,s.U=l,s.W=a,l===this.Y)this.Y=s,this.h.tt=s;else{let c=l.tt;c.U===l?c.U=s:c.W=s}return s.tt=l.tt,a.tt=s,l.tt=s,l.ee=1,{parentNode:a,grandParent:l,curNode:s}}else a.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(s,a,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(s,a),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let h,c=this.h.U,u=this.v(c.u,s);if(u===0){c.l=a;return}else if(u>0)c.U=new this.re(s,a),c.U.tt=c,h=c.U,this.h.U=h;else{let d=this.h.W,g=this.v(d.u,s);if(g===0){d.l=a;return}else if(g<0)d.W=new this.re(s,a),d.W.tt=d,h=d.W,this.h.W=h;else{if(l!==void 0){let b=l.o;if(b!==this.h){let y=this.v(b.u,s);if(y===0){b.l=a;return}else if(y>0){let _=b.L(),E=this.v(_.u,s);if(E===0){_.l=a;return}else E<0&&(h=new this.re(s,a),_.W===void 0?(_.W=h,h.tt=_):(b.U=h,h.tt=b))}}}if(h===void 0)for(h=this.Y;;){let b=this.v(h.u,s);if(b>0){if(h.U===void 0){h.U=new this.re(s,a),h.U.tt=h,h=h.U;break}h=h.U}else if(b<0){if(h.W===void 0){h.W=new this.re(s,a),h.W.tt=h,h=h.W;break}h=h.W}else{h.l=a;return}}}}return this.i+=1,h}I(s,a){for(;s;){let l=this.v(s.u,a);if(l<0)s=s.W;else if(l>0)s=s.U;else return s}return s||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(s,a){let l=s.o;if(l===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return l.u=a,!0;if(l===this.h.U)return this.v(l.B().u,a)>0?(l.u=a,!0):!1;if(l===this.h.W)return this.v(l.L().u,a)<0?(l.u=a,!0):!1;let h=l.L().u;if(this.v(h,a)>=0)return!1;let c=l.B().u;return this.v(c,a)<=0?!1:(l.u=a,!0)}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let a=0,l=this;return this.oe(this.Y,function(h){return s===a?(l.V(h),!0):(a+=1,!1)}),this.i}eraseElementByKey(s){if(this.i===0)return!1;let a=this.I(this.Y,s);return a===this.h?!1:(this.V(a),!0)}eraseElementByIterator(s){let a=s.o;a===this.h&&(0,n.throwIteratorAccessError)();let l=a.W===void 0;return s.iteratorType===0?l&&s.next():(!l||a.U===void 0)&&s.next(),this.V(a),s}forEach(s){let a=0;for(let l of this)s(l,a++,this)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let a,l=0;for(let h of this){if(l===s){a=h;break}l+=1}return a}getHeight(){if(this.i===0)return 0;let s=function(a){return a?Math.max(s(a.U),s(a.W))+1:0};return s(this.Y)}},r=o;e.default=r}),yc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Je(),i=Ze(),n=class extends t.ContainerIterator{constructor(r,s,a){super(a),this.o=r,this.h=s,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,i.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let r=this.o,s=this.h.tt;if(r===this.h)return s?s.rt-1:0;let a=0;for(r.U&&(a+=r.U.rt);r!==s;){let l=r.tt;r===l.W&&(a+=1,l.U&&(a+=l.U.rt)),r=l}return a}},o=n;e.default=o}),pd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=o(bc()),i=o(yc()),n=Ze();function o(l){return l&&l.t?l:{default:l}}var r=class _c extends i.default{constructor(h,c,u,d){super(h,c,d),this.container=u}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new _c(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(l=[],h,c){super(h,c);let u=this;l.forEach(function(d){u.insert(d)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,h){return this.M(l,void 0,h)}find(l){let h=this.I(this.Y,l);return new r(h,this.h,this)}lowerBound(l){let h=this.X(this.Y,l);return new r(h,this.h,this)}upperBound(l){let h=this.Z(this.Y,l);return new r(h,this.h,this)}reverseLowerBound(l){let h=this.$(this.Y,l);return new r(h,this.h,this)}reverseUpperBound(l){let h=this.rr(this.Y,l);return new r(h,this.h,this)}union(l){let h=this;return l.forEach(function(c){h.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=s;e.default=a}),gd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=o(bc()),i=o(yc()),n=Ze();function o(l){return l&&l.t?l:{default:l}}var r=class wc extends i.default{constructor(h,c,u,d){super(h,c,d),this.container=u}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(c,u){if(u==="0")return h.o.u;if(u==="1")return h.o.l},set(c,u,d){if(u!=="1")throw new TypeError("props must be 1");return h.o.l=d,!0}})}copy(){return new wc(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(l=[],h,c){super(h,c);let u=this;l.forEach(function(d){u.setElement(d[0],d[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let h=this.X(this.Y,l);return new r(h,this.h,this)}upperBound(l){let h=this.Z(this.Y,l);return new r(h,this.h,this)}reverseLowerBound(l){let h=this.$(this.Y,l);return new r(h,this.h,this)}reverseUpperBound(l){let h=this.rr(this.Y,l);return new r(h,this.h,this)}setElement(l,h,c){return this.M(l,h,c)}find(l){let h=this.I(this.Y,l);return new r(h,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let h=this;return l.forEach(function(c){h.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=s;e.default=a}),vc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=t;function t(i){let n=typeof i;return n==="object"&&i!==null||n==="function"}}),Sc=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t=Je(),i=o(vc()),n=Ze();function o(a){return a&&a.t?a:{default:a}}var r=class extends t.ContainerIterator{constructor(a,l,h){super(h),this.o=a,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=r;var s=class extends t.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(a){let{L:l,B:h}=a;l.B=h,h.L=l,a===this.p&&(this.p=h),a===this._&&(this._=l),this.i-=1}M(a,l,h){h===void 0&&(h=(0,i.default)(a));let c;if(h){let u=a[this.HASH_TAG];if(u!==void 0)return this.H[u].l=l,this.i;Object.defineProperty(a,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:a,l,L:this._,B:this.h},this.H.push(c)}else{let u=this.g[a];if(u)return u.l=l,this.i;c={u:a,l,L:this._,B:this.h},this.g[a]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(a,l){if(l===void 0&&(l=(0,i.default)(a)),l){let h=a[this.HASH_TAG];return h===void 0?this.h:this.H[h]}else return this.g[a]||this.h}clear(){let a=this.HASH_TAG;this.H.forEach(function(l){delete l.u[a]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(a,l){let h;if(l===void 0&&(l=(0,i.default)(a)),l){let c=a[this.HASH_TAG];if(c===void 0)return!1;delete a[this.HASH_TAG],h=this.H[c],delete this.H[c]}else{if(h=this.g[a],h===void 0)return!1;delete this.g[a]}return this.V(h),!0}eraseElementByIterator(a){let l=a.o;return l===this.h&&(0,n.throwIteratorAccessError)(),this.V(l),a.next()}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return this.V(l),this.i}};e.HashContainer=s}),md=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Sc(),i=Ze(),n=class xc extends t.HashContainerIterator{constructor(a,l,h,c){super(a,l,c),this.container=h}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new xc(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.HashContainer{constructor(s=[]){super();let a=this;s.forEach(function(l){a.insert(l)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(s,a){return this.M(s,void 0,a)}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let a=this.p;for(;s--;)a=a.B;return a.u}find(s,a){let l=this.I(s,a);return new n(l,this.h,this)}forEach(s){let a=0,l=this.p;for(;l!==this.h;)s(l.u,a++,this),l=l.B}[Symbol.iterator](){return(function*(){let s=this.p;for(;s!==this.h;)yield s.u,s=s.B}).bind(this)()}},r=o;e.default=r}),bd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Sc(),i=o(vc()),n=Ze();function o(l){return l&&l.t?l:{default:l}}var r=class Ec extends t.HashContainerIterator{constructor(h,c,u,d){super(h,c,d),this.container=u}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let h=this;return new Proxy([],{get(c,u){if(u==="0")return h.o.u;if(u==="1")return h.o.l},set(c,u,d){if(u!=="1")throw new TypeError("props must be 1");return h.o.l=d,!0}})}copy(){return new Ec(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.HashContainer{constructor(l=[]){super();let h=this;l.forEach(function(c){h.setElement(c[0],c[1])})}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,h,c){return this.M(l,h,c)}getElementByKey(l,h){if(h===void 0&&(h=(0,i.default)(l)),h){let u=l[this.HASH_TAG];return u!==void 0?this.H[u].l:void 0}let c=this.g[l];return c?c.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let h=this.p;for(;l--;)h=h.B;return[h.u,h.l]}find(l,h){let c=this.I(l,h);return new r(c,this.h,this)}forEach(l){let h=0,c=this.p;for(;c!==this.h;)l([c.u,c.l],h++,this),c=c.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},a=s;e.default=a}),yd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return o.default}});var t=u(ad()),i=u(ld()),n=u(hd()),o=u(cd()),r=u(ud()),s=u(fd()),a=u(pd()),l=u(gd()),h=u(md()),c=u(bd());function u(d){return d&&d.t?d:{default:d}}}),_d=bt((e,t)=>{ct(),ft(),ut();var i=yd().OrderedSet,n=Ge()("number-allocator:trace"),o=Ge()("number-allocator:error");function r(a,l){this.low=a,this.high=l}r.prototype.equals=function(a){return this.low===a.low&&this.high===a.high},r.prototype.compare=function(a){return this.low<a.low&&this.high<a.low?-1:a.low<this.low&&a.high<this.low?1:0};function s(a,l){if(!(this instanceof s))return new s(a,l);this.min=a,this.max=l,this.ss=new i([],(h,c)=>h.compare(c)),n("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let a=this.ss.begin(),l=a.pointer.low,h=a.pointer.high,c=l;return c+1<=h?this.ss.updateKeyByIterator(a,new r(l+1,h)):this.ss.eraseElementByPos(0),n("alloc():"+c),c},s.prototype.use=function(a){let l=new r(a,a),h=this.ss.lowerBound(l);if(!h.equals(this.ss.end())){let c=h.pointer.low,u=h.pointer.high;return h.pointer.equals(l)?(this.ss.eraseElementByIterator(h),n("use():"+a),!0):c>a?!1:c===a?(this.ss.updateKeyByIterator(h,new r(c+1,u)),n("use():"+a),!0):u===a?(this.ss.updateKeyByIterator(h,new r(c,u-1)),n("use():"+a),!0):(this.ss.updateKeyByIterator(h,new r(a+1,u)),this.ss.insert(new r(c,a-1)),n("use():"+a),!0)}return n("use():failed"),!1},s.prototype.free=function(a){if(a<this.min||a>this.max){o("free():"+a+" is out of range");return}let l=new r(a,a),h=this.ss.upperBound(l);if(h.equals(this.ss.end())){if(h.equals(this.ss.begin())){this.ss.insert(l);return}h.pre();let c=h.pointer.high;h.pointer.high+1===a?this.ss.updateKeyByIterator(h,new r(c,a)):this.ss.insert(l)}else if(h.equals(this.ss.begin()))if(a+1===h.pointer.low){let c=h.pointer.high;this.ss.updateKeyByIterator(h,new r(a,c))}else this.ss.insert(l);else{let c=h.pointer.low,u=h.pointer.high;h.pre();let d=h.pointer.low;h.pointer.high+1===a?a+1===c?(this.ss.eraseElementByIterator(h),this.ss.updateKeyByIterator(h,new r(d,u))):this.ss.updateKeyByIterator(h,new r(d,a)):a+1===c?(this.ss.eraseElementByIterator(h.next()),this.ss.insert(new r(a,u))):this.ss.insert(l)}n("free():"+a)},s.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let a of this.ss)console.log(a)},t.exports=s}),kc=bt((e,t)=>{ct(),ft(),ut();var i=_d();t.exports.NumberAllocator=i}),wd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=od(),i=kc(),n=class{constructor(o){o>0&&(this.aliasToTopic=new t.LRUCache({max:o}),this.topicToAlias={},this.numberAllocator=new i.NumberAllocator(1,o),this.max=o,this.length=0)}put(o,r){if(r===0||r>this.max)return!1;let s=this.aliasToTopic.get(r);return s&&delete this.topicToAlias[s],this.aliasToTopic.set(r,o),this.topicToAlias[o]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(o){return this.aliasToTopic.get(o)}getAliasByTopic(o){let r=this.topicToAlias[o];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=n}),vd=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=Ir(),n=t(wd()),o=Ki(),r=(s,a)=>{s.log("_handleConnack");let{options:l}=s,h=l.protocolVersion===5?a.reasonCode:a.returnCode;if(clearTimeout(s.connackTimer),delete s.topicAliasSend,a.properties){if(a.properties.topicAliasMaximum){if(a.properties.topicAliasMaximum>65535){s.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}a.properties.topicAliasMaximum>0&&(s.topicAliasSend=new n.default(a.properties.topicAliasMaximum))}a.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=a.properties.serverKeepAlive),a.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=a.properties.maximumPacketSize)}if(h===0)s.reconnecting=!1,s._onConnect(a);else if(h>0){let c=new o.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[h]}`,h);s.emit("error",c),s.options.reconnectOnConnackError&&s._cleanUp(!0)}};e.default=r}),Sd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=(i,n,o)=>{i.log("handling pubrel packet");let r=typeof o<"u"?o:i.noop,{messageId:s}=n,a={cmd:"pubcomp",messageId:s};i.incomingStore.get(n,(l,h)=>{l?i._sendPacket(a,r):(i.emit("message",h.topic,h.payload,h),i.handleMessage(h,c=>{if(c)return r(c);i.incomingStore.del(h,i.noop),i._sendPacket(a,r)}))})};e.default=t}),xd=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(nd()),n=t(sd()),o=t(vd()),r=t(Ir()),s=t(Sd()),a=(l,h,c)=>{let{options:u}=l;if(u.protocolVersion===5&&u.properties&&u.properties.maximumPacketSize&&u.properties.maximumPacketSize<h.length)return l.emit("error",new Error(`exceeding packets size ${h.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",h),h.cmd){case"publish":(0,i.default)(l,h,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,r.default)(l,h),c();break;case"pubrel":l.reschedulePing(),(0,s.default)(l,h,c);break;case"connack":(0,o.default)(l,h),c();break;case"auth":l.reschedulePing(),(0,n.default)(l,h),c();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),c();break;case"disconnect":l.emit("disconnect",h),c();break;default:l.log("_handlePacket :: unknown command"),c();break}};e.default=a}),Ed=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var i=t((Yi(),Nt(Bi))),n=Ki(),o=class{};e.TypedEventEmitter=o,(0,n.applyMixin)(o,i.default)}),Cr=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t=()=>{var r;return typeof window<"u"?typeof navigator<"u"&&((r=navigator.userAgent)===null||r===void 0?void 0:r.toLowerCase().indexOf(" electron/"))>-1&&Rt!=null&&Rt.versions?!Object.prototype.hasOwnProperty.call(Rt.versions,"electron"):typeof window.document<"u":!1},i=()=>{var r,s;return!!(typeof self=="object"&&!((s=(r=self==null?void 0:self.constructor)===null||r===void 0?void 0:r.name)===null||s===void 0)&&s.includes("WorkerGlobalScope"))},n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o=t()||i()||n();e.isWebWorker=i(),e.isReactNativeBrowser=n(),e.default=o}),kd=bt((e,t)=>{ct(),ft(),ut(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.fastUniqueNumbers={}))}(e,function(i){var n=function(g){return function(b){var y=g(b);return b.add(y),y}},o=function(g){return function(b,y){return g.set(b,y),y}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,a=s*2,l=function(g,b){return function(y){var _=b.get(y),E=_===void 0?y.size:_<a?_+1:0;if(!y.has(E))return g(y,E);if(y.size<s){for(;y.has(E);)E=Math.floor(Math.random()*a);return g(y,E)}if(y.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(E);)E=Math.floor(Math.random()*r);return g(y,E)}},h=new WeakMap,c=o(h),u=l(c,h),d=n(u);i.addUniqueNumber=d,i.generateUniqueNumber=u})}),Ad=bt((e,t)=>{ct(),ft(),ut(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e,kd()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.workerTimersBroker={},i.fastUniqueNumbers))}(e,function(i,n){var o=function(a){return a.method!==void 0&&a.method==="call"},r=function(a){return a.error===null&&typeof a.id=="number"},s=function(a){var l=new Map([[0,function(){}]]),h=new Map([[0,function(){}]]),c=new Map,u=new Worker(a);u.addEventListener("message",function(_){var E=_.data;if(o(E)){var x=E.params,w=x.timerId,O=x.timerType;if(O==="interval"){var P=l.get(w);if(typeof P=="number"){var k=c.get(P);if(k===void 0||k.timerId!==w||k.timerType!==O)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P();else throw new Error("The timer is in an undefined state.")}else if(O==="timeout"){var T=h.get(w);if(typeof T=="number"){var I=c.get(T);if(I===void 0||I.timerId!==w||I.timerType!==O)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T(),h.delete(w);else throw new Error("The timer is in an undefined state.")}}else if(r(E)){var N=E.id,K=c.get(N);if(K===void 0)throw new Error("The timer is in an undefined state.");var Q=K.timerId,A=K.timerType;c.delete(N),A==="interval"?l.delete(Q):h.delete(Q)}else{var H=E.error.message;throw new Error(H)}});var d=function(_){var E=n.generateUniqueNumber(c);c.set(E,{timerId:_,timerType:"interval"}),l.set(_,E),u.postMessage({id:E,method:"clear",params:{timerId:_,timerType:"interval"}})},g=function(_){var E=n.generateUniqueNumber(c);c.set(E,{timerId:_,timerType:"timeout"}),h.set(_,E),u.postMessage({id:E,method:"clear",params:{timerId:_,timerType:"timeout"}})},b=function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=n.generateUniqueNumber(l);return l.set(x,function(){_(),typeof l.get(x)=="function"&&u.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:x,timerType:"interval"}})}),u.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:x,timerType:"interval"}}),x},y=function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=n.generateUniqueNumber(h);return h.set(x,_),u.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:x,timerType:"timeout"}}),x};return{clearInterval:d,clearTimeout:g,setInterval:b,setTimeout:y}};i.load=s})}),Td=bt((e,t)=>{ct(),ft(),ut(),function(i,n){typeof e=="object"&&typeof t<"u"?n(e,Ad()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.workerTimers={},i.workerTimersBroker))}(e,function(i,n){var o=function(u,d){var g=null;return function(){if(g!==null)return g;var b=new Blob([d],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(b);return g=u(y),setTimeout(function(){return URL.revokeObjectURL(y)}),g}},r=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,s=o(n.load,r),a=function(u){return s().clearInterval(u)},l=function(u){return s().clearTimeout(u)},h=function(){var u;return(u=s()).setInterval.apply(u,arguments)},c=function(){var u;return(u=s()).setTimeout.apply(u,arguments)};i.clearInterval=a,i.clearTimeout=l,i.setInterval=h,i.setTimeout=c})}),Id=bt(e=>{ct(),ft(),ut();var t=e&&e.__createBinding||(Object.create?function(h,c,u,d){d===void 0&&(d=u);var g=Object.getOwnPropertyDescriptor(c,u);(!g||("get"in g?!c.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(h,d,g)}:function(h,c,u,d){d===void 0&&(d=u),h[d]=c[u]}),i=e&&e.__setModuleDefault||(Object.create?function(h,c){Object.defineProperty(h,"default",{enumerable:!0,value:c})}:function(h,c){h.default=c}),n=e&&e.__importStar||function(h){if(h&&h.__esModule)return h;var c={};if(h!=null)for(var u in h)u!=="default"&&Object.prototype.hasOwnProperty.call(h,u)&&t(c,h,u);return i(c,h),c};Object.defineProperty(e,"__esModule",{value:!0});var o=n(Cr()),r=Td(),s={set:r.setInterval,clear:r.clearInterval},a={set:(h,c)=>setInterval(h,c),clear:h=>clearInterval(h)},l=h=>{switch(h){case"native":return a;case"worker":return s;case"auto":default:return o.default&&!o.isWebWorker&&!o.isReactNativeBrowser?s:a}};e.default=l}),Ac=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(Id()),n=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(o,r){this.destroyed=!1,this.client=o,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,i.default)(r),this.setKeepalive(o.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(o){if(o*=1e3,isNaN(o)||o<=0||o>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${o}`);this._keepalive=o,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${o}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let o=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+o,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=n}),wo=bt(e=>{ct(),ft(),ut();var t=e&&e.__createBinding||(Object.create?function(P,k,T,I){I===void 0&&(I=T);var N=Object.getOwnPropertyDescriptor(k,T);(!N||("get"in N?!k.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return k[T]}}),Object.defineProperty(P,I,N)}:function(P,k,T,I){I===void 0&&(I=T),P[I]=k[T]}),i=e&&e.__setModuleDefault||(Object.create?function(P,k){Object.defineProperty(P,"default",{enumerable:!0,value:k})}:function(P,k){P.default=k}),n=e&&e.__importStar||function(P){if(P&&P.__esModule)return P;var k={};if(P!=null)for(var T in P)T!=="default"&&Object.prototype.hasOwnProperty.call(P,T)&&t(k,P,T);return i(k,P),k},o=e&&e.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(bf()),s=o(Zf()),a=o(hc()),l=Li(),h=o(ed()),c=n(id()),u=o(Ge()),d=o(cc()),g=o(xd()),b=Ki(),y=Ed(),_=o(Ac()),E=n(Cr()),x=globalThis.setImmediate||((...P)=>{let k=P.shift();(0,b.nextTick)(()=>{k(...P)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},O=class vo extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(k,T){super(),this.options=T||{};for(let I in w)typeof this.options[I]>"u"?this.options[I]=w[I]:this.options[I]=T[I];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",vo.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",T.protocol),this.log("MqttClient :: options.protocolVersion",T.protocolVersion),this.log("MqttClient :: options.username",T.username),this.log("MqttClient :: options.keepalive",T.keepalive),this.log("MqttClient :: options.reconnectPeriod",T.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",T.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",T.properties?T.properties.topicAliasMaximum:void 0),this.options.clientId=typeof T.clientId=="string"?T.clientId:vo.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=T.protocolVersion===5&&T.customHandleAcks?T.customHandleAcks:(...I)=>{I[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=k,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new a.default:this.options.messageIdProvider,this.outgoingStore=T.outgoingStore||new d.default,this.incomingStore=T.incomingStore||new d.default,this.queueQoSZero=T.queueQoSZero===void 0?!0:T.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,T.properties&&T.properties.topicAliasMaximum>0&&(T.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new r.default(T.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:I}=this,N=()=>{let K=I.shift();this.log("deliver :: entry %o",K);let Q=null;if(!K){this._resubscribe();return}Q=K.packet,this.log("deliver :: call _sendPacket for %o",Q);let A=!0;Q.messageId&&Q.messageId!==0&&(this.messageIdProvider.register(Q.messageId)||(A=!1)),A?this._sendPacket(Q,H=>{K.cb&&K.cb(H),N()}):(this.log("messageId: %d has already used. The message is skipped and removed.",Q.messageId),N())};this.log("connect :: sending queued packets"),N()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(k,T){T()}handleMessage(k,T){T()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var k;let T=new l.Writable,I=s.default.parser(this.options),N=null,K=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),I.on("packet",q=>{this.log("parser :: on packet push to packets array."),K.push(q)});let Q=()=>{this.log("work :: getting next packet in queue");let q=K.shift();if(q)this.log("work :: packet pulled from queue"),(0,g.default)(this,q,A);else{this.log("work :: no packets in queue");let st=N;N=null,this.log("work :: done flag is %s",!!st),st&&st()}},A=()=>{if(K.length)(0,b.nextTick)(Q);else{let q=N;N=null,q()}};T._write=(q,st,et)=>{N=et,this.log("writable stream :: parsing buffer"),I.parse(q),Q()};let H=q=>{this.log("streamErrorHandler :: error",q.message),q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",q)):this.noop(q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(T),this.stream.on("error",H),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let J={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(J.will=Object.assign(Object.assign({},this.options.will),{payload:(k=this.options.will)===null||k===void 0?void 0:k.payload})),this.topicAliasRecv&&(J.properties||(J.properties={}),this.topicAliasRecv&&(J.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(J),I.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let q=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(k,T,I,N){this.log("publish :: message `%s` to topic `%s`",T,k);let{options:K}=this;typeof I=="function"&&(N=I,I=null),I=I||{},I=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),I);let{qos:Q,retain:A,dup:H,properties:J,cbStorePut:q}=I;if(this._checkDisconnecting(N))return this;let st=()=>{let et=0;if((Q===1||Q===2)&&(et=this._nextId(),et===null))return this.log("No messageId left"),!1;let $={cmd:"publish",topic:k,payload:T,qos:Q,retain:A,messageId:et,dup:H};switch(K.protocolVersion===5&&($.properties=J),this.log("publish :: qos",Q),Q){case 1:case 2:this.outgoing[$.messageId]={volatile:!1,cb:N||this.noop},this.log("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,void 0,q);break;default:this.log("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,N,q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!st())&&this._storeProcessingQueue.push({invoke:st,cbStorePut:I.cbStorePut,callback:N}),this}publishAsync(k,T,I){return new Promise((N,K)=>{this.publish(k,T,I,(Q,A)=>{Q?K(Q):N(A)})})}subscribe(k,T,I){let N=this.options.protocolVersion;typeof T=="function"&&(I=T),I=I||this.noop;let K=!1,Q=[];typeof k=="string"?(k=[k],Q=k):Array.isArray(k)?Q=k:typeof k=="object"&&(K=k.resubscribe,delete k.resubscribe,Q=Object.keys(k));let A=c.validateTopics(Q);if(A!==null)return x(I,new Error(`Invalid topic ${A}`)),this;if(this._checkDisconnecting(I))return this.log("subscribe: discconecting true"),this;let H={qos:0};N===5&&(H.nl=!1,H.rap=!1,H.rh=0),T=Object.assign(Object.assign({},H),T);let J=T.properties,q=[],st=($,mt)=>{if(mt=mt||T,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,$)||this._resubscribeTopics[$].qos<mt.qos||K){let rt={topic:$,qos:mt.qos};N===5&&(rt.nl=mt.nl,rt.rap=mt.rap,rt.rh=mt.rh,rt.properties=J),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",rt.topic,rt.qos),q.push(rt)}};if(Array.isArray(k)?k.forEach($=>{this.log("subscribe: array topic %s",$),st($)}):Object.keys(k).forEach($=>{this.log("subscribe: object topic %s, %o",$,k[$]),st($,k[$])}),!q.length)return I(null,[]),this;let et=()=>{let $=this._nextId();if($===null)return this.log("No messageId left"),!1;let mt={cmd:"subscribe",subscriptions:q,messageId:$};if(J&&(mt.properties=J),this.options.resubscribe){this.log("subscribe :: resubscribe true");let rt=[];q.forEach(_t=>{if(this.options.reconnectPeriod>0){let v={qos:_t.qos};N===5&&(v.nl=_t.nl||!1,v.rap=_t.rap||!1,v.rh=_t.rh||0,v.properties=_t.properties),this._resubscribeTopics[_t.topic]=v,rt.push(_t.topic)}}),this.messageIdToTopic[mt.messageId]=rt}return this.outgoing[mt.messageId]={volatile:!0,cb(rt,_t){if(!rt){let{granted:v}=_t;for(let X=0;X<v.length;X+=1)q[X].qos=v[X]}I(rt,q,_t)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(mt),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!et())&&this._storeProcessingQueue.push({invoke:et,callback:I}),this}subscribeAsync(k,T){return new Promise((I,N)=>{this.subscribe(k,T,(K,Q)=>{K?N(K):I(Q)})})}unsubscribe(k,T,I){typeof k=="string"&&(k=[k]),typeof T=="function"&&(I=T),I=I||this.noop;let N=c.validateTopics(k);if(N!==null)return x(I,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(I))return this;let K=()=>{let Q=this._nextId();if(Q===null)return this.log("No messageId left"),!1;let A={cmd:"unsubscribe",messageId:Q,unsubscriptions:[]};return typeof k=="string"?A.unsubscriptions=[k]:Array.isArray(k)&&(A.unsubscriptions=k),this.options.resubscribe&&A.unsubscriptions.forEach(H=>{delete this._resubscribeTopics[H]}),typeof T=="object"&&T.properties&&(A.properties=T.properties),this.outgoing[A.messageId]={volatile:!0,cb:I},this.log("unsubscribe: call _sendPacket"),this._sendPacket(A),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:I}),this}unsubscribeAsync(k,T){return new Promise((I,N)=>{this.unsubscribe(k,T,(K,Q)=>{K?N(K):I(Q)})})}end(k,T,I){this.log("end :: (%s)",this.options.clientId),(k==null||typeof k!="boolean")&&(I=I||T,T=k,k=!1),typeof T!="object"&&(I=I||T,T=null),this.log("end :: cb? %s",!!I),(!I||typeof I!="function")&&(I=this.noop);let N=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(Q=>{this.outgoingStore.close(A=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),I){let H=Q||A;this.log("end :: closeStores: invoking callback with args"),I(H)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},K=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,k),this._cleanUp(k,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(N)},T)};return this.disconnecting?(I(),this):(this._clearReconnect(),this.disconnecting=!0,!k&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,K,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),K()),this)}endAsync(k,T){return new Promise((I,N)=>{this.end(k,T,K=>{K?N(K):I()})})}removeOutgoingMessage(k){if(this.outgoing[k]){let{cb:T}=this.outgoing[k];this._removeOutgoingAndStoreMessage(k,()=>{T(new Error("Message removed"))})}return this}reconnect(k){this.log("client reconnect");let T=()=>{k?(this.options.incomingStore=k.incomingStore,this.options.outgoingStore=k.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=T:T(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(k=>{this.outgoing[k].volatile&&typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(k=>{typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_removeTopicAliasAndRecoverTopicName(k){let T;k.properties&&(T=k.properties.topicAlias);let I=k.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",T,I),I.length===0){if(typeof T>"u")return new Error("Unregistered Topic Alias");if(I=this.topicAliasSend.getTopicByAlias(T),typeof I>"u")return new Error("Unregistered Topic Alias");k.topic=I}T&&delete k.properties.topicAlias}_checkDisconnecting(k){return this.disconnecting&&(k&&k!==this.noop?k(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(k,T,I={}){if(T&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",T)),this.log("_cleanUp :: forced? %s",k),k)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let N=Object.assign({cmd:"disconnect"},I);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(N,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),x(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),T&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",T),T())}_storeAndSend(k,T,I){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",k.cmd);let N=k,K;if(N.cmd==="publish"&&(N=(0,h.default)(k),K=this._removeTopicAliasAndRecoverTopicName(N),K))return T&&T(K);this.outgoingStore.put(N,Q=>{if(Q)return T&&T(Q);I(),this._writePacket(k,T)})}_applyTopicAlias(k){if(this.options.protocolVersion===5&&k.cmd==="publish"){let T;k.properties&&(T=k.properties.topicAlias);let I=k.topic.toString();if(this.topicAliasSend)if(T){if(I.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",I,T),!this.topicAliasSend.put(I,T)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",I,T),new Error("Sending Topic Alias out of range")}else I.length!==0&&(this.options.autoAssignTopicAlias?(T=this.topicAliasSend.getAliasByTopic(I),T?(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",I,T)):(T=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(I,T),k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",I,T))):this.options.autoUseTopicAlias&&(T=this.topicAliasSend.getAliasByTopic(I),T&&(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",I,T))));else if(T)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",I,T),new Error("Sending Topic Alias out of range")}}_noop(k){this.log("noop ::",k)}_writePacket(k,T){this.log("_writePacket :: packet: %O",k),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",k),this.log("_writePacket :: writing to stream");let I=s.default.writeToStream(k,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",I),!I&&T&&T!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",T)):T&&(this.log("_writePacket :: invoking cb"),T())}_sendPacket(k,T,I,N){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),I=I||this.noop,T=T||this.noop;let K=this._applyTopicAlias(k);if(K){T(K);return}if(!this.connected){if(k.cmd==="auth"){this._writePacket(k,T);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(k,T,I);return}if(N){this._writePacket(k,T);return}switch(k.cmd){case"publish":break;case"pubrel":this._storeAndSend(k,T,I);return;default:this._writePacket(k,T);return}switch(k.qos){case 2:case 1:this._storeAndSend(k,T,I);break;case 0:default:this._writePacket(k,T);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(k,T,I){this.log("_storePacket :: packet: %o",k),this.log("_storePacket :: cb? %s",!!T),I=I||this.noop;let N=k;if(N.cmd==="publish"){N=(0,h.default)(k);let Q=this._removeTopicAliasAndRecoverTopicName(N);if(Q)return T&&T(Q)}let K=N.qos||0;K===0&&this.queueQoSZero||N.cmd!=="publish"?this.queue.push({packet:N,cb:T}):K>0?(T=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoingStore.put(N,Q=>{if(Q)return T&&T(Q);I()})):T&&T(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(k=!1){this.keepaliveManager&&this.options.keepalive&&(k||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let k=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&k.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let T=0;T<k.length;T++){let I={};I[k[T]]=this._resubscribeTopics[k[T]],I.resubscribe=!0,this.subscribe(I,{properties:I[k[T]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(k){if(this.disconnected){this.emit("connect",k);return}this.connackPacket=k,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let T=()=>{let I=this.outgoingStore.createStream(),N=()=>{I.destroy(),I=null,this._flushStoreProcessingQueue(),K()},K=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",N),I.on("error",A=>{K(),this._flushStoreProcessingQueue(),this.removeListener("close",N),this.emit("error",A)});let Q=()=>{if(!I)return;let A=I.read(1),H;if(!A){I.once("readable",Q);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[A.messageId]){Q();return}!this.disconnecting&&!this.reconnectTimer?(H=this.outgoing[A.messageId]?this.outgoing[A.messageId].cb:null,this.outgoing[A.messageId]={volatile:!1,cb(J,q){H&&H(J,q),Q()}},this._packetIdsDuringStoreProcessing[A.messageId]=!0,this.messageIdProvider.register(A.messageId)?this._sendPacket(A,void 0,void 0,!0):this.log("messageId: %d has already used.",A.messageId)):I.destroy&&I.destroy()};I.on("end",()=>{let A=!0;for(let H in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[H]){A=!1;break}this.removeListener("close",N),A?(K(),this._invokeAllStoreProcessingQueue(),this.emit("connect",k)):T()}),Q()};T()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let k=this._storeProcessingQueue[0];if(k&&k.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let k of this._storeProcessingQueue)k.cbStorePut&&k.cbStorePut(new Error("Connection closed")),k.callback&&k.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(k,T){delete this.outgoing[k],this.outgoingStore.del({messageId:k},(I,N)=>{T(I,N),this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue()})}};O.VERSION=b.MQTTJS_VERSION,e.default=O}),Cd=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=kc(),i=class{constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};e.default=i});function pi(e){throw new RangeError(Ic[e])}function Fa(e,t){let i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]);let o=function(r,s){let a=[],l=r.length;for(;l--;)a[l]=s(r[l]);return a}((e=e.replace(Tc,".")).split("."),t).join(".");return n+o}function Wa(e){let t=[],i=0,n=e.length;for(;i<n;){let o=e.charCodeAt(i++);if(o>=55296&&o<=56319&&i<n){let r=e.charCodeAt(i++);(64512&r)==56320?t.push(((1023&o)<<10)+(1023&r)+65536):(t.push(o),i--)}else t.push(o)}return t}var za,Ha,Tc,Ic,_e,Mn,Fr,Wr,zr,Hr,ri,Od=ee(()=>{ct(),ft(),ut(),za=/^xn--/,Ha=/[^\0-\x7E]/,Tc=/[\x2E\u3002\uFF0E\uFF61]/g,Ic={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_e=Math.floor,Mn=String.fromCharCode,Fr=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Wr=function(e,t,i){let n=0;for(e=i?_e(e/700):e>>1,e+=_e(e/t);e>455;n+=36)e=_e(e/35);return _e(n+36*e/(e+38))},zr=function(e){let t=[],i=e.length,n=0,o=128,r=72,s=e.lastIndexOf("-");s<0&&(s=0);for(let l=0;l<s;++l)e.charCodeAt(l)>=128&&pi("not-basic"),t.push(e.charCodeAt(l));for(let l=s>0?s+1:0;l<i;){let h=n;for(let u=1,d=36;;d+=36){l>=i&&pi("invalid-input");let g=(a=e.charCodeAt(l++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(g>=36||g>_e((2147483647-n)/u))&&pi("overflow"),n+=g*u;let b=d<=r?1:d>=r+26?26:d-r;if(g<b)break;let y=36-b;u>_e(2147483647/y)&&pi("overflow"),u*=y}let c=t.length+1;r=Wr(n-h,c,h==0),_e(n/c)>2147483647-o&&pi("overflow"),o+=_e(n/c),n%=c,t.splice(n++,0,o)}var a;return String.fromCodePoint(...t)},Hr=function(e){let t=[],i=(e=Wa(e)).length,n=128,o=0,r=72;for(let l of e)l<128&&t.push(Mn(l));let s=t.length,a=s;for(s&&t.push("-");a<i;){let l=2147483647;for(let c of e)c>=n&&c<l&&(l=c);let h=a+1;l-n>_e((2147483647-o)/h)&&pi("overflow"),o+=(l-n)*h,n=l;for(let c of e)if(c<n&&++o>2147483647&&pi("overflow"),c==n){let u=o;for(let d=36;;d+=36){let g=d<=r?1:d>=r+26?26:d-r;if(u<g)break;let b=u-g,y=36-g;t.push(Mn(Fr(g+b%y,0))),u=_e(b/y)}t.push(Mn(Fr(u,0))),r=Wr(o,h,a==s),o=0,++a}++o,++n}return t.join("")},ri={version:"2.1.0",ucs2:{decode:Wa,encode:e=>String.fromCodePoint(...e)},decode:zr,encode:Hr,toASCII:function(e){return Fa(e,function(t){return Ha.test(t)?"xn--"+Hr(t):t})},toUnicode:function(e){return Fa(e,function(t){return za.test(t)?zr(t.slice(4).toLowerCase()):t})}},ri.decode,ri.encode,ri.toASCII,ri.toUnicode,ri.ucs2,ri.version});function Pd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var $a,Ni,Va,Ie,Md=ee(()=>{ct(),ft(),ut(),$a=function(e,t,i,n){t=t||"&",i=i||"=";var o={};if(typeof e!="string"||e.length===0)return o;var r=/\+/g;e=e.split(t);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var h,c,u,d,g=e[l].replace(r,"%20"),b=g.indexOf(i);b>=0?(h=g.substr(0,b),c=g.substr(b+1)):(h=g,c=""),u=decodeURIComponent(h),d=decodeURIComponent(c),Pd(o,u)?Array.isArray(o[u])?o[u].push(d):o[u]=[o[u],d]:o[u]=d}return o},Ni=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Va=function(e,t,i,n){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var r=encodeURIComponent(Ni(o))+i;return Array.isArray(e[o])?e[o].map(function(s){return r+encodeURIComponent(Ni(s))}).join(t):r+encodeURIComponent(Ni(e[o]))}).join(t):n?encodeURIComponent(Ni(n))+i+encodeURIComponent(Ni(e)):""},Ie={},Ie.decode=Ie.parse=$a,Ie.encode=Ie.stringify=Va,Ie.decode,Ie.encode,Ie.parse,Ie.stringify});function So(){throw new Error("setTimeout has not been defined")}function xo(){throw new Error("clearTimeout has not been defined")}function Cc(e){if(We===setTimeout)return setTimeout(e,0);if((We===So||!We)&&setTimeout)return We=setTimeout,setTimeout(e,0);try{return We(e,0)}catch{try{return We.call(null,e,0)}catch{return We.call(this||Ii,e,0)}}}function Rd(){Ci&&ki&&(Ci=!1,ki.length?Me=ki.concat(Me):gn=-1,Me.length&&Oc())}function Oc(){if(!Ci){var e=Cc(Rd);Ci=!0;for(var t=Me.length;t;){for(ki=Me,Me=[];++gn<t;)ki&&ki[gn].run();gn=-1,t=Me.length}ki=null,Ci=!1,function(i){if(ze===clearTimeout)return clearTimeout(i);if((ze===xo||!ze)&&clearTimeout)return ze=clearTimeout,clearTimeout(i);try{ze(i)}catch{try{return ze.call(null,i)}catch{return ze.call(this||Ii,i)}}}(e)}}function qa(e,t){(this||Ii).fun=e,(this||Ii).array=t}function Le(){}var Ya,We,ze,Ii,$t,ki,Me,Ci,gn,Ht,Bd=ee(()=>{ct(),ft(),ut(),Ii=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,$t=Ya={},function(){try{We=typeof setTimeout=="function"?setTimeout:So}catch{We=So}try{ze=typeof clearTimeout=="function"?clearTimeout:xo}catch{ze=xo}}(),Me=[],Ci=!1,gn=-1,$t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Me.push(new qa(e,t)),Me.length!==1||Ci||Cc(Oc)},qa.prototype.run=function(){(this||Ii).fun.apply(null,(this||Ii).array)},$t.title="browser",$t.browser=!0,$t.env={},$t.argv=[],$t.version="",$t.versions={},$t.on=Le,$t.addListener=Le,$t.once=Le,$t.off=Le,$t.removeListener=Le,$t.removeAllListeners=Le,$t.emit=Le,$t.prependListener=Le,$t.prependOnceListener=Le,$t.listeners=function(e){return[]},$t.binding=function(e){throw new Error("process.binding is not supported")},$t.cwd=function(){return"/"},$t.chdir=function(e){throw new Error("process.chdir is not supported")},$t.umask=function(){return 0},Ht=Ya,Ht.addListener,Ht.argv,Ht.binding,Ht.browser,Ht.chdir,Ht.cwd,Ht.emit,Ht.env,Ht.listeners,Ht.nextTick,Ht.off,Ht.on,Ht.once,Ht.prependListener,Ht.prependOnceListener,Ht.removeAllListeners,Ht.removeListener,Ht.title,Ht.umask,Ht.version,Ht.versions});function Ld(){if(Eo)return nr;Eo=!0;var e=nr={},t,i;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function r(y){if(t===setTimeout)return setTimeout(y,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this||wi,y,0)}}}function s(y){if(i===clearTimeout)return clearTimeout(y);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(y);try{return i(y)}catch{try{return i.call(null,y)}catch{return i.call(this||wi,y)}}}var a=[],l=!1,h,c=-1;function u(){!l||!h||(l=!1,h.length?a=h.concat(a):c=-1,a.length&&d())}function d(){if(!l){var y=r(u);l=!0;for(var _=a.length;_;){for(h=a,a=[];++c<_;)h&&h[c].run();c=-1,_=a.length}h=null,l=!1,s(y)}}e.nextTick=function(y){var _=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)_[E-1]=arguments[E];a.push(new g(y,_)),a.length===1&&!l&&r(d)};function g(y,_){(this||wi).fun=y,(this||wi).array=_}g.prototype.run=function(){(this||wi).fun.apply(null,(this||wi).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},nr}var nr,Eo,wi,Wt,Pc=ee(()=>{ct(),ft(),ut(),nr={},Eo=!1,wi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Wt=Ld(),Wt.platform="browser",Wt.addListener,Wt.argv,Wt.binding,Wt.browser,Wt.chdir,Wt.cwd,Wt.emit,Wt.env,Wt.listeners,Wt.nextTick,Wt.off,Wt.on,Wt.once,Wt.prependListener,Wt.prependOnceListener,Wt.removeAllListeners,Wt.removeListener,Wt.title,Wt.umask,Wt.version,Wt.versions});function Dd(){if(ko)return rr;ko=!0;var e=Wt;function t(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function i(r,s){for(var a="",l=0,h=-1,c=0,u,d=0;d<=r.length;++d){if(d<r.length)u=r.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(h===d-1||c===1))if(h!==d-1&&c===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",l=0):(a=a.slice(0,g),l=a.length-1-a.lastIndexOf("/")),h=d,c=0;continue}}else if(a.length===2||a.length===1){a="",l=0,h=d,c=0;continue}}s&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+r.slice(h+1,d):a=r.slice(h+1,d),l=d-h-1;h=d,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(r,s){var a=s.dir||s.root,l=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+l:a+r+l:l}var o={resolve:function(){for(var r="",s=!1,a,l=arguments.length-1;l>=-1&&!s;l--){var h;l>=0?h=arguments[l]:(a===void 0&&(a=e.cwd()),h=a),t(h),h.length!==0&&(r=h+"/"+r,s=h.charCodeAt(0)===47)}return r=i(r,!s),s?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(t(r),r.length===0)return".";var s=r.charCodeAt(0)===47,a=r.charCodeAt(r.length-1)===47;return r=i(r,!s),r.length===0&&!s&&(r="."),r.length>0&&a&&(r+="/"),s?"/"+r:r},isAbsolute:function(r){return t(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,s=0;s<arguments.length;++s){var a=arguments[s];t(a),a.length>0&&(r===void 0?r=a:r+="/"+a)}return r===void 0?".":o.normalize(r)},relative:function(r,s){if(t(r),t(s),r===s||(r=o.resolve(r),s=o.resolve(s),r===s))return"";for(var a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,h=l-a,c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var u=s.length,d=u-c,g=h<d?h:d,b=-1,y=0;y<=g;++y){if(y===g){if(d>g){if(s.charCodeAt(c+y)===47)return s.slice(c+y+1);if(y===0)return s.slice(c+y)}else h>g&&(r.charCodeAt(a+y)===47?b=y:y===0&&(b=0));break}var _=r.charCodeAt(a+y),E=s.charCodeAt(c+y);if(_!==E)break;_===47&&(b=y)}var x="";for(y=a+b+1;y<=l;++y)(y===l||r.charCodeAt(y)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+s.slice(c+b):(c+=b,s.charCodeAt(c)===47&&++c,s.slice(c))},_makeLong:function(r){return r},dirname:function(r){if(t(r),r.length===0)return".";for(var s=r.charCodeAt(0),a=s===47,l=-1,h=!0,c=r.length-1;c>=1;--c)if(s=r.charCodeAt(c),s===47){if(!h){l=c;break}}else h=!1;return l===-1?a?"/":".":a&&l===1?"//":r.slice(0,l)},basename:function(r,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');t(r);var a=0,l=-1,h=!0,c;if(s!==void 0&&s.length>0&&s.length<=r.length){if(s.length===r.length&&s===r)return"";var u=s.length-1,d=-1;for(c=r.length-1;c>=0;--c){var g=r.charCodeAt(c);if(g===47){if(!h){a=c+1;break}}else d===-1&&(h=!1,d=c+1),u>=0&&(g===s.charCodeAt(u)?--u===-1&&(l=c):(u=-1,l=d))}return a===l?l=d:l===-1&&(l=r.length),r.slice(a,l)}else{for(c=r.length-1;c>=0;--c)if(r.charCodeAt(c)===47){if(!h){a=c+1;break}}else l===-1&&(h=!1,l=c+1);return l===-1?"":r.slice(a,l)}},extname:function(r){t(r);for(var s=-1,a=0,l=-1,h=!0,c=0,u=r.length-1;u>=0;--u){var d=r.charCodeAt(u);if(d===47){if(!h){a=u+1;break}continue}l===-1&&(h=!1,l=u+1),d===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||l===-1||c===0||c===1&&s===l-1&&s===a+1?"":r.slice(s,l)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return n("/",r)},parse:function(r){t(r);var s={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return s;var a=r.charCodeAt(0),l=a===47,h;l?(s.root="/",h=1):h=0;for(var c=-1,u=0,d=-1,g=!0,b=r.length-1,y=0;b>=h;--b){if(a=r.charCodeAt(b),a===47){if(!g){u=b+1;break}continue}d===-1&&(g=!1,d=b+1),a===46?c===-1?c=b:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||d===-1||y===0||y===1&&c===d-1&&c===u+1?d!==-1&&(u===0&&l?s.base=s.name=r.slice(1,d):s.base=s.name=r.slice(u,d)):(u===0&&l?(s.name=r.slice(1,c),s.base=r.slice(1,d)):(s.name=r.slice(u,c),s.base=r.slice(u,d)),s.ext=r.slice(c,d)),u>0?s.dir=r.slice(0,u-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,rr=o,rr}var rr,ko,Ao,Nd=ee(()=>{ct(),ft(),ut(),Pc(),rr={},ko=!1,Ao=Dd()}),Mc={};Mi(Mc,{URL:()=>Qc,Url:()=>Vc,default:()=>Lt,fileURLToPath:()=>Rc,format:()=>qc,parse:()=>Gc,pathToFileURL:()=>Bc,resolve:()=>Yc,resolveObject:()=>Kc});function ge(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Zi(e,t,i){if(e&&ve.isObject(e)&&e instanceof ge)return e;var n=new ge;return n.parse(e,t,i),n}function jd(){if(To)return sr;To=!0;var e=Ht;function t(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function i(r,s){for(var a="",l=0,h=-1,c=0,u,d=0;d<=r.length;++d){if(d<r.length)u=r.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(h===d-1||c===1))if(h!==d-1&&c===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",l=0):(a=a.slice(0,g),l=a.length-1-a.lastIndexOf("/")),h=d,c=0;continue}}else if(a.length===2||a.length===1){a="",l=0,h=d,c=0;continue}}s&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+r.slice(h+1,d):a=r.slice(h+1,d),l=d-h-1;h=d,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(r,s){var a=s.dir||s.root,l=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+l:a+r+l:l}var o={resolve:function(){for(var r="",s=!1,a,l=arguments.length-1;l>=-1&&!s;l--){var h;l>=0?h=arguments[l]:(a===void 0&&(a=e.cwd()),h=a),t(h),h.length!==0&&(r=h+"/"+r,s=h.charCodeAt(0)===47)}return r=i(r,!s),s?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(t(r),r.length===0)return".";var s=r.charCodeAt(0)===47,a=r.charCodeAt(r.length-1)===47;return r=i(r,!s),r.length===0&&!s&&(r="."),r.length>0&&a&&(r+="/"),s?"/"+r:r},isAbsolute:function(r){return t(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,s=0;s<arguments.length;++s){var a=arguments[s];t(a),a.length>0&&(r===void 0?r=a:r+="/"+a)}return r===void 0?".":o.normalize(r)},relative:function(r,s){if(t(r),t(s),r===s||(r=o.resolve(r),s=o.resolve(s),r===s))return"";for(var a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,h=l-a,c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var u=s.length,d=u-c,g=h<d?h:d,b=-1,y=0;y<=g;++y){if(y===g){if(d>g){if(s.charCodeAt(c+y)===47)return s.slice(c+y+1);if(y===0)return s.slice(c+y)}else h>g&&(r.charCodeAt(a+y)===47?b=y:y===0&&(b=0));break}var _=r.charCodeAt(a+y),E=s.charCodeAt(c+y);if(_!==E)break;_===47&&(b=y)}var x="";for(y=a+b+1;y<=l;++y)(y===l||r.charCodeAt(y)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+s.slice(c+b):(c+=b,s.charCodeAt(c)===47&&++c,s.slice(c))},_makeLong:function(r){return r},dirname:function(r){if(t(r),r.length===0)return".";for(var s=r.charCodeAt(0),a=s===47,l=-1,h=!0,c=r.length-1;c>=1;--c)if(s=r.charCodeAt(c),s===47){if(!h){l=c;break}}else h=!1;return l===-1?a?"/":".":a&&l===1?"//":r.slice(0,l)},basename:function(r,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');t(r);var a=0,l=-1,h=!0,c;if(s!==void 0&&s.length>0&&s.length<=r.length){if(s.length===r.length&&s===r)return"";var u=s.length-1,d=-1;for(c=r.length-1;c>=0;--c){var g=r.charCodeAt(c);if(g===47){if(!h){a=c+1;break}}else d===-1&&(h=!1,d=c+1),u>=0&&(g===s.charCodeAt(u)?--u===-1&&(l=c):(u=-1,l=d))}return a===l?l=d:l===-1&&(l=r.length),r.slice(a,l)}else{for(c=r.length-1;c>=0;--c)if(r.charCodeAt(c)===47){if(!h){a=c+1;break}}else l===-1&&(h=!1,l=c+1);return l===-1?"":r.slice(a,l)}},extname:function(r){t(r);for(var s=-1,a=0,l=-1,h=!0,c=0,u=r.length-1;u>=0;--u){var d=r.charCodeAt(u);if(d===47){if(!h){a=u+1;break}continue}l===-1&&(h=!1,l=u+1),d===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||l===-1||c===0||c===1&&s===l-1&&s===a+1?"":r.slice(s,l)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return n("/",r)},parse:function(r){t(r);var s={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return s;var a=r.charCodeAt(0),l=a===47,h;l?(s.root="/",h=1):h=0;for(var c=-1,u=0,d=-1,g=!0,b=r.length-1,y=0;b>=h;--b){if(a=r.charCodeAt(b),a===47){if(!g){u=b+1;break}continue}d===-1&&(g=!1,d=b+1),a===46?c===-1?c=b:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||d===-1||y===0||y===1&&c===d-1&&c===u+1?d!==-1&&(u===0&&l?s.base=s.name=r.slice(1,d):s.base=s.name=r.slice(u,d)):(u===0&&l?(s.name=r.slice(1,c),s.base=r.slice(1,d)):(s.name=r.slice(u,c),s.base=r.slice(u,d)),s.ext=r.slice(c,d)),u>0?s.dir=r.slice(0,u-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,sr=o,sr}function Ud(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return dr?Fd(e):Wd(e)}function Fd(e){let t=e.hostname,i=e.pathname;for(let n=0;n<i.length;n++)if(i[n]==="%"){let o=i.codePointAt(n+2)||32;if(i[n+1]==="2"&&o===102||i[n+1]==="5"&&o===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(i=i.replace(Uc,"\\"),i=decodeURIComponent(i),t!=="")return`\\\\${t}${i}`;{let n=i.codePointAt(1)|32,o=i[2];if(n<Nc||n>jc||o!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return i.slice(1)}}function Wd(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){let n=t.codePointAt(i+2)||32;if(t[i+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function zd(e){let t=Io.resolve(e),i=e.charCodeAt(e.length-1);(i===Dc||dr&&i===Lc)&&t[t.length-1]!==Io.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(Fc,"%25")),!dr&&t.includes("\\")&&(t=t.replace(Wc,"%5C")),t.includes(`
`)&&(t=t.replace(zc,"%0A")),t.includes("\r")&&(t=t.replace(Hc,"%0D")),t.includes("	")&&(t=t.replace($c,"%09")),n.pathname=t,n}function Rc(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return pr?Hd(e):$d(e)}function Hd(e){let t=e.hostname,i=e.pathname;for(let n=0;n<i.length;n++)if(i[n]==="%"){let o=i.codePointAt(n+2)||32;if(i[n+1]==="2"&&o===102||i[n+1]==="5"&&o===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(i=i.replace(eu,"\\"),i=decodeURIComponent(i),t!=="")return`\\\\${t}${i}`;{let n=i.codePointAt(1)|32,o=i[2];if(n<Zc||n>tu||o!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return i.slice(1)}}function $d(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){let n=t.codePointAt(i+2)||32;if(t[i+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function Bc(e){let t=Ao.resolve(e),i=e.charCodeAt(e.length-1);(i===Jc||pr&&i===Xc)&&t[t.length-1]!==Ao.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(iu,"%25")),!pr&&t.includes("\\")&&(t=t.replace(nu,"%5C")),t.includes(`
`)&&(t=t.replace(ru,"%0A")),t.includes("\r")&&(t=t.replace(su,"%0D")),t.includes("	")&&(t=t.replace(ou,"%09")),n.pathname=t,n}var Lt,Ka,ve,Ga,Qa,Xa,Ja,Rn,$r,Vr,qr,Za,tl,Bn,gi,Ln,sr,To,Io,el,Lc,Dc,Nc,jc,dr,Uc,Fc,Wc,zc,Hc,$c,il,Vc,qc,Yc,Kc,Gc,Qc,Xc,Jc,Zc,tu,pr,eu,iu,nu,ru,su,ou,Vd=ee(()=>{ct(),ft(),ut(),Od(),Md(),Bd(),Nd(),Pc(),Lt={},Ka=ri,ve={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Lt.parse=Zi,Lt.resolve=function(e,t){return Zi(e,!1,!0).resolve(t)},Lt.resolveObject=function(e,t){return e?Zi(e,!1,!0).resolveObject(t):t},Lt.format=function(e){return ve.isString(e)&&(e=Zi(e)),e instanceof ge?e.format():ge.prototype.format.call(e)},Lt.Url=ge,Ga=/^([a-z0-9.+-]+:)/i,Qa=/:[0-9]*$/,Xa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ja=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Rn=["'"].concat(Ja),$r=["%","/","?",";","#"].concat(Rn),Vr=["/","?","#"],qr=/^[+a-z0-9A-Z_-]{0,63}$/,Za=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tl={javascript:!0,"javascript:":!0},Bn={javascript:!0,"javascript:":!0},gi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ln=Ie,ge.prototype.parse=function(e,t,i){if(!ve.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",r=e.split(o);r[0]=r[0].replace(/\\/g,"/");var s=e=r.join(o);if(s=s.trim(),!i&&e.split("#").length===1){var a=Xa.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?Ln.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=Ga.exec(s);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,s=s.substr(l.length)}if(i||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=s.substr(0,2)==="//";!c||l&&Bn[l]||(s=s.substr(2),this.slashes=!0)}if(!Bn[l]&&(c||l&&!gi[l])){for(var u,d,g=-1,b=0;b<Vr.length;b++)(y=s.indexOf(Vr[b]))!==-1&&(g===-1||y<g)&&(g=y);for((d=g===-1?s.lastIndexOf("@"):s.lastIndexOf("@",g))!==-1&&(u=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(u)),g=-1,b=0;b<$r.length;b++){var y;(y=s.indexOf($r[b]))!==-1&&(g===-1||y<g)&&(g=y)}g===-1&&(g=s.length),this.host=s.slice(0,g),s=s.slice(g),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var E=this.hostname.split(/\./),x=(b=0,E.length);b<x;b++){var w=E[b];if(w&&!w.match(qr)){for(var O="",P=0,k=w.length;P<k;P++)w.charCodeAt(P)>127?O+="x":O+=w[P];if(!O.match(qr)){var T=E.slice(0,b),I=E.slice(b+1),N=w.match(Za);N&&(T.push(N[1]),I.unshift(N[2])),I.length&&(s="/"+I.join(".")+s),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Ka.toASCII(this.hostname));var K=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+K,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!tl[h])for(b=0,x=Rn.length;b<x;b++){var A=Rn[b];if(s.indexOf(A)!==-1){var H=encodeURIComponent(A);H===A&&(H=escape(A)),s=s.split(A).join(H)}}var J=s.indexOf("#");J!==-1&&(this.hash=s.substr(J),s=s.slice(0,J));var q=s.indexOf("?");if(q!==-1?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=Ln.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),gi[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){K=this.pathname||"";var st=this.search||"";this.path=K+st}return this.href=this.format(),this},ge.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,r="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&ve.isObject(this.query)&&Object.keys(this.query).length&&(r=Ln.stringify(this.query));var s=this.search||r&&"?"+r||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||gi[t])&&o!==!1?(o="//"+(o||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),t+o+(i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(s=s.replace("#","%23"))+n},ge.prototype.resolve=function(e){return this.resolveObject(Zi(e,!1,!0)).format()},ge.prototype.resolveObject=function(e){if(ve.isString(e)){var t=new ge;t.parse(e,!1,!0),e=t}for(var i=new ge,n=Object.keys(this),o=0;o<n.length;o++){var r=n[o];i[r]=this[r]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(i[l]=e[l])}return gi[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!gi[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];i[u]=e[u]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||Bn[e.protocol])i.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var g=i.pathname||"",b=i.search||"";i.path=g+b}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var y=i.pathname&&i.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",E=_||y||i.host&&e.pathname,x=E,w=i.pathname&&i.pathname.split("/")||[],O=(d=e.pathname&&e.pathname.split("/")||[],i.protocol&&!gi[i.protocol]);if(O&&(i.hostname="",i.port=null,i.host&&(w[0]===""?w[0]=i.host:w.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(d[0]===""?d[0]=e.host:d.unshift(e.host)),e.host=null),E=E&&(d[0]===""||w[0]==="")),_)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),i.search=e.search,i.query=e.query;else if(!ve.isNullOrUndefined(e.search))return O&&(i.hostname=i.host=w.shift(),(N=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=N.shift(),i.host=i.hostname=N.shift())),i.search=e.search,i.query=e.query,ve.isNull(i.pathname)&&ve.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var P=w.slice(-1)[0],k=(i.host||e.host||w.length>1)&&(P==="."||P==="..")||P==="",T=0,I=w.length;I>=0;I--)(P=w[I])==="."?w.splice(I,1):P===".."?(w.splice(I,1),T++):T&&(w.splice(I,1),T--);if(!E&&!x)for(;T--;T)w.unshift("..");!E||w[0]===""||w[0]&&w[0].charAt(0)==="/"||w.unshift(""),k&&w.join("/").substr(-1)!=="/"&&w.push("");var N,K=w[0]===""||w[0]&&w[0].charAt(0)==="/";return O&&(i.hostname=i.host=K?"":w.length?w.shift():"",(N=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=N.shift(),i.host=i.hostname=N.shift())),(E=E||i.host&&w.length)&&!K&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),ve.isNull(i.pathname)&&ve.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},ge.prototype.parseHost=function(){var e=this.host,t=Qa.exec(e);t&&((t=t[0])!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},Lt.Url,Lt.format,Lt.resolve,Lt.resolveObject,sr={},To=!1,Io=jd(),el=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Lt.URL=typeof URL<"u"?URL:null,Lt.pathToFileURL=zd,Lt.fileURLToPath=Ud,Lt.Url,Lt.format,Lt.resolve,Lt.resolveObject,Lt.URL,Lc=92,Dc=47,Nc=97,jc=122,dr=el==="win32",Uc=/\//g,Fc=/%/g,Wc=/\\/g,zc=/\n/g,Hc=/\r/g,$c=/\t/g,il=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Lt.URL=typeof URL<"u"?URL:null,Lt.pathToFileURL=Bc,Lt.fileURLToPath=Rc,Vc=Lt.Url,qc=Lt.format,Yc=Lt.resolve,Kc=Lt.resolveObject,Gc=Lt.parse,Qc=Lt.URL,Xc=92,Jc=47,Zc=97,tu=122,pr=il==="win32",eu=/\//g,iu=/%/g,nu=/\\/g,ru=/\n/g,su=/\r/g,ou=/\t/g}),qd=bt((e,t)=>{ct(),ft(),ut(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Jo=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var t=Li(),i=(ne(),Nt(ie));function n(r,s){let a=new Array(r.length);for(let l=0;l<r.length;l++)typeof r[l].chunk=="string"?a[l]=i.Buffer.from(r[l].chunk,"utf8"):a[l]=r[l].chunk;this._write(i.Buffer.concat(a),"binary",s)}e.writev=n;var o=class extends t.Duplex{constructor(r,s,a){super({objectMode:!0}),this.proxy=s,this.socket=a,this.writeQueue=[],r.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{this.destroyed||this.push(l)})}_read(r){this.proxy.read(r)}_write(r,s,a){this.isSocketOpen?this.writeToProxy(r,s,a):this.writeQueue.push({chunk:r,encoding:s,cb:a})}_final(r){this.writeQueue=[],this.proxy.end(r)}_destroy(r,s){this.writeQueue=[],this.proxy.destroy(),s(r)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(r,s,a){this.proxy.write(r,s)===!1?this.proxy.once("drain",a):a()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:r,encoding:s,cb:a}=this.writeQueue.shift();this.writeToProxy(r,s,a)}}};e.BufferedDuplex=o}),Dn=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var i=(ne(),Nt(ie)),n=t(qd()),o=t(Ge()),r=Li(),s=t(Cr()),a=Jo(),l=(0,o.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(E,x){let w=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(w=E.transformWsUrl(w,E,x)),w}function u(E){let x=E;return E.port||(E.protocol==="wss"?x.port=443:x.port=80),E.path||(x.path="/"),E.wsOptions||(x.wsOptions={}),!s.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&h.forEach(w=>{Object.prototype.hasOwnProperty.call(E,w)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,w)&&(x.wsOptions[w]=E[w])}),x}function d(E){let x=u(E);if(x.hostname||(x.hostname=x.host),!x.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);x.hostname=w.hostname,x.port||(x.port=Number(w.port))}return x.objectMode===void 0&&(x.objectMode=!(x.binary===!0||x.binary===void 0)),x}function g(E,x,w){l("createWebSocket"),l(`protocol: ${w.protocolId} ${w.protocolVersion}`);let O=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${x} and protocol: ${O}`);let P;return w.createWebsocket?P=w.createWebsocket(x,[O],w):P=new n.default(x,[O],w.wsOptions),P}function b(E,x){let w=x.protocolId==="MQIsdp"&&x.protocolVersion===3?"mqttv3.1":"mqtt",O=c(x,E),P;return x.createWebsocket?P=x.createWebsocket(O,[w],x):P=new WebSocket(O,[w]),P.binaryType="arraybuffer",P}var y=(E,x)=>{l("streamBuilder");let w=u(x);w.hostname=w.hostname||w.host||"localhost";let O=c(w,E),P=g(E,O,w),k=n.default.createWebSocketStream(P,w.wsOptions);return k.url=O,P.on("close",()=>{k.destroy()}),k};e.streamBuilder=y;var _=(E,x)=>{l("browserStreamBuilder");let w,O=d(x).browserBufferSize||1024*512,P=x.browserBufferTimeout||1e3,k=!x.objectMode,T=b(E,x),I=K(x,q,st);x.objectMode||(I._writev=a.writev.bind(I)),I.on("close",()=>{T.close()});let N=typeof T.addEventListener<"u";T.readyState===T.OPEN?(w=I,w.socket=T):(w=new a.BufferedDuplex(x,I,T),N?T.addEventListener("open",Q):T.onopen=Q),N?(T.addEventListener("close",A),T.addEventListener("error",H),T.addEventListener("message",J)):(T.onclose=A,T.onerror=H,T.onmessage=J);function K(et,$,mt){let rt=new r.Transform({objectMode:et.objectMode});return rt._write=$,rt._flush=mt,rt}function Q(){l("WebSocket onOpen"),w instanceof a.BufferedDuplex&&w.socketReady()}function A(et){l("WebSocket onClose",et),w.end(),w.destroy()}function H(et){l("WebSocket onError",et);let $=new Error("WebSocket error");$.event=et,w.destroy($)}async function J(et){let{data:$}=et;$ instanceof ArrayBuffer?$=i.Buffer.from($):$ instanceof Blob?$=i.Buffer.from(await new Response($).arrayBuffer()):$=i.Buffer.from($,"utf8"),I&&!I.destroyed&&I.push($)}function q(et,$,mt){if(T.bufferedAmount>O){setTimeout(q,P,et,$,mt);return}k&&typeof et=="string"&&(et=i.Buffer.from(et,"utf8"));try{T.send(et)}catch(rt){return mt(rt)}mt()}function st(et){T.close(),et()}return w};e.browserStreamBuilder=_}),Zo={};Mi(Zo,{Server:()=>zt,Socket:()=>zt,Stream:()=>zt,_createServerHandle:()=>zt,_normalizeArgs:()=>zt,_setSimultaneousAccepts:()=>zt,connect:()=>zt,createConnection:()=>zt,createServer:()=>zt,default:()=>au,isIP:()=>zt,isIPv4:()=>zt,isIPv6:()=>zt});function zt(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var au,lu=ee(()=>{ct(),ft(),ut(),au={_createServerHandle:zt,_normalizeArgs:zt,_setSimultaneousAccepts:zt,connect:zt,createConnection:zt,createServer:zt,isIP:zt,isIPv4:zt,isIPv6:zt,Server:zt,Socket:zt,Stream:zt}}),nl=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t((lu(),Nt(Zo))),n=t(Ge()),o=(0,n.default)("mqttjs:tcp"),r=(s,a)=>{a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost";let{port:l,path:h}=a,c=a.hostname;return o("port %d and host %s",l,c),i.default.createConnection({port:l,host:c,path:h})};e.default=r}),hu={};Mi(hu,{default:()=>cu});var cu,Yd=ee(()=>{ct(),ft(),ut(),cu={}}),rl=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=t((Yd(),Nt(hu))),n=t((lu(),Nt(Zo))),o=t(Ge()),r=(0,o.default)("mqttjs:tls"),s=(a,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",n.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,r("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let h=i.default.connect(l);h.on("secureConnect",()=>{l.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",c)});function c(u){l.rejectUnauthorized&&a.emit("error",u),h.end()}return h.on("error",c),h};e.default=s}),sl=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=(ne(),Nt(ie)),i=Li(),n=Jo(),o,r,s;function a(){let d=new i.Transform;return d._write=(g,b,y)=>{o.send({data:g.buffer,success(){y()},fail(_){y(new Error(_))}})},d._flush=g=>{o.close({success(){g()}})},d}function l(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function h(d,g){let b=d.protocol==="wxs"?"wss":"ws",y=`${b}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(y=`${b}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(y=d.transformWsUrl(y,d,g)),y}function c(){o.onOpen(()=>{s.socketReady()}),o.onMessage(d=>{let{data:g}=d;g instanceof ArrayBuffer?g=t.Buffer.from(g):g=t.Buffer.from(g,"utf8"),r.push(g)}),o.onClose(()=>{s.emit("close"),s.end(),s.destroy()}),o.onError(d=>{let g=new Error(d.errMsg);s.destroy(g)})}var u=(d,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let b=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";l(g);let y=h(g,d);o=wx.connectSocket({url:y,protocols:[b]}),r=a(),s=new n.BufferedDuplex(g,r,o),s._destroy=(E,x)=>{o.close({success(){x&&x(E)}})};let _=s.destroy;return s.destroy=(E,x)=>(s.destroy=_,setTimeout(()=>{o.close({fail(){s._destroy(E,x)}})},0),s),c(),s};e.default=u}),ol=bt(e=>{ct(),ft(),ut(),Object.defineProperty(e,"__esModule",{value:!0});var t=(ne(),Nt(ie)),i=Li(),n=Jo(),o,r,s,a=!1;function l(){let g=new i.Transform;return g._write=(b,y,_)=>{o.sendSocketMessage({data:b.buffer,success(){_()},fail(){_(new Error)}})},g._flush=b=>{o.closeSocket({success(){b()}})},g}function h(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,b){let y=g.protocol==="alis"?"wss":"ws",_=`${y}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(_=`${y}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(_=g.transformWsUrl(_,g,b)),_}function u(){a||(a=!0,o.onSocketOpen(()=>{s.socketReady()}),o.onSocketMessage(g=>{if(typeof g.data=="string"){let b=t.Buffer.from(g.data,"base64");r.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let y=b.result;y instanceof ArrayBuffer?y=t.Buffer.from(y):y=t.Buffer.from(y,"utf8"),r.push(y)}),b.readAsArrayBuffer(g.data)}}),o.onSocketClose(()=>{s.end(),s.destroy()}),o.onSocketError(g=>{s.destroy(g)}))}var d=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let y=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";h(b);let _=c(b,g);return o=b.my,o.connectSocket({url:_,protocols:y}),r=l(),s=new n.BufferedDuplex(b,r,o),u(),s};e.default=d}),Kd=bt(e=>{ct(),ft(),ut();var t=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var i=t(Ge()),n=t((Vd(),Nt(Mc))),o=t(wo()),r=t(Cr());typeof(Rt==null?void 0:Rt.nextTick)!="function"&&(Rt.nextTick=setImmediate);var s=(0,i.default)("mqttjs"),a=null;function l(u){let d;u.auth&&(d=u.auth.match(/^(.+):(.+)$/),d?(u.username=d[1],u.password=d[2]):u.username=u.auth)}function h(u,d){var g,b,y,_;if(s("connecting to an MQTT broker..."),typeof u=="object"&&!d&&(d=u,u=""),d=d||{},u&&typeof u=="string"){let w=n.default.parse(u,!0),O={};if(w.port!=null&&(O.port=Number(w.port)),O.host=w.hostname,O.query=w.query,O.auth=w.auth,O.protocol=w.protocol,O.path=w.path,O.protocol=(g=O.protocol)===null||g===void 0?void 0:g.replace(/:$/,""),d=Object.assign(Object.assign({},O),d),!d.protocol)throw new Error("Missing protocol")}if(d.unixSocket=d.unixSocket||((b=d.protocol)===null||b===void 0?void 0:b.includes("+unix")),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!(!((y=d.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((_=d.protocol)===null||_===void 0)&&_.startsWith("wx"))&&delete d.path,l(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(a||(a={},!r.default&&!d.forceNativeWebSocket?(a.ws=Dn().streamBuilder,a.wss=Dn().streamBuilder,a.mqtt=nl().default,a.tcp=nl().default,a.ssl=rl().default,a.tls=a.ssl,a.mqtts=rl().default):(a.ws=Dn().browserStreamBuilder,a.wss=Dn().browserStreamBuilder,a.wx=sl().default,a.wxs=sl().default,a.ali=ol().default,a.alis=ol().default)),!a[d.protocol]){let w=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((O,P)=>w&&P%2===0?!1:typeof a[O]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function E(w){return d.servers&&((!w._reconnectCount||w._reconnectCount===d.servers.length)&&(w._reconnectCount=0),d.host=d.servers[w._reconnectCount].host,d.port=d.servers[w._reconnectCount].port,d.protocol=d.servers[w._reconnectCount].protocol?d.servers[w._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,w._reconnectCount++),s("calling streambuilder for",d.protocol),a[d.protocol](w,d)}let x=new o.default(E,d);return x.on("error",()=>{}),x}function c(u,d,g=!0){return new Promise((b,y)=>{let _=h(u,d),E={connect:w=>{x(),b(_)},end:()=>{x(),b(_)},error:w=>{x(),_.end(),y(w)}};g===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function x(){Object.keys(E).forEach(w=>{_.off(w,E[w])})}Object.keys(E).forEach(w=>{_.on(w,E[w])})})}e.connectAsync=c,e.default=h}),al=bt(e=>{ct(),ft(),ut();var t=e&&e.__createBinding||(Object.create?function(g,b,y,_){_===void 0&&(_=y);var E=Object.getOwnPropertyDescriptor(b,y);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(g,_,E)}:function(g,b,y,_){_===void 0&&(_=y),g[_]=b[y]}),i=e&&e.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),n=e&&e.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&t(b,g,y);return i(b,g),b},o=e&&e.__exportStar||function(g,b){for(var y in g)y!=="default"&&!Object.prototype.hasOwnProperty.call(b,y)&&t(b,g,y)},r=e&&e.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var s=r(wo());e.MqttClient=s.default;var a=r(hc());e.DefaultMessageIdProvider=a.default;var l=r(Cd());e.UniqueMessageIdProvider=l.default;var h=r(cc());e.Store=h.default;var c=n(Kd());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var u=r(Ac());e.KeepaliveManager=u.default,e.Client=s.default,o(wo(),e),o(Ki(),e);var d=Ir();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),Gd=bt(e=>{ct(),ft(),ut();var t=e&&e.__createBinding||(Object.create?function(s,a,l,h){h===void 0&&(h=l);var c=Object.getOwnPropertyDescriptor(a,l);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(s,h,c)}:function(s,a,l,h){h===void 0&&(h=l),s[h]=a[l]}),i=e&&e.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),n=e&&e.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&t(a,s,l);return i(a,s),a},o=e&&e.__exportStar||function(s,a){for(var l in s)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&t(a,s,l)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(al());e.default=r,o(al(),e)});const Qd=Gd();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*//*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function An(e){return e+.5|0}const oi=(e,t,i)=>Math.max(Math.min(e,i),t);function hn(e){return oi(An(e*2.55),0,255)}function ai(e){return oi(An(e*255),0,255)}function $e(e){return oi(An(e/2.55)/100,0,1)}function ll(e){return oi(An(e*100),0,100)}const pe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Co=[..."0123456789ABCDEF"],Xd=e=>Co[e&15],Jd=e=>Co[(e&240)>>4]+Co[e&15],Nn=e=>(e&240)>>4===(e&15),Zd=e=>Nn(e.r)&&Nn(e.g)&&Nn(e.b)&&Nn(e.a);function tp(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&pe[e[1]]*17,g:255&pe[e[2]]*17,b:255&pe[e[3]]*17,a:t===5?pe[e[4]]*17:255}:(t===7||t===9)&&(i={r:pe[e[1]]<<4|pe[e[2]],g:pe[e[3]]<<4|pe[e[4]],b:pe[e[5]]<<4|pe[e[6]],a:t===9?pe[e[7]]<<4|pe[e[8]]:255})),i}const ep=(e,t)=>e<255?t(e):"";function ip(e){var t=Zd(e)?Xd:Jd;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ep(e.a,t):void 0}const np=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uu(e,t,i){const n=t*Math.min(i,1-i),o=(r,s=(r+e/30)%12)=>i-n*Math.max(Math.min(s-3,9-s,1),-1);return[o(0),o(8),o(4)]}function rp(e,t,i){const n=(o,r=(o+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function sp(e,t,i){const n=uu(e,1,.5);let o;for(t+i>1&&(o=1/(t+i),t*=o,i*=o),o=0;o<3;o++)n[o]*=1-t-i,n[o]+=t;return n}function op(e,t,i,n,o){return e===o?(t-i)/n+(t<i?6:0):t===o?(i-e)/n+2:(e-t)/n+4}function ta(e){const i=e.r/255,n=e.g/255,o=e.b/255,r=Math.max(i,n,o),s=Math.min(i,n,o),a=(r+s)/2;let l,h,c;return r!==s&&(c=r-s,h=a>.5?c/(2-r-s):c/(r+s),l=op(i,n,o,c,r),l=l*60+.5),[l|0,h||0,a]}function ea(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(ai)}function ia(e,t,i){return ea(uu,e,t,i)}function ap(e,t,i){return ea(sp,e,t,i)}function lp(e,t,i){return ea(rp,e,t,i)}function fu(e){return(e%360+360)%360}function hp(e){const t=np.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?hn(+t[5]):ai(+t[5]));const o=fu(+t[2]),r=+t[3]/100,s=+t[4]/100;return t[1]==="hwb"?n=ap(o,r,s):t[1]==="hsv"?n=lp(o,r,s):n=ia(o,r,s),{r:n[0],g:n[1],b:n[2],a:i}}function cp(e,t){var i=ta(e);i[0]=fu(i[0]+t),i=ia(i),e.r=i[0],e.g=i[1],e.b=i[2]}function up(e){if(!e)return;const t=ta(e),i=t[0],n=ll(t[1]),o=ll(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${o}%, ${$e(e.a)})`:`hsl(${i}, ${n}%, ${o}%)`}const hl={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cl={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function fp(){const e={},t=Object.keys(cl),i=Object.keys(hl);let n,o,r,s,a;for(n=0;n<t.length;n++){for(s=a=t[n],o=0;o<i.length;o++)r=i[o],a=a.replace(r,hl[r]);r=parseInt(cl[s],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let jn;function dp(e){jn||(jn=fp(),jn.transparent=[0,0,0,0]);const t=jn[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const pp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gp(e){const t=pp.exec(e);let i=255,n,o,r;if(t){if(t[7]!==n){const s=+t[7];i=t[8]?hn(s):oi(s*255,0,255)}return n=+t[1],o=+t[3],r=+t[5],n=255&(t[2]?hn(n):oi(n,0,255)),o=255&(t[4]?hn(o):oi(o,0,255)),r=255&(t[6]?hn(r):oi(r,0,255)),{r:n,g:o,b:r,a:i}}}function mp(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${$e(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Yr=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ji=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function bp(e,t,i){const n=ji($e(e.r)),o=ji($e(e.g)),r=ji($e(e.b));return{r:ai(Yr(n+i*(ji($e(t.r))-n))),g:ai(Yr(o+i*(ji($e(t.g))-o))),b:ai(Yr(r+i*(ji($e(t.b))-r))),a:e.a+i*(t.a-e.a)}}function Un(e,t,i){if(e){let n=ta(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=ia(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function du(e,t){return e&&Object.assign(t||{},e)}function ul(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ai(e[3]))):(t=du(e,{r:0,g:0,b:0,a:1}),t.a=ai(t.a)),t}function yp(e){return e.charAt(0)==="r"?gp(e):hp(e)}class vn{constructor(t){if(t instanceof vn)return t;const i=typeof t;let n;i==="object"?n=ul(t):i==="string"&&(n=tp(t)||dp(t)||yp(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=du(this._rgb);return t&&(t.a=$e(t.a)),t}set rgb(t){this._rgb=ul(t)}rgbString(){return this._valid?mp(this._rgb):void 0}hexString(){return this._valid?ip(this._rgb):void 0}hslString(){return this._valid?up(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,o=t.rgb;let r;const s=i===r?.5:i,a=2*s-1,l=n.a-o.a,h=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-h,n.r=255&h*n.r+r*o.r+.5,n.g=255&h*n.g+r*o.g+.5,n.b=255&h*n.b+r*o.b+.5,n.a=s*n.a+(1-s)*o.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=bp(this._rgb,t._rgb,i)),this}clone(){return new vn(this.rgb)}alpha(t){return this._rgb.a=ai(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=An(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Un(this._rgb,2,t),this}darken(t){return Un(this._rgb,2,-t),this}saturate(t){return Un(this._rgb,1,t),this}desaturate(t){return Un(this._rgb,1,-t),this}rotate(t){return cp(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function De(){}const _p=(()=>{let e=0;return()=>e++})();function qt(e){return e==null}function Jt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Mt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function be(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ae(e,t){return be(e)?e:t}function Ot(e,t){return typeof e>"u"?t:e}const wp=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ut(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Bt(e,t,i,n){let o,r,s;if(Jt(e))for(r=e.length,o=0;o<r;o++)t.call(i,e[o],o);else if(Mt(e))for(s=Object.keys(e),r=s.length,o=0;o<r;o++)t.call(i,e[s[o]],s[o])}function gr(e,t){let i,n,o,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(o=e[i],r=t[i],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function mr(e){if(Jt(e))return e.map(mr);if(Mt(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let o=0;for(;o<n;++o)t[i[o]]=mr(e[i[o]]);return t}return e}function pu(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function vp(e,t,i,n){if(!pu(e))return;const o=t[e],r=i[e];Mt(o)&&Mt(r)?Sn(o,r,n):t[e]=mr(r)}function Sn(e,t,i){const n=Jt(t)?t:[t],o=n.length;if(!Mt(e))return e;i=i||{};const r=i.merger||vp;let s;for(let a=0;a<o;++a){if(s=n[a],!Mt(s))continue;const l=Object.keys(s);for(let h=0,c=l.length;h<c;++h)r(l[h],e,s,i)}return e}function mn(e,t){return Sn(e,t,{merger:Sp})}function Sp(e,t,i){if(!pu(e))return;const n=t[e],o=i[e];Mt(n)&&Mt(o)?mn(n,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=mr(o))}const fl={"":e=>e,x:e=>e.x,y:e=>e.y};function xp(e){const t=e.split("."),i=[];let n="";for(const o of t)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Ep(e){const t=xp(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function br(e,t){return(fl[t]||(fl[t]=Ep(t)))(e)}function na(e){return e.charAt(0).toUpperCase()+e.slice(1)}const yr=e=>typeof e<"u",li=e=>typeof e=="function",dl=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function kp(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Zt=Math.PI,Be=2*Zt,Ap=Be+Zt,_r=Number.POSITIVE_INFINITY,Tp=Zt/180,xe=Zt/2,mi=Zt/4,pl=Zt*2/3,Oo=Math.log10,Hi=Math.sign;function bn(e,t,i){return Math.abs(e-t)<i}function gl(e){const t=Math.round(e);e=bn(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(Oo(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Ip(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((o,r)=>o-r).pop(),t}function wr(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Cp(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function Op(e,t,i){let n,o,r;for(n=0,o=e.length;n<o;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ai(e){return e*(Zt/180)}function Pp(e){return e*(180/Zt)}function ml(e){if(!be(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Mp(e,t){const i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*Zt&&(r+=Be),{angle:r,distance:o}}function Po(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Rp(e,t){return(e-t+Ap)%Be-Zt}function si(e){return(e%Be+Be)%Be}function gu(e,t,i,n){const o=si(e),r=si(t),s=si(i),a=si(r-o),l=si(s-o),h=si(o-r),c=si(o-s);return o===r||o===s||n&&r===s||a>l&&h<c}function Re(e,t,i){return Math.max(t,Math.min(i,e))}function Bp(e){return Re(e,-32768,32767)}function cn(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function ra(e,t,i){i=i||(s=>e[s]<t);let n=e.length-1,o=0,r;for(;n-o>1;)r=o+n>>1,i(r)?o=r:n=r;return{lo:o,hi:n}}const Mo=(e,t,i,n)=>ra(e,i,n?o=>{const r=e[o][t];return r<i||r===i&&e[o+1][t]===i}:o=>e[o][t]<i),Lp=(e,t,i)=>ra(e,i,n=>e[n][t]>=i);function Dp(e,t,i){let n=0,o=e.length;for(;n<o&&e[n]<t;)n++;for(;o>n&&e[o-1]>i;)o--;return n>0||o<e.length?e.slice(n,o):e}const mu=["push","pop","shift","splice","unshift"];function Np(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),mu.forEach(i=>{const n="_onData"+na(i),o=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const s=o.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),s}})})}function bl(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(t);o!==-1&&n.splice(o,1),!(n.length>0)&&(mu.forEach(r=>{delete e[r]}),delete e._chartjs)}function jp(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const bu=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function yu(e,t){let i=[],n=!1;return function(...o){i=o,n||(n=!0,bu.call(window,()=>{n=!1,e.apply(t,i)}))}}function Up(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const sa=e=>e==="start"?"left":e==="end"?"right":"center",se=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,Fp=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t,Fn=e=>e===0||e===1,yl=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Be/i)),_l=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Be/i)+1,yn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xe)+1,easeOutSine:e=>Math.sin(e*xe),easeInOutSine:e=>-.5*(Math.cos(Zt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Fn(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Fn(e)?e:yl(e,.075,.3),easeOutElastic:e=>Fn(e)?e:_l(e,.075,.3),easeInOutElastic(e){return Fn(e)?e:e<.5?.5*yl(e*2,.1125,.45):.5+.5*_l(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-yn.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?yn.easeInBounce(e*2)*.5:yn.easeOutBounce(e*2-1)*.5+.5};function oa(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function wl(e){return oa(e)?e:new vn(e)}function Kr(e){return oa(e)?e:new vn(e).saturate(.5).darken(.1).hexString()}const Wp=["x","y","borderWidth","radius","tension"],zp=["color","borderColor","backgroundColor"];function Hp(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:zp},numbers:{type:"number",properties:Wp}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $p(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vl=new Map;function Vp(e,t){t=t||{};const i=e+JSON.stringify(t);let n=vl.get(i);return n||(n=new Intl.NumberFormat(e,t),vl.set(i,n)),n}function _u(e,t,i){return Vp(t,i).format(e)}const wu={values(e){return Jt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let o,r=e;if(i.length>1){const h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(o="scientific"),r=qp(e,i)}const s=Oo(Math.abs(r)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),_u(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(Oo(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?wu.numeric.call(this,e,t,i):""}};function qp(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var vu={formatters:wu};function Yp(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Pi=Object.create(null),Ro=Object.create(null);function _n(e,t){if(!t)return e;const i=t.split(".");for(let n=0,o=i.length;n<o;++n){const r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function Gr(e,t,i){return typeof t=="string"?Sn(_n(e,t),i):Sn(_n(e,""),t)}class Kp{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>Kr(o.backgroundColor),this.hoverBorderColor=(n,o)=>Kr(o.borderColor),this.hoverColor=(n,o)=>Kr(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Gr(this,t,i)}get(t){return _n(this,t)}describe(t,i){return Gr(Ro,t,i)}override(t,i){return Gr(Pi,t,i)}route(t,i,n,o){const r=_n(this,t),s=_n(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],h=s[o];return Mt(l)?Object.assign({},h,l):Ot(l,h)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var Yt=new Kp({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Hp,$p,Yp]);function Gp(e){return!e||qt(e.size)||qt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Sl(e,t,i,n,o){let r=t[o];return r||(r=t[o]=e.measureText(o).width,i.push(o)),r>n&&(n=r),n}function bi(e,t,i){const n=e.currentDevicePixelRatio,o=i!==0?Math.max(i/2,.5):0;return Math.round((t-o)*n)/n+o}function xl(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Bo(e,t,i,n){Su(e,t,i,n,null)}function Su(e,t,i,n,o){let r,s,a,l,h,c,u,d;const g=t.pointStyle,b=t.rotation,y=t.radius;let _=(b||0)*Tp;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(_),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),g){default:o?e.ellipse(i,n,o/2,y,0,0,Be):e.arc(i,n,y,0,Be),e.closePath();break;case"triangle":c=o?o/2:y,e.moveTo(i+Math.sin(_)*c,n-Math.cos(_)*y),_+=pl,e.lineTo(i+Math.sin(_)*c,n-Math.cos(_)*y),_+=pl,e.lineTo(i+Math.sin(_)*c,n-Math.cos(_)*y),e.closePath();break;case"rectRounded":h=y*.516,l=y-h,s=Math.cos(_+mi)*l,u=Math.cos(_+mi)*(o?o/2-h:l),a=Math.sin(_+mi)*l,d=Math.sin(_+mi)*(o?o/2-h:l),e.arc(i-u,n-a,h,_-Zt,_-xe),e.arc(i+d,n-s,h,_-xe,_),e.arc(i+u,n+a,h,_,_+xe),e.arc(i-d,n+s,h,_+xe,_+Zt),e.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*y,c=o?o/2:l,e.rect(i-c,n-l,2*c,2*l);break}_+=mi;case"rectRot":u=Math.cos(_)*(o?o/2:y),s=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(o?o/2:y),e.moveTo(i-u,n-a),e.lineTo(i+d,n-s),e.lineTo(i+u,n+a),e.lineTo(i-d,n+s),e.closePath();break;case"crossRot":_+=mi;case"cross":u=Math.cos(_)*(o?o/2:y),s=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(o?o/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-s),e.lineTo(i-d,n+s);break;case"star":u=Math.cos(_)*(o?o/2:y),s=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(o?o/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-s),e.lineTo(i-d,n+s),_+=mi,u=Math.cos(_)*(o?o/2:y),s=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(o?o/2:y),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+d,n-s),e.lineTo(i-d,n+s);break;case"line":s=o?o/2:Math.cos(_)*y,a=Math.sin(_)*y,e.moveTo(i-s,n-a),e.lineTo(i+s,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(_)*(o?o/2:y),n+Math.sin(_)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function xn(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function aa(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function la(e){e.restore()}function Qp(e,t,i,n,o){if(!t)return e.lineTo(i.x,i.y);if(o==="middle"){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else o==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Xp(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Jp(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),qt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Zp(e,t,i,n,o){if(o.strikethrough||o.underline){const r=e.measureText(n),s=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,c=o.strikethrough?(l+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(s,c),e.lineTo(a,c),e.stroke()}}function tg(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function En(e,t,i,n,o,r={}){const s=Jt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,h;for(e.save(),e.font=o.string,Jp(e,r),l=0;l<s.length;++l)h=s[l],r.backdrop&&tg(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),qt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,i,n,r.maxWidth)),e.fillText(h,i,n,r.maxWidth),Zp(e,i,n,h,r),n+=Number(o.lineHeight);e.restore()}function Lo(e,t){const{x:i,y:n,w:o,h:r,radius:s}=t;e.arc(i+s.topLeft,n+s.topLeft,s.topLeft,1.5*Zt,Zt,!0),e.lineTo(i,n+r-s.bottomLeft),e.arc(i+s.bottomLeft,n+r-s.bottomLeft,s.bottomLeft,Zt,xe,!0),e.lineTo(i+o-s.bottomRight,n+r),e.arc(i+o-s.bottomRight,n+r-s.bottomRight,s.bottomRight,xe,0,!0),e.lineTo(i+o,n+s.topRight),e.arc(i+o-s.topRight,n+s.topRight,s.topRight,0,-xe,!0),e.lineTo(i+s.topLeft,n)}const eg=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ig=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ng(e,t){const i=(""+e).match(eg);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const rg=e=>+e||0;function xu(e,t){const i={},n=Mt(t),o=n?Object.keys(t):t,r=Mt(e)?n?s=>Ot(e[s],e[t[s]]):s=>e[s]:()=>e;for(const s of o)i[s]=rg(r(s));return i}function sg(e){return xu(e,{top:"y",right:"x",bottom:"y",left:"x"})}function wn(e){return xu(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ye(e){const t=sg(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function oe(e,t){e=e||{},t=t||Yt.font;let i=Ot(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=Ot(e.style,t.style);n&&!(""+n).match(ig)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:Ot(e.family,t.family),lineHeight:ng(Ot(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:Ot(e.weight,t.weight),string:""};return o.string=Gp(o),o}function Wn(e,t,i,n){let o,r,s;for(o=0,r=e.length;o<r;++o)if(s=e[o],s!==void 0&&s!==void 0)return s}function og(e,t,i){const{min:n,max:o}=e,r=wp(t,(o-n)/2),s=(a,l)=>i&&a===0?0:a+l;return{min:s(n,-Math.abs(r)),max:s(o,r)}}function Di(e,t){return Object.assign(Object.create(e),t)}function ha(e,t=[""],i,n,o=()=>e[0]){const r=i||e;typeof n>"u"&&(n=Tu("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:o,override:a=>ha([a,...e],t,r,n)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return ku(a,l,()=>pg(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return kl(a).includes(l)},ownKeys(a){return kl(a)},set(a,l,h){const c=a._storage||(a._storage=o());return a[l]=c[l]=h,delete a._keys,!0}})}function $i(e,t,i,n){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Eu(e,n),setContext:r=>$i(e,r,i,n),override:r=>$i(e.override(r),t,i,n)};return new Proxy(o,{deleteProperty(r,s){return delete r[s],delete e[s],!0},get(r,s,a){return ku(r,s,()=>lg(r,s,a))},getOwnPropertyDescriptor(r,s){return r._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,s){return Reflect.has(e,s)},ownKeys(){return Reflect.ownKeys(e)},set(r,s,a){return e[s]=a,delete r[s],!0}})}function Eu(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:i,indexable:n,isScriptable:li(i)?i:()=>i,isIndexable:li(n)?n:()=>n}}const ag=(e,t)=>e?e+na(t):t,ca=(e,t)=>Mt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ku(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=i();return e[t]=n,n}function lg(e,t,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:s}=e;let a=n[t];return li(a)&&s.isScriptable(t)&&(a=hg(t,a,e,i)),Jt(a)&&a.length&&(a=cg(t,a,e,s.isIndexable)),ca(t,a)&&(a=$i(a,o,r&&r[t],s)),a}function hg(e,t,i,n){const{_proxy:o,_context:r,_subProxy:s,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,s||n);return a.delete(e),ca(e,l)&&(l=ua(o._scopes,o,e,l)),l}function cg(e,t,i,n){const{_proxy:o,_context:r,_subProxy:s,_descriptors:a}=i;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(Mt(t[0])){const l=t,h=o._scopes.filter(c=>c!==l);t=[];for(const c of l){const u=ua(h,o,e,c);t.push($i(u,r,s&&s[e],a))}}return t}function Au(e,t,i){return li(e)?e(t,i):e}const ug=(e,t)=>e===!0?t:typeof e=="string"?br(t,e):void 0;function fg(e,t,i,n,o){for(const r of t){const s=ug(i,r);if(s){e.add(s);const a=Au(s._fallback,i,o);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(s===!1&&typeof n<"u"&&i!==n)return null}return!1}function ua(e,t,i,n){const o=t._rootScopes,r=Au(t._fallback,i,n),s=[...e,...o],a=new Set;a.add(n);let l=El(a,s,i,r||i,n);return l===null||typeof r<"u"&&r!==i&&(l=El(a,s,r,l,n),l===null)?!1:ha(Array.from(a),[""],o,r,()=>dg(t,i,n))}function El(e,t,i,n,o){for(;i;)i=fg(e,t,i,n,o);return i}function dg(e,t,i){const n=e._getTarget();t in n||(n[t]={});const o=n[t];return Jt(o)&&Mt(i)?i:o||{}}function pg(e,t,i,n){let o;for(const r of t)if(o=Tu(ag(r,e),i),typeof o<"u")return ca(e,o)?ua(i,n,e,o):o}function Tu(e,t){for(const i of t){if(!i)continue;const n=i[e];if(typeof n<"u")return n}}function kl(e){let t=e._keys;return t||(t=e._keys=gg(e._scopes)),t}function gg(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(o=>!o.startsWith("_")))t.add(n);return Array.from(t)}const mg=Number.EPSILON||1e-14,Vi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Iu=e=>e==="x"?"y":"x";function bg(e,t,i,n){const o=e.skip?t:e,r=t,s=i.skip?t:i,a=Po(r,o),l=Po(s,r);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=n*h,d=n*c;return{previous:{x:r.x-u*(s.x-o.x),y:r.y-u*(s.y-o.y)},next:{x:r.x+d*(s.x-o.x),y:r.y+d*(s.y-o.y)}}}function yg(e,t,i){const n=e.length;let o,r,s,a,l,h=Vi(e,0);for(let c=0;c<n-1;++c)if(l=h,h=Vi(e,c+1),!(!l||!h)){if(bn(t[c],0,mg)){i[c]=i[c+1]=0;continue}o=i[c]/t[c],r=i[c+1]/t[c],a=Math.pow(o,2)+Math.pow(r,2),!(a<=9)&&(s=3/Math.sqrt(a),i[c]=o*s*t[c],i[c+1]=r*s*t[c])}}function _g(e,t,i="x"){const n=Iu(i),o=e.length;let r,s,a,l=Vi(e,0);for(let h=0;h<o;++h){if(s=a,a=l,l=Vi(e,h+1),!a)continue;const c=a[i],u=a[n];s&&(r=(c-s[i])/3,a[`cp1${i}`]=c-r,a[`cp1${n}`]=u-r*t[h]),l&&(r=(l[i]-c)/3,a[`cp2${i}`]=c+r,a[`cp2${n}`]=u+r*t[h])}}function wg(e,t="x"){const i=Iu(t),n=e.length,o=Array(n).fill(0),r=Array(n);let s,a,l,h=Vi(e,0);for(s=0;s<n;++s)if(a=l,l=h,h=Vi(e,s+1),!!l){if(h){const c=h[t]-l[t];o[s]=c!==0?(h[i]-l[i])/c:0}r[s]=a?h?Hi(o[s-1])!==Hi(o[s])?0:(o[s-1]+o[s])/2:o[s-1]:o[s]}yg(e,o,r),_g(e,r,t)}function zn(e,t,i){return Math.max(Math.min(e,i),t)}function vg(e,t){let i,n,o,r,s,a=xn(e[0],t);for(i=0,n=e.length;i<n;++i)s=r,r=a,a=i<n-1&&xn(e[i+1],t),r&&(o=e[i],s&&(o.cp1x=zn(o.cp1x,t.left,t.right),o.cp1y=zn(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=zn(o.cp2x,t.left,t.right),o.cp2y=zn(o.cp2y,t.top,t.bottom)))}function Sg(e,t,i,n,o){let r,s,a,l;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")wg(e,o);else{let h=n?e[e.length-1]:e[0];for(r=0,s=e.length;r<s;++r)a=e[r],l=bg(h,a,e[Math.min(r+1,s-(n?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,h=a}t.capBezierPoints&&vg(e,i)}function fa(){return typeof window<"u"&&typeof document<"u"}function da(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function vr(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const Or=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function xg(e,t){return Or(e).getPropertyValue(t)}const Eg=["top","right","bottom","left"];function Oi(e,t,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const r=Eg[o];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const kg=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function Ag(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:o,offsetY:r}=n;let s=!1,a,l;if(kg(o,r,e.target))a=o,l=r;else{const h=t.getBoundingClientRect();a=n.clientX-h.left,l=n.clientY-h.top,s=!0}return{x:a,y:l,box:s}}function vi(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,o=Or(i),r=o.boxSizing==="border-box",s=Oi(o,"padding"),a=Oi(o,"border","width"),{x:l,y:h,box:c}=Ag(e,i),u=s.left+(c&&a.left),d=s.top+(c&&a.top);let{width:g,height:b}=t;return r&&(g-=s.width+a.width,b-=s.height+a.height),{x:Math.round((l-u)/g*i.width/n),y:Math.round((h-d)/b*i.height/n)}}function Tg(e,t,i){let n,o;if(t===void 0||i===void 0){const r=e&&da(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const s=r.getBoundingClientRect(),a=Or(r),l=Oi(a,"border","width"),h=Oi(a,"padding");t=s.width-h.width-l.width,i=s.height-h.height-l.height,n=vr(a.maxWidth,r,"clientWidth"),o=vr(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||_r,maxHeight:o||_r}}const Hn=e=>Math.round(e*10)/10;function Ig(e,t,i,n){const o=Or(e),r=Oi(o,"margin"),s=vr(o.maxWidth,e,"clientWidth")||_r,a=vr(o.maxHeight,e,"clientHeight")||_r,l=Tg(e,t,i);let{width:h,height:c}=l;if(o.boxSizing==="content-box"){const d=Oi(o,"border","width"),g=Oi(o,"padding");h-=g.width+d.width,c-=g.height+d.height}return h=Math.max(0,h-r.width),c=Math.max(0,n?h/n:c-r.height),h=Hn(Math.min(h,s,l.maxWidth)),c=Hn(Math.min(c,a,l.maxHeight)),h&&!c&&(c=Hn(h/2)),(t!==void 0||i!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,h=Hn(Math.floor(c*n))),{width:h,height:c}}function Al(e,t,i){const n=t||1,o=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||s.height!==o||s.width!==r?(e.currentDevicePixelRatio=n,s.height=o,s.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Cg=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};fa()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Tl(e,t){const i=xg(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Si(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Og(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function Pg(e,t,i,n){const o={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},s=Si(e,o,i),a=Si(o,r,i),l=Si(r,t,i),h=Si(s,a,i),c=Si(a,l,i);return Si(h,c,i)}const Mg=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},Rg=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function zi(e,t,i){return e?Mg(t,i):Rg()}function Cu(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Ou(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Pu(e){return e==="angle"?{between:gu,compare:Rp,normalize:si}:{between:cn,compare:(t,i)=>t-i,normalize:t=>t}}function Il({start:e,end:t,count:i,loop:n,style:o}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:o}}function Bg(e,t,i){const{property:n,start:o,end:r}=i,{between:s,normalize:a}=Pu(n),l=t.length;let{start:h,end:c,loop:u}=e,d,g;if(u){for(h+=l,c+=l,d=0,g=l;d<g&&s(a(t[h%l][n]),o,r);++d)h--,c--;h%=l,c%=l}return c<h&&(c+=l),{start:h,end:c,loop:u,style:e.style}}function Lg(e,t,i){if(!i)return[e];const{property:n,start:o,end:r}=i,s=t.length,{compare:a,between:l,normalize:h}=Pu(n),{start:c,end:u,loop:d,style:g}=Bg(e,t,i),b=[];let y=!1,_=null,E,x,w;const O=()=>l(o,w,E)&&a(o,w)!==0,P=()=>a(r,E)===0||l(r,w,E),k=()=>y||O(),T=()=>!y||P();for(let I=c,N=c;I<=u;++I)x=t[I%s],!x.skip&&(E=h(x[n]),E!==w&&(y=l(E,o,r),_===null&&k()&&(_=a(E,o)===0?I:N),_!==null&&T()&&(b.push(Il({start:_,end:I,loop:d,count:s,style:g})),_=null),N=I,w=E));return _!==null&&b.push(Il({start:_,end:u,loop:d,count:s,style:g})),b}function Dg(e,t){const i=[],n=e.segments;for(let o=0;o<n.length;o++){const r=Lg(n[o],e.points,t);r.length&&i.push(...r)}return i}function Ng(e,t,i,n){let o=0,r=t-1;if(i&&!n)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,i&&(r+=o);r>o&&e[r%t].skip;)r--;return r%=t,{start:o,end:r}}function jg(e,t,i,n){const o=e.length,r=[];let s=t,a=e[t],l;for(l=t+1;l<=i;++l){const h=e[l%o];h.skip||h.stop?a.skip||(n=!1,r.push({start:t%o,end:(l-1)%o,loop:n}),t=s=h.stop?l:null):(s=l,a.skip&&(t=l)),a=h}return s!==null&&r.push({start:t%o,end:s%o,loop:n}),r}function Ug(e,t){const i=e.points,n=e.options.spanGaps,o=i.length;if(!o)return[];const r=!!e._loop,{start:s,end:a}=Ng(i,o,r,n);if(n===!0)return Cl(e,[{start:s,end:a,loop:r}],i,t);const l=a<s?a+o:a,h=!!e._fullLoop&&s===0&&a===o-1;return Cl(e,jg(i,s,l,h),i,t)}function Cl(e,t,i,n){return!n||!n.setContext||!i?t:Fg(e,t,i,n)}function Fg(e,t,i,n){const o=e._chart.getContext(),r=Ol(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=i.length,h=[];let c=r,u=t[0].start,d=u;function g(b,y,_,E){const x=a?-1:1;if(b!==y){for(b+=l;i[b%l].skip;)b-=x;for(;i[y%l].skip;)y+=x;b%l!==y%l&&(h.push({start:b%l,end:y%l,loop:_,style:E}),c=E,u=y%l)}}for(const b of t){u=a?u:b.start;let y=i[u%l],_;for(d=u+1;d<=b.end;d++){const E=i[d%l];_=Ol(n.setContext(Di(o,{type:"segment",p0:y,p1:E,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),Wg(_,c)&&g(u,d-1,b.loop,c),y=E,c=_}u<d-1&&g(u,d-1,b.loop,c)}return h}function Ol(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Wg(e,t){if(!t)return!1;const i=[],n=function(o,r){return oa(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class zg{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,o){const r=i.listeners[o],s=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:s,currentStep:Math.min(n-i.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=bu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;const r=n.items;let s=r.length-1,a=!1,l;for(;s>=0;--s)l=r[s],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[s]=r[r.length-1],r.pop());a&&(o.draw(),this._notify(o,n,t,"progress")),r.length||(n.running=!1,this._notify(o,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ue=new zg;const Pl="transparent",Hg={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=wl(e||Pl),o=n.valid&&wl(t||Pl);return o&&o.valid?o.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class $g{constructor(t,i,n,o){const r=i[n];o=Wn([t.to,o,r,t.from]);const s=Wn([t.from,r,o]);this._active=!0,this._fn=t.fn||Hg[t.type||typeof s],this._easing=yn[t.easing]||yn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=s,this._to=o,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const o=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Wn([t.to,i,o,t.from]),this._from=Wn([t.from,o,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,o=this._prop,r=this._from,s=this._loop,a=this._to;let l;if(this._active=r!==a&&(s||i<n),!this._active){this._target[o]=a,this._notify(!0);return}if(i<0){this._target[o]=r;return}l=i/n%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][i]()}}class Mu{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!Mt(t))return;const i=Object.keys(Yt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const r=t[o];if(!Mt(r))return;const s={};for(const a of i)s[a]=r[a];(Jt(r.properties)&&r.properties||[o]).forEach(a=>{(a===o||!n.has(a))&&n.set(a,s)})})}_animateOptions(t,i){const n=i.options,o=qg(t,n);if(!o)return[];const r=this._createAnimations(o,n);return n.$shared&&Vg(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){const n=this._properties,o=[],r=t.$animations||(t.$animations={}),s=Object.keys(i),a=Date.now();let l;for(l=s.length-1;l>=0;--l){const h=s[l];if(h.charAt(0)==="$")continue;if(h==="options"){o.push(...this._animateOptions(t,i));continue}const c=i[h];let u=r[h];const d=n.get(h);if(u)if(d&&u.active()){u.update(d,c,a);continue}else u.cancel();if(!d||!d.duration){t[h]=c;continue}r[h]=u=new $g(d,t,h,c),o.push(u)}return o}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return Ue.add(this._chart,n),!0}}function Vg(e,t){const i=[],n=Object.keys(t);for(let o=0;o<n.length;o++){const r=e[n[o]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function qg(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Ml(e,t){const i=e&&e.options||{},n=i.reverse,o=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:o,end:n?o:r}}function Yg(e,t,i){if(i===!1)return!1;const n=Ml(e,i),o=Ml(t,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function Kg(e){let t,i,n,o;return Mt(e)?(t=e.top,i=e.right,n=e.bottom,o=e.left):t=i=n=o=e,{top:t,right:i,bottom:n,left:o,disabled:e===!1}}function Ru(e,t){const i=[],n=e._getSortedDatasetMetas(t);let o,r;for(o=0,r=n.length;o<r;++o)i.push(n[o].index);return i}function Rl(e,t,i,n={}){const o=e.keys,r=n.mode==="single";let s,a,l,h;if(t===null)return;let c=!1;for(s=0,a=o.length;s<a;++s){if(l=+o[s],l===i){if(c=!0,n.all)continue;break}h=e.values[l],be(h)&&(r||t===0||Hi(t)===Hi(h))&&(t+=h)}return!c&&!n.all?0:t}function Gg(e,t){const{iScale:i,vScale:n}=t,o=i.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",s=Object.keys(e),a=new Array(s.length);let l,h,c;for(l=0,h=s.length;l<h;++l)c=s[l],a[l]={[o]:c,[r]:e[c]};return a}function Qr(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function Qg(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function Xg(e){const{min:t,max:i,minDefined:n,maxDefined:o}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}function Jg(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Bl(e,t,i,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const r=e[o.index];if(i&&r>0||!i&&r<0)return o.index}return null}function Ll(e,t){const{chart:i,_cachedMeta:n}=e,o=i._stacks||(i._stacks={}),{iScale:r,vScale:s,index:a}=n,l=r.axis,h=s.axis,c=Qg(r,s,n),u=t.length;let d;for(let g=0;g<u;++g){const b=t[g],{[l]:y,[h]:_}=b,E=b._stacks||(b._stacks={});d=E[h]=Jg(o,c,y),d[a]=_,d._top=Bl(d,s,!0,n.type),d._bottom=Bl(d,s,!1,n.type);const x=d._visualValues||(d._visualValues={});x[a]=_}}function Xr(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function Zg(e,t){return Di(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function tm(e,t,i){return Di(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function tn(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const o of t){const r=o._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}const Jr=e=>e==="reset"||e==="none",Dl=(e,t)=>t?e:Object.assign({},e),em=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Ru(i,!0),values:null};class or{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Qr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&tn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),o=(u,d,g,b)=>u==="x"?d:u==="r"?b:g,r=i.xAxisID=Ot(n.xAxisID,Xr(t,"x")),s=i.yAxisID=Ot(n.yAxisID,Xr(t,"y")),a=i.rAxisID=Ot(n.rAxisID,Xr(t,"r")),l=i.indexAxis,h=i.iAxisID=o(l,r,s,a),c=i.vAxisID=o(l,s,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(s),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&bl(this._data,this),t._stacked&&tn(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(Mt(i)){const o=this._cachedMeta;this._data=Gg(i,o)}else if(n!==i){if(n){bl(n,this);const o=this._cachedMeta;tn(o),o._parsed=[]}i&&Object.isExtensible(i)&&Np(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const r=i._stacked;i._stacked=Qr(i.vScale,i),i.stack!==n.stack&&(o=!0,tn(i),i.stack=n.stack),this._resyncElements(t),(o||r!==i._stacked)&&(Ll(this,i._parsed),i._stacked=Qr(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:o}=this,{iScale:r,_stacked:s}=n,a=r.axis;let l=t===0&&i===o.length?!0:n._sorted,h=t>0&&n._parsed[t-1],c,u,d;if(this._parsing===!1)n._parsed=o,n._sorted=!0,d=o;else{Jt(o[t])?d=this.parseArrayData(n,o,t,i):Mt(o[t])?d=this.parseObjectData(n,o,t,i):d=this.parsePrimitiveData(n,o,t,i);const g=()=>u[a]===null||h&&u[a]<h[a];for(c=0;c<i;++c)n._parsed[c+t]=u=d[c],l&&(g()&&(l=!1),h=u);n._sorted=l}s&&Ll(this,d)}parsePrimitiveData(t,i,n,o){const{iScale:r,vScale:s}=t,a=r.axis,l=s.axis,h=r.getLabels(),c=r===s,u=new Array(o);let d,g,b;for(d=0,g=o;d<g;++d)b=d+n,u[d]={[a]:c||r.parse(h[b],b),[l]:s.parse(i[b],b)};return u}parseArrayData(t,i,n,o){const{xScale:r,yScale:s}=t,a=new Array(o);let l,h,c,u;for(l=0,h=o;l<h;++l)c=l+n,u=i[c],a[l]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(t,i,n,o){const{xScale:r,yScale:s}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(o);let c,u,d,g;for(c=0,u=o;c<u;++c)d=c+n,g=i[d],h[c]={x:r.parse(br(g,a),d),y:s.parse(br(g,l),d)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const o=this.chart,r=this._cachedMeta,s=i[t.axis],a={keys:Ru(o,!0),values:i._stacks[t.axis]._visualValues};return Rl(a,s,r.index,{mode:n})}updateRangeFromParsed(t,i,n,o){const r=n[i.axis];let s=r===null?NaN:r;const a=o&&n._stacks[i.axis];o&&a&&(o.values=a,s=Rl(o,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,i){const n=this._cachedMeta,o=n._parsed,r=n._sorted&&t===n.iScale,s=o.length,a=this._getOtherScale(t),l=em(i,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=Xg(a);let d,g;function b(){g=o[d];const y=g[a.axis];return!be(g[t.axis])||c>y||u<y}for(d=0;d<s&&!(!b()&&(this.updateRangeFromParsed(h,t,g,l),r));++d);if(r){for(d=s-1;d>=0;--d)if(!b()){this.updateRangeFromParsed(h,t,g,l);break}}return h}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let o,r,s;for(o=0,r=i.length;o<r;++o)s=i[o][t.axis],be(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,o=i.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=Kg(Ot(this.options.clip,Yg(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,o=n.data||[],r=i.chartArea,s=[],a=this._drawStart||0,l=this._drawCount||o.length-a,h=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const u=o[c];u.hidden||(u.active&&h?s.push(u):u.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const o=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const s=this._cachedMeta.data[t];r=s.$context||(s.$context=tm(this.getContext(),t,s)),r.parsed=this.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Zg(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const o=i==="active",r=this._cachedDataOpts,s=t+"-"+i,a=r[s],l=this.enableOptionSharing&&yr(n);if(a)return Dl(a,l);const h=this.chart.config,c=h.datasetElementScopeKeys(this._type,t),u=o?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),c),g=Object.keys(Yt.elements[t]),b=()=>this.getContext(n,o,i),y=h.resolveNamedOptions(d,g,b,u);return y.$shared&&(y.$shared=l,r[s]=Object.freeze(Dl(y,l))),y}_resolveAnimations(t,i,n){const o=this.chart,r=this._cachedDataOpts,s=`animation-${i}`,a=r[s];if(a)return a;let l;if(o.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,i),d=c.getOptionScopes(this.getDataset(),u);l=c.createResolver(d,this.getContext(t,n,i))}const h=new Mu(o,l&&l.animations);return l&&l._cacheable&&(r[s]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Jr(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),o=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(i,r)||r!==o;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:s}}updateElement(t,i,n,o){Jr(o)?Object.assign(t,n):this._resolveAnimations(i,o).update(t,n)}updateSharedOptions(t,i,n){t&&!Jr(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,o){t.active=o;const r=this.getStyle(i,o);this._resolveAnimations(i,n,o).update(t,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[a,l,h]of this._syncList)this[a](l,h);this._syncList=[];const o=n.length,r=i.length,s=Math.min(r,o);s&&this.parse(0,s),r>o?this._insertElements(o,r-o,t):r<o&&this._removeElements(r,o-r)}_insertElements(t,i,n=!0){const o=this._cachedMeta,r=o.data,s=t+i;let a;const l=h=>{for(h.length+=i,a=h.length-1;a>=s;a--)h[a]=h[a-i]};for(l(r),a=t;a<s;++a)r[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,i),n&&this.updateElements(r,t,i,"reset")}updateElements(t,i,n,o){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(t,i);n._stacked&&tn(n,o)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,o]=t;this[i](n,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}vt(or,"defaults",{}),vt(or,"datasetElementType",null),vt(or,"dataElementType",null);function yi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pa{constructor(t){vt(this,"options");this.options=t||{}}static override(t){Object.assign(pa.prototype,t)}init(){}formats(){return yi()}parse(){return yi()}format(){return yi()}add(){return yi()}diff(){return yi()}startOf(){return yi()}endOf(){return yi()}}var im={_date:pa};function nm(e,t,i,n){const{controller:o,data:r,_sorted:s}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&s&&r.length){const l=a._reversePixels?Lp:Mo;if(n){if(o._sharedOptions){const h=r[0],c=typeof h.getRange=="function"&&h.getRange(t);if(c){const u=l(r,t,i-c),d=l(r,t,i+c);return{lo:u.lo,hi:d.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function Tn(e,t,i,n,o){const r=e.getSortedVisibleDatasetMetas(),s=i[t];for(let a=0,l=r.length;a<l;++a){const{index:h,data:c}=r[a],{lo:u,hi:d}=nm(r[a],t,s,o);for(let g=u;g<=d;++g){const b=c[g];b.skip||n(b,h,g)}}}function rm(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,o){const r=t?Math.abs(n.x-o.x):0,s=i?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}function Zr(e,t,i,n,o){const r=[];return!o&&!e.isPointInArea(t)||Tn(e,i,t,function(a,l,h){!o&&!xn(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:h})},!0),r}function sm(e,t,i,n){let o=[];function r(s,a,l){const{startAngle:h,endAngle:c}=s.getProps(["startAngle","endAngle"],n),{angle:u}=Mp(s,{x:t.x,y:t.y});gu(u,h,c)&&o.push({element:s,datasetIndex:a,index:l})}return Tn(e,i,t,r),o}function om(e,t,i,n,o,r){let s=[];const a=rm(i);let l=Number.POSITIVE_INFINITY;function h(c,u,d){const g=c.inRange(t.x,t.y,o);if(n&&!g)return;const b=c.getCenterPoint(o);if(!(!!r||e.isPointInArea(b))&&!g)return;const _=a(t,b);_<l?(s=[{element:c,datasetIndex:u,index:d}],l=_):_===l&&s.push({element:c,datasetIndex:u,index:d})}return Tn(e,i,t,h),s}function ts(e,t,i,n,o,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?sm(e,t,i,o):om(e,t,i,n,o,r)}function Nl(e,t,i,n,o){const r=[],s=i==="x"?"inXRange":"inYRange";let a=!1;return Tn(e,i,t,(l,h,c)=>{l[s]&&l[s](t[i],o)&&(r.push({element:l,datasetIndex:h,index:c}),a=a||l.inRange(t.x,t.y,o))}),n&&!a?[]:r}var am={evaluateInteractionItems:Tn,modes:{index(e,t,i,n){const o=vi(t,e),r=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?Zr(e,o,r,n,s):ts(e,o,r,!1,n,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const c=a[0].index,u=h.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:h.index,index:c})}),l):[]},dataset(e,t,i,n){const o=vi(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;let a=i.intersect?Zr(e,o,r,n,s):ts(e,o,r,!1,n,s);if(a.length>0){const l=a[0].datasetIndex,h=e.getDatasetMeta(l).data;a=[];for(let c=0;c<h.length;++c)a.push({element:h[c],datasetIndex:l,index:c})}return a},point(e,t,i,n){const o=vi(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;return Zr(e,o,r,n,s)},nearest(e,t,i,n){const o=vi(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;return ts(e,o,r,i.intersect,n,s)},x(e,t,i,n){const o=vi(t,e);return Nl(e,o,"x",i.intersect,n)},y(e,t,i,n){const o=vi(t,e);return Nl(e,o,"y",i.intersect,n)}}};const Bu=["left","top","right","bottom"];function en(e,t){return e.filter(i=>i.pos===t)}function jl(e,t){return e.filter(i=>Bu.indexOf(i.pos)===-1&&i.box.axis===t)}function nn(e,t){return e.sort((i,n)=>{const o=t?n:i,r=t?i:n;return o.weight===r.weight?o.index-r.index:o.weight-r.weight})}function lm(e){const t=[];let i,n,o,r,s,a;for(i=0,n=(e||[]).length;i<n;++i)o=e[i],{position:r,options:{stack:s,stackWeight:a=1}}=o,t.push({index:i,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:s&&r+s,stackWeight:a});return t}function hm(e){const t={};for(const i of e){const{stack:n,pos:o,stackWeight:r}=i;if(!n||!Bu.includes(o))continue;const s=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}function cm(e,t){const i=hm(e),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let r,s,a;for(r=0,s=e.length;r<s;++r){a=e[r];const{fullSize:l}=a.box,h=i[a.stack],c=h&&a.stackWeight/h.weight;a.horizontal?(a.width=c?c*n:l&&t.availableWidth,a.height=o):(a.width=n,a.height=c?c*o:l&&t.availableHeight)}return i}function um(e){const t=lm(e),i=nn(t.filter(h=>h.box.fullSize),!0),n=nn(en(t,"left"),!0),o=nn(en(t,"right")),r=nn(en(t,"top"),!0),s=nn(en(t,"bottom")),a=jl(t,"x"),l=jl(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:o.concat(l).concat(s).concat(a),chartArea:en(t,"chartArea"),vertical:n.concat(o).concat(l),horizontal:r.concat(s).concat(a)}}function Ul(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Lu(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fm(e,t,i,n){const{pos:o,box:r}=i,s=e.maxPadding;if(!Mt(o)){i.size&&(e[o]-=i.size);const u=n[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?r.height:r.width),i.size=u.size/u.count,e[o]+=i.size}r.getPadding&&Lu(s,r.getPadding());const a=Math.max(0,t.outerWidth-Ul(s,e,"left","right")),l=Math.max(0,t.outerHeight-Ul(s,e,"top","bottom")),h=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function dm(e){const t=e.maxPadding;function i(n){const o=Math.max(t[n]-e[n],0);return e[n]+=o,o}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function pm(e,t){const i=t.maxPadding;function n(o){const r={left:0,top:0,right:0,bottom:0};return o.forEach(s=>{r[s]=Math.max(t[s],i[s])}),r}return n(e?["left","right"]:["top","bottom"])}function un(e,t,i,n){const o=[];let r,s,a,l,h,c;for(r=0,s=e.length,h=0;r<s;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,pm(a.horizontal,t));const{same:u,other:d}=fm(t,i,a,n);h|=u&&o.length,c=c||d,l.fullSize||o.push(a)}return h&&un(o,t,i,n)||c}function $n(e,t,i,n,o){e.top=i,e.left=t,e.right=t+n,e.bottom=i+o,e.width=n,e.height=o}function Fl(e,t,i,n){const o=i.padding;let{x:r,y:s}=t;for(const a of e){const l=a.box,h=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/h.weight||1;if(a.horizontal){const u=t.w*c,d=h.size||l.height;yr(h.start)&&(s=h.start),l.fullSize?$n(l,o.left,s,i.outerWidth-o.right-o.left,d):$n(l,t.left+h.placed,s,u,d),h.start=s,h.placed+=u,s=l.bottom}else{const u=t.h*c,d=h.size||l.width;yr(h.start)&&(r=h.start),l.fullSize?$n(l,r,o.top,d,i.outerHeight-o.bottom-o.top):$n(l,r,t.top+h.placed,d,u),h.start=r,h.placed+=u,r=l.right}}t.x=r,t.y=s}var me={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const o=ye(e.options.layout.padding),r=Math.max(t-o.width,0),s=Math.max(i-o.height,0),a=um(e.boxes),l=a.vertical,h=a.horizontal;Bt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const c=l.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:o,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/c,hBoxMaxHeight:s/2}),d=Object.assign({},o);Lu(d,ye(n));const g=Object.assign({maxPadding:d,w:r,h:s,x:o.left,y:o.top},o),b=cm(l.concat(h),u);un(a.fullSize,g,u,b),un(l,g,u,b),un(h,g,u,b)&&un(l,g,u,b),dm(g),Fl(a.leftAndTop,g,u,b),g.x+=g.w,g.y+=g.h,Fl(a.rightAndBottom,g,u,b),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Bt(a.chartArea,y=>{const _=y.box;Object.assign(_,e.chartArea),_.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Du{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,o){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,o?Math.floor(i/o):n)}}isAttached(t){return!0}updateConfig(t){}}class gm extends Du{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ar="$chartjs",mm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wl=e=>e===null||e==="";function bm(e,t){const i=e.style,n=e.getAttribute("height"),o=e.getAttribute("width");if(e[ar]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Wl(o)){const r=Tl(e,"width");r!==void 0&&(e.width=r)}if(Wl(n))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Tl(e,"height");r!==void 0&&(e.height=r)}return e}const Nu=Cg?{passive:!0}:!1;function ym(e,t,i){e&&e.addEventListener(t,i,Nu)}function _m(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,Nu)}function wm(e,t){const i=mm[e.type]||e.type,{x:n,y:o}=vi(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:o!==void 0?o:null}}function Sr(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function vm(e,t,i){const n=e.canvas,o=new MutationObserver(r=>{let s=!1;for(const a of r)s=s||Sr(a.addedNodes,n),s=s&&!Sr(a.removedNodes,n);s&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}function Sm(e,t,i){const n=e.canvas,o=new MutationObserver(r=>{let s=!1;for(const a of r)s=s||Sr(a.removedNodes,n),s=s&&!Sr(a.addedNodes,n);s&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}const kn=new Map;let zl=0;function ju(){const e=window.devicePixelRatio;e!==zl&&(zl=e,kn.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function xm(e,t){kn.size||window.addEventListener("resize",ju),kn.set(e,t)}function Em(e){kn.delete(e),kn.size||window.removeEventListener("resize",ju)}function km(e,t,i){const n=e.canvas,o=n&&da(n);if(!o)return;const r=yu((a,l)=>{const h=o.clientWidth;i(a,l),h<o.clientWidth&&i()},window),s=new ResizeObserver(a=>{const l=a[0],h=l.contentRect.width,c=l.contentRect.height;h===0&&c===0||r(h,c)});return s.observe(o),xm(e,r),s}function es(e,t,i){i&&i.disconnect(),t==="resize"&&Em(e)}function Am(e,t,i){const n=e.canvas,o=yu(r=>{e.ctx!==null&&i(wm(r,e))},e);return ym(n,t,o),o}class Tm extends Du{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(bm(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[ar])return!1;const n=i[ar].initial;["height","width"].forEach(r=>{const s=n[r];qt(s)?i.removeAttribute(r):i.setAttribute(r,s)});const o=n.style||{};return Object.keys(o).forEach(r=>{i.style[r]=o[r]}),i.width=i.width,delete i[ar],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const o=t.$proxies||(t.$proxies={}),s={attach:vm,detach:Sm,resize:km}[i]||Am;o[i]=s(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),o=n[i];if(!o)return;({attach:es,detach:es,resize:es}[i]||_m)(t,i,o),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,o){return Ig(t,i,n,o)}isAttached(t){const i=t&&da(t);return!!(i&&i.isConnected)}}function Im(e){return!fa()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?gm:Tm}class Qe{constructor(){vt(this,"x");vt(this,"y");vt(this,"active",!1);vt(this,"options");vt(this,"$animations")}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return wr(this.x)&&wr(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const o={};return t.forEach(r=>{o[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),o}}vt(Qe,"defaults",{}),vt(Qe,"defaultRoutes");function Cm(e,t){const i=e.options.ticks,n=Om(e),o=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?Mm(t):[],s=r.length,a=r[0],l=r[s-1],h=[];if(s>o)return Rm(t,h,r,s/o),h;const c=Pm(r,t,o);if(s>0){let u,d;const g=s>1?Math.round((l-a)/(s-1)):null;for(Vn(t,h,c,qt(g)?0:a-g,a),u=0,d=s-1;u<d;u++)Vn(t,h,c,r[u],r[u+1]);return Vn(t,h,c,l,qt(g)?t.length:l+g),h}return Vn(t,h,c),h}function Om(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),o=e._maxLength/i;return Math.floor(Math.min(n,o))}function Pm(e,t,i){const n=Bm(e),o=t.length/i;if(!n)return Math.max(o,1);const r=Ip(n);for(let s=0,a=r.length-1;s<a;s++){const l=r[s];if(l>o)return l}return Math.max(o,1)}function Mm(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function Rm(e,t,i,n){let o=0,r=i[0],s;for(n=Math.ceil(n),s=0;s<e.length;s++)s===r&&(t.push(e[s]),o++,r=i[o*n])}function Vn(e,t,i,n,o){const r=Ot(n,0),s=Math.min(Ot(o,e.length),e.length);let a=0,l,h,c;for(i=Math.ceil(i),o&&(l=o-n,i=l/Math.floor(l/i)),c=r;c<0;)a++,c=Math.round(r+a*i);for(h=Math.max(r,0);h<s;h++)h===c&&(t.push(e[h]),a++,c=Math.round(r+a*i))}function Bm(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const Lm=e=>e==="left"?"right":e==="right"?"left":e,Hl=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,$l=(e,t)=>Math.min(t||e,e);function Vl(e,t){const i=[],n=e.length/t,o=e.length;let r=0;for(;r<o;r+=n)i.push(e[Math.floor(r)]);return i}function Dm(e,t,i){const n=e.ticks.length,o=Math.min(t,n-1),r=e._startPixel,s=e._endPixel,a=1e-6;let l=e.getPixelForTick(o),h;if(!(i&&(n===1?h=Math.max(l-r,s-l):t===0?h=(e.getPixelForTick(1)-l)/2:h=(l-e.getPixelForTick(o-1))/2,l+=o<t?h:-h,l<r-a||l>s+a)))return l}function Nm(e,t){Bt(e,i=>{const n=i.gc,o=n.length/2;let r;if(o>t){for(r=0;r<o;++r)delete i.data[n[r]];n.splice(0,o)}})}function rn(e){return e.drawTicks?e.tickLength:0}function ql(e,t){if(!e.display)return 0;const i=oe(e.font,t),n=ye(e.padding);return(Jt(e.text)?e.text.length:1)*i.lineHeight+n.height}function jm(e,t){return Di(e,{scale:t,type:"scale"})}function Um(e,t,i){return Di(e,{tick:i,index:t,type:"tick"})}function Fm(e,t,i){let n=sa(e);return(i&&t!=="right"||!i&&t==="right")&&(n=Lm(n)),n}function Wm(e,t,i,n){const{top:o,left:r,bottom:s,right:a,chart:l}=e,{chartArea:h,scales:c}=l;let u=0,d,g,b;const y=s-o,_=a-r;if(e.isHorizontal()){if(g=se(n,r,a),Mt(i)){const E=Object.keys(i)[0],x=i[E];b=c[E].getPixelForValue(x)+y-t}else i==="center"?b=(h.bottom+h.top)/2+y-t:b=Hl(e,i,t);d=a-r}else{if(Mt(i)){const E=Object.keys(i)[0],x=i[E];g=c[E].getPixelForValue(x)-_+t}else i==="center"?g=(h.left+h.right)/2-_+t:g=Hl(e,i,t);b=se(n,s,o),u=i==="left"?-xe:xe}return{titleX:g,titleY:b,maxWidth:d,rotation:u}}class Gi extends Qe{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:o}=this;return t=Ae(t,Number.POSITIVE_INFINITY),i=Ae(i,Number.NEGATIVE_INFINITY),n=Ae(n,Number.POSITIVE_INFINITY),o=Ae(o,Number.NEGATIVE_INFINITY),{min:Ae(t,n),max:Ae(i,o),minDefined:be(t),maxDefined:be(i)}}getMinMax(t){let{min:i,max:n,minDefined:o,maxDefined:r}=this.getUserBounds(),s;if(o&&r)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,h=a.length;l<h;++l)s=a[l].controller.getMinMax(this,t),o||(i=Math.min(i,s.min)),r||(n=Math.max(n,s.max));return i=r&&i>n?n:i,n=o&&i>n?i:n,{min:Ae(i,Ae(n,i)),max:Ae(n,Ae(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ut(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:o,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=og(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Vl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=Cm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ut(this.options.afterUpdate,[this])}beforeSetDimensions(){Ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ut(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ut(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n],r.label=Ut(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=$l(this.ticks.length,t.ticks.maxTicksLimit),o=i.minRotation||0,r=i.maxRotation;let s=o,a,l,h;if(!this._isVisible()||!i.display||o>=r||n<=1||!this.isHorizontal()){this.labelRotation=o;return}const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,g=Re(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:g/(n-1),u+6>a&&(a=g/(n-(t.offset?.5:1)),l=this.maxHeight-rn(t.grid)-i.padding-ql(t.title,this.chart.options.font),h=Math.sqrt(u*u+d*d),s=Pp(Math.min(Math.asin(Re((c.highest.height+6)/a,-1,1)),Math.asin(Re(l/h,-1,1))-Math.asin(Re(d/h,-1,1)))),s=Math.max(o,Math.min(r,s))),this.labelRotation=s}afterCalculateLabelRotation(){Ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ut(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:o,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const l=ql(o,i.options.font);if(a?(t.width=this.maxWidth,t.height=rn(r)+l):(t.height=this.maxHeight,t.width=rn(r)+l),n.display&&this.ticks.length){const{first:h,last:c,widest:u,highest:d}=this._getLabelSizes(),g=n.padding*2,b=Ai(this.labelRotation),y=Math.cos(b),_=Math.sin(b);if(a){const E=n.mirror?0:_*u.width+y*d.height;t.height=Math.min(this.maxHeight,t.height+E+g)}else{const E=n.mirror?0:y*u.width+_*d.height;t.width=Math.min(this.maxWidth,t.width+E+g)}this._calculatePadding(h,c,_,y)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,o){const{ticks:{align:r,padding:s},position:a}=this.options,l=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,g=0;l?h?(d=o*t.width,g=n*i.height):(d=n*t.height,g=o*i.width):r==="start"?g=i.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,g=i.width/2),this.paddingLeft=Math.max((d-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((g-u+s)*this.width/(this.width-u),0)}else{let c=i.height/2,u=t.height/2;r==="start"?(c=0,u=t.height):r==="end"&&(c=i.height,u=0),this.paddingTop=c+s,this.paddingBottom=u+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ut(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)qt(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Vl(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:o,_longestTextCache:r}=this,s=[],a=[],l=Math.floor(i/$l(i,n));let h=0,c=0,u,d,g,b,y,_,E,x,w,O,P;for(u=0;u<i;u+=l){if(b=t[u].label,y=this._resolveTickFontOptions(u),o.font=_=y.string,E=r[_]=r[_]||{data:{},gc:[]},x=y.lineHeight,w=O=0,!qt(b)&&!Jt(b))w=Sl(o,E.data,E.gc,w,b),O=x;else if(Jt(b))for(d=0,g=b.length;d<g;++d)P=b[d],!qt(P)&&!Jt(P)&&(w=Sl(o,E.data,E.gc,w,P),O+=x);s.push(w),a.push(O),h=Math.max(w,h),c=Math.max(O,c)}Nm(r,i);const k=s.indexOf(h),T=a.indexOf(c),I=N=>({width:s[N]||0,height:a[N]||0});return{first:I(0),last:I(i-1),widest:I(k),highest:I(T),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return Bp(this._alignToPixels?bi(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=Um(this.getContext(),t,n))}return this.$context||(this.$context=jm(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=Ai(this.labelRotation),n=Math.abs(Math.cos(i)),o=Math.abs(Math.sin(i)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,a=r?r.widest.width+s:0,l=r?r.highest.height+s:0;return this.isHorizontal()?l*n>a*o?a/n:l/o:l*o<a*n?l/n:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,o=this.options,{grid:r,position:s,border:a}=o,l=r.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=rn(r),g=[],b=a.setContext(this.getContext()),y=b.display?b.width:0,_=y/2,E=function(st){return bi(n,st,y)};let x,w,O,P,k,T,I,N,K,Q,A,H;if(s==="top")x=E(this.bottom),T=this.bottom-d,N=x-_,Q=E(t.top)+_,H=t.bottom;else if(s==="bottom")x=E(this.top),Q=t.top,H=E(t.bottom)-_,T=x+_,N=this.top+d;else if(s==="left")x=E(this.right),k=this.right-d,I=x-_,K=E(t.left)+_,A=t.right;else if(s==="right")x=E(this.left),K=t.left,A=E(t.right)-_,k=x+_,I=this.left+d;else if(i==="x"){if(s==="center")x=E((t.top+t.bottom)/2+.5);else if(Mt(s)){const st=Object.keys(s)[0],et=s[st];x=E(this.chart.scales[st].getPixelForValue(et))}Q=t.top,H=t.bottom,T=x+_,N=T+d}else if(i==="y"){if(s==="center")x=E((t.left+t.right)/2);else if(Mt(s)){const st=Object.keys(s)[0],et=s[st];x=E(this.chart.scales[st].getPixelForValue(et))}k=x-_,I=k-d,K=t.left,A=t.right}const J=Ot(o.ticks.maxTicksLimit,u),q=Math.max(1,Math.ceil(u/J));for(w=0;w<u;w+=q){const st=this.getContext(w),et=r.setContext(st),$=a.setContext(st),mt=et.lineWidth,rt=et.color,_t=$.dash||[],v=$.dashOffset,X=et.tickWidth,lt=et.tickColor,wt=et.tickBorderDash||[],ot=et.tickBorderDashOffset;O=Dm(this,w,l),O!==void 0&&(P=bi(n,O,mt),h?k=I=K=A=P:T=N=Q=H=P,g.push({tx1:k,ty1:T,tx2:I,ty2:N,x1:K,y1:Q,x2:A,y2:H,width:mt,color:rt,borderDash:_t,borderDashOffset:v,tickWidth:X,tickColor:lt,tickBorderDash:wt,tickBorderDashOffset:ot}))}return this._ticksLength=u,this._borderValue=x,g}_computeLabelItems(t){const i=this.axis,n=this.options,{position:o,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:c,mirror:u}=r,d=rn(n.grid),g=d+c,b=u?-c:g,y=-Ai(this.labelRotation),_=[];let E,x,w,O,P,k,T,I,N,K,Q,A,H="middle";if(o==="top")k=this.bottom-b,T=this._getXAxisLabelAlignment();else if(o==="bottom")k=this.top+b,T=this._getXAxisLabelAlignment();else if(o==="left"){const q=this._getYAxisLabelAlignment(d);T=q.textAlign,P=q.x}else if(o==="right"){const q=this._getYAxisLabelAlignment(d);T=q.textAlign,P=q.x}else if(i==="x"){if(o==="center")k=(t.top+t.bottom)/2+g;else if(Mt(o)){const q=Object.keys(o)[0],st=o[q];k=this.chart.scales[q].getPixelForValue(st)+g}T=this._getXAxisLabelAlignment()}else if(i==="y"){if(o==="center")P=(t.left+t.right)/2-g;else if(Mt(o)){const q=Object.keys(o)[0],st=o[q];P=this.chart.scales[q].getPixelForValue(st)}T=this._getYAxisLabelAlignment(d).textAlign}i==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const J=this._getLabelSizes();for(E=0,x=a.length;E<x;++E){w=a[E],O=w.label;const q=r.setContext(this.getContext(E));I=this.getPixelForTick(E)+r.labelOffset,N=this._resolveTickFontOptions(E),K=N.lineHeight,Q=Jt(O)?O.length:1;const st=Q/2,et=q.color,$=q.textStrokeColor,mt=q.textStrokeWidth;let rt=T;s?(P=I,T==="inner"&&(E===x-1?rt=this.options.reverse?"left":"right":E===0?rt=this.options.reverse?"right":"left":rt="center"),o==="top"?h==="near"||y!==0?A=-Q*K+K/2:h==="center"?A=-J.highest.height/2-st*K+K:A=-J.highest.height+K/2:h==="near"||y!==0?A=K/2:h==="center"?A=J.highest.height/2-st*K:A=J.highest.height-Q*K,u&&(A*=-1),y!==0&&!q.showLabelBackdrop&&(P+=K/2*Math.sin(y))):(k=I,A=(1-Q)*K/2);let _t;if(q.showLabelBackdrop){const v=ye(q.backdropPadding),X=J.heights[E],lt=J.widths[E];let wt=A-v.top,ot=0-v.left;switch(H){case"middle":wt-=X/2;break;case"bottom":wt-=X;break}switch(T){case"center":ot-=lt/2;break;case"right":ot-=lt;break;case"inner":E===x-1?ot-=lt:E>0&&(ot-=lt/2);break}_t={left:ot,top:wt,width:lt+v.width,height:X+v.height,color:q.backdropColor}}_.push({label:O,font:N,textOffset:A,options:{rotation:y,color:et,strokeColor:$,strokeWidth:mt,textAlign:rt,textBaseline:H,translation:[P,k],backdrop:_t}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-Ai(this.labelRotation))return t==="top"?"left":"right";let o="center";return i.align==="start"?o="left":i.align==="end"?o="right":i.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:o,padding:r}}=this.options,s=this._getLabelSizes(),a=t+r,l=s.widest.width;let h,c;return i==="left"?o?(c=this.right+r,n==="near"?h="left":n==="center"?(h="center",c+=l/2):(h="right",c+=l)):(c=this.right-a,n==="near"?h="right":n==="center"?(h="center",c-=l/2):(h="left",c=this.left)):i==="right"?o?(c=this.left+r,n==="near"?h="right":n==="center"?(h="center",c-=l/2):(h="left",c-=l)):(c=this.left+a,n==="near"?h="left":n==="center"?(h="center",c+=l/2):(h="right",c=this.right)):h="right",{textAlign:h,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:o,width:r,height:s}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,o,r,s),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const o=this.ticks.findIndex(r=>r.value===t);return o>=0?i.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const a=(l,h,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(i.display)for(r=0,s=o.length;r<s;++r){const l=o[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:o}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=o.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,c,u,d;this.isHorizontal()?(h=bi(t,this.left,s)-s/2,c=bi(t,this.right,a)+a/2,u=d=l):(u=bi(t,this.top,s)-s/2,d=bi(t,this.bottom,a)+a/2,h=c=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(h,u),i.lineTo(c,d),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,o=this._computeLabelArea();o&&aa(n,o);const r=this.getLabelItems(t);for(const s of r){const a=s.options,l=s.font,h=s.label,c=s.textOffset;En(n,h,0,c,l,a)}o&&la(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:o}}=this;if(!n.display)return;const r=oe(n.font),s=ye(n.padding),a=n.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||Mt(i)?(l+=s.bottom,Jt(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=s.top;const{titleX:h,titleY:c,maxWidth:u,rotation:d}=Wm(this,l,i,a);En(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:Fm(a,i,o),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=Ot(t.grid&&t.grid.z,-1),o=Ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Gi.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let r,s;for(r=0,s=i.length;r<s;++r){const a=i[r];a[n]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return oe(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class qn{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;$m(i)&&(n=this.register(i));const o=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,zm(t,s,n),this.override&&Yt.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,o=this.scope;n in i&&delete i[n],o&&n in Yt[o]&&(delete Yt[o][n],this.override&&delete Pi[n])}}function zm(e,t,i){const n=Sn(Object.create(null),[i?Yt.get(i):{},Yt.get(t),e.defaults]);Yt.set(t,n),e.defaultRoutes&&Hm(t,e.defaultRoutes),e.descriptors&&Yt.describe(t,e.descriptors)}function Hm(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),o=n.pop(),r=[e].concat(n).join("."),s=t[i].split("."),a=s.pop(),l=s.join(".");Yt.route(r,o,l,a)})}function $m(e){return"id"in e&&"defaults"in e}class Vm{constructor(){this.controllers=new qn(or,"datasets",!0),this.elements=new qn(Qe,"elements"),this.plugins=new qn(Object,"plugins"),this.scales=new qn(Gi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(o=>{const r=n||this._getRegistryForType(o);n||r.isForType(o)||r===this.plugins&&o.id?this._exec(t,r,o):Bt(o,s=>{const a=n||this._getRegistryForType(s);this._exec(t,a,s)})})}_exec(t,i,n){const o=na(t);Ut(n["before"+o],[],n),i[t](n),Ut(n["after"+o],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const o=i.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return o}}var Oe=new Vm;class qm{constructor(){this._init=[]}notify(t,i,n,o){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=o?this._descriptors(t).filter(o):this._descriptors(t),s=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,i,n,o){o=o||{};for(const r of t){const s=r.plugin,a=s[n],l=[i,o,r.options];if(Ut(a,l,s)===!1&&o.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,o=Ot(n.options&&n.options.plugins,{}),r=Ym(n);return o===!1&&!i?[]:Gm(t,r,o,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,o=(r,s)=>r.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(o(i,n),t,"stop"),this._notify(o(n,i),t,"start")}}function Ym(e){const t={},i=[],n=Object.keys(Oe.plugins.items);for(let r=0;r<n.length;r++)i.push(Oe.getPlugin(n[r]));const o=e.plugins||[];for(let r=0;r<o.length;r++){const s=o[r];i.indexOf(s)===-1&&(i.push(s),t[s.id]=!0)}return{plugins:i,localIds:t}}function Km(e,t){return!t&&e===!1?null:e===!0?{}:e}function Gm(e,{plugins:t,localIds:i},n,o){const r=[],s=e.getContext();for(const a of t){const l=a.id,h=Km(n[l],o);h!==null&&r.push({plugin:a,options:Qm(e.config,{plugin:a,local:i[l]},h,s)})}return r}function Qm(e,{plugin:t,local:i},n,o){const r=e.pluginScopeKeys(t),s=e.getOptionScopes(n,r);return i&&t.defaults&&s.push(t.defaults),e.createResolver(s,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Do(e,t){const i=Yt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Xm(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Jm(e,t){return e===t?"_index_":"_value_"}function Yl(e){if(e==="x"||e==="y"||e==="r")return e}function Zm(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function No(e,...t){if(Yl(e))return e;for(const i of t){const n=i.axis||Zm(i.position)||e.length>1&&Yl(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Kl(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function tb(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return Kl(e,"x",i[0])||Kl(e,"y",i[0])}return{}}function eb(e,t){const i=Pi[e.type]||{scales:{}},n=t.scales||{},o=Do(e.type,t),r=Object.create(null);return Object.keys(n).forEach(s=>{const a=n[s];if(!Mt(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=No(s,a,tb(s,e),Yt.scales[a.type]),h=Jm(l,o),c=i.scales||{};r[s]=mn(Object.create(null),[{axis:l},a,c[l],c[h]])}),e.data.datasets.forEach(s=>{const a=s.type||e.type,l=s.indexAxis||Do(a,t),c=(Pi[a]||{}).scales||{};Object.keys(c).forEach(u=>{const d=Xm(u,l),g=s[d+"AxisID"]||d;r[g]=r[g]||Object.create(null),mn(r[g],[{axis:d},n[g],c[u]])})}),Object.keys(r).forEach(s=>{const a=r[s];mn(a,[Yt.scales[a.type],Yt.scale])}),r}function Uu(e){const t=e.options||(e.options={});t.plugins=Ot(t.plugins,{}),t.scales=eb(e,t)}function Fu(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ib(e){return e=e||{},e.data=Fu(e.data),Uu(e),e}const Gl=new Map,Wu=new Set;function Yn(e,t){let i=Gl.get(e);return i||(i=t(),Gl.set(e,i),Wu.add(i)),i}const sn=(e,t,i)=>{const n=br(t,i);n!==void 0&&e.add(n)};class nb{constructor(t){this._config=ib(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Fu(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Uu(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Yn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Yn(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Yn(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return Yn(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let o=n.get(t);return(!o||i)&&(o=new Map,n.set(t,o)),o}getOptionScopes(t,i,n){const{options:o,type:r}=this,s=this._cachedScopes(t,n),a=s.get(i);if(a)return a;const l=new Set;i.forEach(c=>{t&&(l.add(t),c.forEach(u=>sn(l,t,u))),c.forEach(u=>sn(l,o,u)),c.forEach(u=>sn(l,Pi[r]||{},u)),c.forEach(u=>sn(l,Yt,u)),c.forEach(u=>sn(l,Ro,u))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),Wu.has(i)&&s.set(i,h),h}chartOptionScopes(){const{options:t,type:i}=this;return[t,Pi[i]||{},Yt.datasets[i]||{},{type:i},Yt,Ro]}resolveNamedOptions(t,i,n,o=[""]){const r={$shared:!0},{resolver:s,subPrefixes:a}=Ql(this._resolverCache,t,o);let l=s;if(sb(s,i)){r.$shared=!1,n=li(n)?n():n;const h=this.createResolver(t,n,a);l=$i(s,n,h)}for(const h of i)r[h]=l[h];return r}createResolver(t,i,n=[""],o){const{resolver:r}=Ql(this._resolverCache,t,n);return Mt(i)?$i(r,i,void 0,o):r}}function Ql(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const o=i.join();let r=n.get(o);return r||(r={resolver:ha(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(o,r)),r}const rb=e=>Mt(e)&&Object.getOwnPropertyNames(e).some(t=>li(e[t]));function sb(e,t){const{isScriptable:i,isIndexable:n}=Eu(e);for(const o of t){const r=i(o),s=n(o),a=(s||r)&&e[o];if(r&&(li(a)||rb(a))||s&&Jt(a))return!0}return!1}var ob="4.4.7";const ab=["top","bottom","left","right","chartArea"];function Xl(e,t){return e==="top"||e==="bottom"||ab.indexOf(e)===-1&&t==="x"}function Jl(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Zl(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Ut(i&&i.onComplete,[e],t)}function lb(e){const t=e.chart,i=t.options.animation;Ut(i&&i.onProgress,[e],t)}function zu(e){return fa()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const lr={},th=e=>{const t=zu(e);return Object.values(lr).filter(i=>i.canvas===t).pop()};function hb(e,t,i){const n=Object.keys(e);for(const o of n){const r=+o;if(r>=t){const s=e[o];delete e[o],(i>0||r>t)&&(e[r+i]=s)}}}function cb(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function Kn(e,t,i){return e.options.clip?e[i]:t[i]}function ub(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:Kn(i,t,"left"),right:Kn(i,t,"right"),top:Kn(n,t,"top"),bottom:Kn(n,t,"bottom")}:t}var ti;let ga=(ti=class{static register(...t){Oe.add(...t),eh()}static unregister(...t){Oe.remove(...t),eh()}constructor(t,i){const n=this.config=new nb(i),o=zu(t),r=th(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Im(o)),this.platform.updateConfig(n);const a=this.platform.acquireContext(o,s.aspectRatio),l=a&&a.canvas,h=l&&l.height,c=l&&l.width;if(this.id=_p(),this.ctx=a,this.canvas=l,this.width=c,this.height=h,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Up(u=>this.update(u),s.resizeDelay||0),this._dataChanges=[],lr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ue.listen(this,"complete",Zl),Ue.listen(this,"progress",lb),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:o,_aspectRatio:r}=this;return qt(t)?i&&r?r:o?n/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Oe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Al(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xl(this.canvas,this.ctx),this}stop(){return Ue.stop(this),this}resize(t,i){Ue.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,o=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(o,t,i,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Al(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Ut(n.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Bt(i,(n,o)=>{n.id=o})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,o=Object.keys(n).reduce((s,a)=>(s[a]=!1,s),{});let r=[];i&&(r=r.concat(Object.keys(i).map(s=>{const a=i[s],l=No(s,a),h=l==="r",c=l==="x";return{options:a,dposition:h?"chartArea":c?"bottom":"left",dtype:h?"radialLinear":c?"category":"linear"}}))),Bt(r,s=>{const a=s.options,l=a.id,h=No(l,a),c=Ot(a.type,s.dtype);(a.position===void 0||Xl(a.position,h)!==Xl(s.dposition))&&(a.position=s.dposition),o[l]=!0;let u=null;if(l in n&&n[l].type===c)u=n[l];else{const d=Oe.getScale(c);u=new d({id:l,type:c,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),Bt(o,(s,a)=>{s||delete n[a]}),Bt(n,s=>{me.configure(this,s,s.options),me.addBox(this,s)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((o,r)=>o.index-r.index),n>i){for(let o=i;o<n;++o)this._destroyDatasetMeta(o);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(Jl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,o)=>{i.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=i.length;n<o;n++){const r=i[n];let s=this.getDatasetMeta(n);const a=r.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=a,s.indexAxis=r.indexAxis||Do(a,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const l=Oe.getController(a),{datasetElementType:h,dataElementType:c}=Yt.datasets[a];Object.assign(l,{dataElementType:Oe.getElement(c),datasetElementType:h&&Oe.getElement(h)}),s.controller=new l(this,n),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){Bt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let h=0,c=this.data.datasets.length;h<c;h++){const{controller:u}=this.getDatasetMeta(h),d=!o&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),s=Math.max(+u.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),o||Bt(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Jl("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Bt(this.scales,t=>{me.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!dl(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:r}of i){const s=n==="_removeElements"?-r:r;hb(t,o,s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=r=>new Set(t.filter(s=>s[0]===r).map((s,a)=>a+","+s.splice(1).join(","))),o=n(0);for(let r=1;r<i;r++)if(!dl(o,n(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;me.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Bt(this.boxes,o=>{n&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,li(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),o={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(n.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ue.has(this)?this.attached&&!Ue.running(this)&&Ue.start(this):(this.draw(),Zl({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let o,r;for(o=0,r=i.length;o<r;++o){const s=i[o];(!t||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,o=!n.disabled,r=ub(t,this.chartArea),s={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(o&&aa(i,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),t.controller.draw(),o&&la(i),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return xn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,o){const r=am.modes[i];return typeof r=="function"?r(this,t,n,o):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let o=n.filter(r=>r&&r._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=Di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const o=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,o);yr(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Ue.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xl(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete lr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(r,s)=>{i.addEventListener(this,r,s),t[r]=s},o=(r,s,a)=>{r.offsetX=s,r.offsetY=a,this._eventHandler(r)};Bt(this.options.events,r=>n(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(l,h)=>{i.addEventListener(this,l,h),t[l]=h},o=(l,h)=>{t[l]&&(i.removeEventListener(this,l,h),delete t[l])},r=(l,h)=>{this.canvas&&this.resize(l,h)};let s;const a=()=>{o("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():s()}unbindEvents(){Bt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Bt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const o=n?"set":"remove";let r,s,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){s=t[a];const h=s&&this.getDatasetMeta(s.datasetIndex).controller;h&&h[o+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:r,index:s})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[s],index:s}});!gr(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const o=this.options.hover,r=(l,h)=>l.filter(c=>!h.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),s=r(i,t),a=n?t:r(t,i);s.length&&this.updateHoverStyle(s,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},o=s=>(s.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,o)===!1)return;const r=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(r||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:o=[],options:r}=this,s=i,a=this._getActiveElements(t,o,n,s),l=kp(t),h=cb(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Ut(r.onHover,[t,a,this],this),l&&Ut(r.onClick,[t,a,this],this));const c=!gr(a,o);return(c||i)&&(this._active=a,this._updateHoverStyles(a,o,i)),this._lastEvent=h,c}_getActiveElements(t,i,n,o){if(t.type==="mouseout")return[];if(!n)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,o)}},vt(ti,"defaults",Yt),vt(ti,"instances",lr),vt(ti,"overrides",Pi),vt(ti,"registry",Oe),vt(ti,"version",ob),vt(ti,"getChart",th),ti);function eh(){return Bt(ga.instances,e=>e._plugins.invalidate())}function Hu(e,t,i=t){e.lineCap=Ot(i.borderCapStyle,t.borderCapStyle),e.setLineDash(Ot(i.borderDash,t.borderDash)),e.lineDashOffset=Ot(i.borderDashOffset,t.borderDashOffset),e.lineJoin=Ot(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Ot(i.borderWidth,t.borderWidth),e.strokeStyle=Ot(i.borderColor,t.borderColor)}function fb(e,t,i){e.lineTo(i.x,i.y)}function db(e){return e.stepped?Qp:e.tension||e.cubicInterpolationMode==="monotone"?Xp:fb}function $u(e,t,i={}){const n=e.length,{start:o=0,end:r=n-1}=i,{start:s,end:a}=t,l=Math.max(o,s),h=Math.min(r,a),c=o<s&&r<s||o>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:h<l&&!c?n+h-l:h-l}}function pb(e,t,i,n){const{points:o,options:r}=t,{count:s,start:a,loop:l,ilen:h}=$u(o,i,n),c=db(r);let{move:u=!0,reverse:d}=n||{},g,b,y;for(g=0;g<=h;++g)b=o[(a+(d?h-g:g))%s],!b.skip&&(u?(e.moveTo(b.x,b.y),u=!1):c(e,y,b,d,r.stepped),y=b);return l&&(b=o[(a+(d?h:0))%s],c(e,y,b,d,r.stepped)),!!l}function gb(e,t,i,n){const o=t.points,{count:r,start:s,ilen:a}=$u(o,i,n),{move:l=!0,reverse:h}=n||{};let c=0,u=0,d,g,b,y,_,E;const x=O=>(s+(h?a-O:O))%r,w=()=>{y!==_&&(e.lineTo(c,_),e.lineTo(c,y),e.lineTo(c,E))};for(l&&(g=o[x(0)],e.moveTo(g.x,g.y)),d=0;d<=a;++d){if(g=o[x(d)],g.skip)continue;const O=g.x,P=g.y,k=O|0;k===b?(P<y?y=P:P>_&&(_=P),c=(u*c+O)/++u):(w(),e.lineTo(O,P),b=k,u=0,y=_=P),E=P}w()}function jo(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?gb:pb}function mb(e){return e.stepped?Og:e.tension||e.cubicInterpolationMode==="monotone"?Pg:Si}function bb(e,t,i,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,i,n)&&o.closePath()),Hu(e,t.options),e.stroke(o)}function yb(e,t,i,n){const{segments:o,options:r}=t,s=jo(t);for(const a of o)Hu(e,r,a.style),e.beginPath(),s(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}const _b=typeof Path2D=="function";function wb(e,t,i,n){_b&&!t.options.segment?bb(e,t,i,n):yb(e,t,i,n)}class fn extends Qe{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;Sg(this._points,n,t,o,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ug(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){const n=this.options,o=t[i],r=this.points,s=Dg(this,{property:i,start:o,end:o});if(!s.length)return;const a=[],l=mb(n);let h,c;for(h=0,c=s.length;h<c;++h){const{start:u,end:d}=s[h],g=r[u],b=r[d];if(g===b){a.push(g);continue}const y=Math.abs((o-g[i])/(b[i]-g[i])),_=l(g,b,y,n.stepped);_[i]=t[i],a.push(_)}return a.length===1?a[0]:a}pathSegment(t,i,n){return jo(this)(t,this,i,n)}path(t,i,n){const o=this.segments,r=jo(this);let s=this._loop;i=i||0,n=n||this.points.length-i;for(const a of o)s&=r(t,this,a,{start:i,end:i+n-1});return!!s}draw(t,i,n,o){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),wb(t,this,n,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}vt(fn,"id","line"),vt(fn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),vt(fn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),vt(fn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ih(e,t,i,n){const o=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<o.radius+o.hitRadius}class hr extends Qe{constructor(i){super();vt(this,"parsed");vt(this,"skip");vt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,o){const r=this.options,{x:s,y:a}=this.getProps(["x","y"],o);return Math.pow(i-s,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(i,n){return ih(this,i,"x",n)}inYRange(i,n){return ih(this,i,"y",n)}getCenterPoint(i){const{x:n,y:o}=this.getProps(["x","y"],i);return{x:n,y:o}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);const o=n&&i.borderWidth||0;return(n+o)*2}draw(i,n){const o=this.options;this.skip||o.radius<.1||!xn(this,n,this.size(o)/2)||(i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.fillStyle=o.backgroundColor,Bo(i,o,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}vt(hr,"id","point"),vt(hr,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),vt(hr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const nh=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},vb=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class rh extends Qe{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Ut(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,o)=>t.sort(n,o,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,o=oe(n.font),r=o.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nh(n,r);let h,c;i.font=o.string,this.isHorizontal()?(h=this.maxWidth,c=this._fitRows(s,r,a,l)+10):(c=this.maxHeight,h=this._fitCols(s,o,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,o){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],c=o+a;let u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,g=-c;return this.legendItems.forEach((b,y)=>{const _=n+i/2+r.measureText(b.text).width;(y===0||h[h.length-1]+_+2*a>s)&&(u+=c,h[h.length-(y>0?0:1)]=0,g+=c,d++),l[y]={left:0,top:g,row:d,width:_,height:o},h[h.length-1]+=_+a}),u}_fitCols(t,i,n,o){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],c=s-t;let u=a,d=0,g=0,b=0,y=0;return this.legendItems.forEach((_,E)=>{const{itemWidth:x,itemHeight:w}=Sb(n,i,r,_,o);E>0&&g+w+2*a>c&&(u+=d+a,h.push({width:d,height:g}),b+=d+a,y++,d=g=0),l[E]={left:b,top:g,col:y,width:x,height:w},d=Math.max(d,x),g+=w+a}),u+=d,h.push({width:d,height:g}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:o},rtl:r}}=this,s=zi(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=se(n,this.left+o,this.right-this.lineWidths[a]);for(const h of i)a!==h.row&&(a=h.row,l=se(n,this.left+o,this.right-this.lineWidths[a])),h.top+=this.top+t+o,h.left=s.leftForLtr(s.x(l),h.width),l+=h.width+o}else{let a=0,l=se(n,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const h of i)h.col!==a&&(a=h.col,l=se(n,this.top+t+o,this.bottom-this.columnSizes[a].height)),h.top=l,h.left+=this.left+o,h.left=s.leftForLtr(s.x(h.left),h.width),l+=h.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;aa(t,this),this._draw(),la(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:o}=this,{align:r,labels:s}=t,a=Yt.color,l=zi(t.rtl,this.left,this.width),h=oe(s.font),{padding:c}=s,u=h.size,d=u/2;let g;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=h.string;const{boxWidth:b,boxHeight:y,itemHeight:_}=nh(s,u),E=function(k,T,I){if(isNaN(b)||b<=0||isNaN(y)||y<0)return;o.save();const N=Ot(I.lineWidth,1);if(o.fillStyle=Ot(I.fillStyle,a),o.lineCap=Ot(I.lineCap,"butt"),o.lineDashOffset=Ot(I.lineDashOffset,0),o.lineJoin=Ot(I.lineJoin,"miter"),o.lineWidth=N,o.strokeStyle=Ot(I.strokeStyle,a),o.setLineDash(Ot(I.lineDash,[])),s.usePointStyle){const K={radius:y*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:N},Q=l.xPlus(k,b/2),A=T+d;Su(o,K,Q,A,s.pointStyleWidth&&b)}else{const K=T+Math.max((u-y)/2,0),Q=l.leftForLtr(k,b),A=wn(I.borderRadius);o.beginPath(),Object.values(A).some(H=>H!==0)?Lo(o,{x:Q,y:K,w:b,h:y,radius:A}):o.rect(Q,K,b,y),o.fill(),N!==0&&o.stroke()}o.restore()},x=function(k,T,I){En(o,I.text,k,T+_/2,h,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},w=this.isHorizontal(),O=this._computeTitleHeight();w?g={x:se(r,this.left+c,this.right-n[0]),y:this.top+c+O,line:0}:g={x:this.left+c,y:se(r,this.top+O+c,this.bottom-i[0].height),line:0},Cu(this.ctx,t.textDirection);const P=_+c;this.legendItems.forEach((k,T)=>{o.strokeStyle=k.fontColor,o.fillStyle=k.fontColor;const I=o.measureText(k.text).width,N=l.textAlign(k.textAlign||(k.textAlign=s.textAlign)),K=b+d+I;let Q=g.x,A=g.y;l.setWidth(this.width),w?T>0&&Q+K+c>this.right&&(A=g.y+=P,g.line++,Q=g.x=se(r,this.left+c,this.right-n[g.line])):T>0&&A+P>this.bottom&&(Q=g.x=Q+i[g.line].width+c,g.line++,A=g.y=se(r,this.top+O+c,this.bottom-i[g.line].height));const H=l.x(Q);if(E(H,A,k),Q=Fp(N,Q+b+d,w?Q+K:this.right,t.rtl),x(l.x(Q),A,k),w)g.x+=K+c;else if(typeof k.text!="string"){const J=h.lineHeight;g.y+=Vu(k,J)+c}else g.y+=P}),Ou(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=oe(i.font),o=ye(i.padding);if(!i.display)return;const r=zi(t.rtl,this.left,this.width),s=this.ctx,a=i.position,l=n.size/2,h=o.top+l;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+h,u=se(t.align,u,this.right-d);else{const b=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);c=h+se(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const g=se(a,u,u+d);s.textAlign=r.textAlign(sa(a)),s.textBaseline="middle",s.strokeStyle=i.color,s.fillStyle=i.color,s.font=n.string,En(s,i.text,g,c,n)}_computeTitleHeight(){const t=this.options.title,i=oe(t.font),n=ye(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,o,r;if(cn(t,this.left,this.right)&&cn(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(o=r[n],cn(t,o.left,o.left+o.width)&&cn(i,o.top,o.top+o.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!kb(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,r=vb(o,n);o&&!r&&Ut(i.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!r&&Ut(i.onHover,[t,n,this],this)}else n&&Ut(i.onClick,[t,n,this],this)}}function Sb(e,t,i,n,o){const r=xb(n,e,t,i),s=Eb(o,n,t.lineHeight);return{itemWidth:r,itemHeight:s}}function xb(e,t,i,n){let o=e.text;return o&&typeof o!="string"&&(o=o.reduce((r,s)=>r.length>s.length?r:s)),t+i.size/2+n.measureText(o).width}function Eb(e,t,i){let n=e;return typeof t.text!="string"&&(n=Vu(t,i)),n}function Vu(e,t){const i=e.text?e.text.length:0;return t*i}function kb(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Ab={id:"legend",_element:rh,start(e,t,i){const n=e.legend=new rh({ctx:e.ctx,options:i,chart:e});me.configure(e,n,i),me.addBox(e,n)},stop(e){me.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;me.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),t.hidden=!0):(o.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:r,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(i?0:void 0),c=ye(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:o||h.textAlign,borderRadius:s&&(a||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qu extends Qe{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const o=Jt(n.text)?n.text.length:1;this._padding=ye(n.padding);const r=o*oe(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:o,right:r,options:s}=this,a=s.align;let l=0,h,c,u;return this.isHorizontal()?(c=se(a,n,r),u=i+t,h=r-n):(s.position==="left"?(c=n+t,u=se(a,o,i),l=Zt*-.5):(c=r-t,u=se(a,i,o),l=Zt*.5),h=o-i),{titleX:c,titleY:u,maxWidth:h,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=oe(i.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:h}=this._drawArgs(r);En(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:h,textAlign:sa(i.align),textBaseline:"middle",translation:[s,a]})}}function Tb(e,t){const i=new qu({ctx:e.ctx,options:t,chart:e});me.configure(e,i,t),me.addBox(e,i),e.titleBlock=i}var Ib={id:"title",_element:qu,start(e,t,i){Tb(e,i)},stop(e){const t=e.titleBlock;me.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;me.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const dn={average(e){if(!e.length)return!1;let t,i,n=new Set,o=0,r=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),o+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:o/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,o=Number.POSITIVE_INFINITY,r,s,a;for(r=0,s=e.length;r<s;++r){const l=e[r].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),c=Po(t,h);c<o&&(o=c,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Ce(e,t){return t&&(Jt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Fe(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Cb(e,t){const{element:i,datasetIndex:n,index:o}=t,r=e.getDatasetMeta(n).controller,{label:s,value:a}=r.getLabelAndValue(o);return{chart:e,label:s,parsed:r.getParsed(o),raw:e.data.datasets[n].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function sh(e,t){const i=e.chart.ctx,{body:n,footer:o,title:r}=e,{boxWidth:s,boxHeight:a}=t,l=oe(t.bodyFont),h=oe(t.titleFont),c=oe(t.footerFont),u=r.length,d=o.length,g=n.length,b=ye(t.padding);let y=b.height,_=0,E=n.reduce((O,P)=>O+P.before.length+P.lines.length+P.after.length,0);if(E+=e.beforeBody.length+e.afterBody.length,u&&(y+=u*h.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),E){const O=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=g*O+(E-g)*l.lineHeight+(E-1)*t.bodySpacing}d&&(y+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let x=0;const w=function(O){_=Math.max(_,i.measureText(O).width+x)};return i.save(),i.font=h.string,Bt(e.title,w),i.font=l.string,Bt(e.beforeBody.concat(e.afterBody),w),x=t.displayColors?s+2+t.boxPadding:0,Bt(n,O=>{Bt(O.before,w),Bt(O.lines,w),Bt(O.after,w)}),x=0,i.font=c.string,Bt(e.footer,w),i.restore(),_+=b.width,{width:_,height:y}}function Ob(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function Pb(e,t,i,n){const{x:o,width:r}=n,s=i.caretSize+i.caretPadding;if(e==="left"&&o+r+s>t.width||e==="right"&&o-r-s<0)return!0}function Mb(e,t,i,n){const{x:o,width:r}=i,{width:s,chartArea:{left:a,right:l}}=e;let h="center";return n==="center"?h=o<=(a+l)/2?"left":"right":o<=r/2?h="left":o>=s-r/2&&(h="right"),Pb(h,e,t,i)&&(h="center"),h}function oh(e,t,i){const n=i.yAlign||t.yAlign||Ob(e,i);return{xAlign:i.xAlign||t.xAlign||Mb(e,t,i,n),yAlign:n}}function Rb(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function Bb(e,t,i){let{y:n,height:o}=e;return t==="top"?n+=i:t==="bottom"?n-=o+i:n-=o/2,n}function ah(e,t,i,n){const{caretSize:o,caretPadding:r,cornerRadius:s}=e,{xAlign:a,yAlign:l}=i,h=o+r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:g}=wn(s);let b=Rb(t,a);const y=Bb(t,l,h);return l==="center"?a==="left"?b+=h:a==="right"&&(b-=h):a==="left"?b-=Math.max(c,d)+o:a==="right"&&(b+=Math.max(u,g)+o),{x:Re(b,0,n.width-t.width),y:Re(y,0,n.height-t.height)}}function Gn(e,t,i){const n=ye(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function lh(e){return Ce([],Fe(e))}function Lb(e,t,i){return Di(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function hh(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Yu={beforeTitle:De,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:De,beforeBody:De,beforeLabel:De,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return qt(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:De,afterBody:De,beforeFooter:De,footer:De,afterFooter:De};function he(e,t,i,n){const o=e[t].call(i,n);return typeof o>"u"?Yu[t].call(i,n):o}class Uo extends Qe{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&i.options.animation&&n.animations,r=new Mu(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Lb(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,o=he(n,"beforeTitle",this,t),r=he(n,"title",this,t),s=he(n,"afterTitle",this,t);let a=[];return a=Ce(a,Fe(o)),a=Ce(a,Fe(r)),a=Ce(a,Fe(s)),a}getBeforeBody(t,i){return lh(he(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,o=[];return Bt(t,r=>{const s={before:[],lines:[],after:[]},a=hh(n,r);Ce(s.before,Fe(he(a,"beforeLabel",this,r))),Ce(s.lines,he(a,"label",this,r)),Ce(s.after,Fe(he(a,"afterLabel",this,r))),o.push(s)}),o}getAfterBody(t,i){return lh(he(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,o=he(n,"beforeFooter",this,t),r=he(n,"footer",this,t),s=he(n,"afterFooter",this,t);let a=[];return a=Ce(a,Fe(o)),a=Ce(a,Fe(r)),a=Ce(a,Fe(s)),a}_createItems(t){const i=this._active,n=this.chart.data,o=[],r=[],s=[];let a=[],l,h;for(l=0,h=i.length;l<h;++l)a.push(Cb(this.chart,i[l]));return t.filter&&(a=a.filter((c,u,d)=>t.filter(c,u,d,n))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,n))),Bt(a,c=>{const u=hh(t.callbacks,c);o.push(he(u,"labelColor",this,c)),r.push(he(u,"labelPointStyle",this,c)),s.push(he(u,"labelTextColor",this,c))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=a,a}update(t,i){const n=this.options.setContext(this.getContext()),o=this._active;let r,s=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{const a=dn[n.position].call(this,o,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const l=this._size=sh(this,n),h=Object.assign({},a,l),c=oh(this.chart,n,h),u=ah(n,h,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,o){const r=this.getCaretPosition(t,n,o);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,n){const{xAlign:o,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:l,topRight:h,bottomLeft:c,bottomRight:u}=wn(a),{x:d,y:g}=t,{width:b,height:y}=i;let _,E,x,w,O,P;return r==="center"?(O=g+y/2,o==="left"?(_=d,E=_-s,w=O+s,P=O-s):(_=d+b,E=_+s,w=O-s,P=O+s),x=_):(o==="left"?E=d+Math.max(l,c)+s:o==="right"?E=d+b-Math.max(h,u)-s:E=this.caretX,r==="top"?(w=g,O=w-s,_=E-s,x=E+s):(w=g+y,O=w+s,_=E+s,x=E-s),P=w),{x1:_,x2:E,x3:x,y1:w,y2:O,y3:P}}drawTitle(t,i,n){const o=this.title,r=o.length;let s,a,l;if(r){const h=zi(n.rtl,this.x,this.width);for(t.x=Gn(this,n.titleAlign,n),i.textAlign=h.textAlign(n.titleAlign),i.textBaseline="middle",s=oe(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=s.string,l=0;l<r;++l)i.fillText(o[l],h.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,o,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:h}=r,c=oe(r.bodyFont),u=Gn(this,"left",r),d=o.x(u),g=l<c.lineHeight?(c.lineHeight-l)/2:0,b=i.y+g;if(r.usePointStyle){const y={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=o.leftForLtr(d,h)+h/2,E=b+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Bo(t,y,_,E),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,Bo(t,y,_,E)}else{t.lineWidth=Mt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const y=o.leftForLtr(d,h),_=o.leftForLtr(o.xPlus(d,1),h-2),E=wn(s.borderRadius);Object.values(E).some(x=>x!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Lo(t,{x:y,y:b,w:h,h:l,radius:E}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Lo(t,{x:_,y:b+1,w:h-2,h:l-2,radius:E}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,b,h,l),t.strokeRect(y,b,h,l),t.fillStyle=s.backgroundColor,t.fillRect(_,b+1,h-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:o}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:c}=n,u=oe(n.bodyFont);let d=u.lineHeight,g=0;const b=zi(n.rtl,this.x,this.width),y=function(I){i.fillText(I,b.x(t.x+g),t.y+d/2),t.y+=d+r},_=b.textAlign(s);let E,x,w,O,P,k,T;for(i.textAlign=s,i.textBaseline="middle",i.font=u.string,t.x=Gn(this,_,n),i.fillStyle=n.bodyColor,Bt(this.beforeBody,y),g=a&&_!=="right"?s==="center"?h/2+c:h+2+c:0,O=0,k=o.length;O<k;++O){for(E=o[O],x=this.labelTextColors[O],i.fillStyle=x,Bt(E.before,y),w=E.lines,a&&w.length&&(this._drawColorBox(i,t,O,b,n),d=Math.max(u.lineHeight,l)),P=0,T=w.length;P<T;++P)y(w[P]),d=u.lineHeight;Bt(E.after,y)}g=0,d=u.lineHeight,Bt(this.afterBody,y),t.y-=r}drawFooter(t,i,n){const o=this.footer,r=o.length;let s,a;if(r){const l=zi(n.rtl,this.x,this.width);for(t.x=Gn(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",s=oe(n.footerFont),i.fillStyle=n.footerColor,i.font=s.string,a=0;a<r;++a)i.fillText(o[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,i,n,o){const{xAlign:r,yAlign:s}=this,{x:a,y:l}=t,{width:h,height:c}=n,{topLeft:u,topRight:d,bottomLeft:g,bottomRight:b}=wn(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(a+u,l),s==="top"&&this.drawCaret(t,i,n,o),i.lineTo(a+h-d,l),i.quadraticCurveTo(a+h,l,a+h,l+d),s==="center"&&r==="right"&&this.drawCaret(t,i,n,o),i.lineTo(a+h,l+c-b),i.quadraticCurveTo(a+h,l+c,a+h-b,l+c),s==="bottom"&&this.drawCaret(t,i,n,o),i.lineTo(a+g,l+c),i.quadraticCurveTo(a,l+c,a,l+c-g),s==="center"&&r==="left"&&this.drawCaret(t,i,n,o),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,o=n&&n.x,r=n&&n.y;if(o||r){const s=dn[t.position].call(this,this._active,this._eventPosition);if(!s)return;const a=this._size=sh(this,t),l=Object.assign({},s,this._size),h=oh(i,t,l),c=ah(t,l,h,i);(o._to!==c.x||r._to!==c.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=ye(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,o,i),Cu(t,i.textDirection),r.y+=s.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),Ou(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,o=t.map(({datasetIndex:a,index:l})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[l],index:l}}),r=!gr(n,o),s=this._positionChanged(o,i);(r||s)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],s=this._getActiveElements(t,r,i,n),a=this._positionChanged(s,t),l=i||!gr(s,r)||a;return l&&(this._active=s,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,o){const r=this.options;if(t.type==="mouseout")return[];if(!o)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,i){const{caretX:n,caretY:o,options:r}=this,s=dn[r.position].call(this,t,i);return s!==!1&&(n!==s.x||o!==s.y)}}vt(Uo,"positioners",dn);var Db={id:"tooltip",_element:Uo,positioners:dn,afterInit(e,t,i){i&&(e.tooltip=new Uo({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yu},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Nb=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function jb(e,t,i,n){const o=e.indexOf(t);if(o===-1)return Nb(e,t,i,n);const r=e.lastIndexOf(t);return o!==r?i:o}const Ub=(e,t)=>e===null?null:Re(Math.round(e),0,t);function ch(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Fo extends Gi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:o,label:r}of i)n[o]===r&&n.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(qt(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:jb(n,t,Ot(i,t),this._addedLabels),Ub(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,o=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=i;s++)o.push({value:s});return o}getLabelForValue(t){return ch.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}vt(Fo,"id","category"),vt(Fo,"defaults",{ticks:{callback:ch}});function Fb(e,t){const i=[],{bounds:o,step:r,min:s,max:a,precision:l,count:h,maxTicks:c,maxDigits:u,includeBounds:d}=e,g=r||1,b=c-1,{min:y,max:_}=t,E=!qt(s),x=!qt(a),w=!qt(h),O=(_-y)/(u+1);let P=gl((_-y)/b/g)*g,k,T,I,N;if(P<1e-14&&!E&&!x)return[{value:y},{value:_}];N=Math.ceil(_/P)-Math.floor(y/P),N>b&&(P=gl(N*P/b/g)*g),qt(l)||(k=Math.pow(10,l),P=Math.ceil(P*k)/k),o==="ticks"?(T=Math.floor(y/P)*P,I=Math.ceil(_/P)*P):(T=y,I=_),E&&x&&r&&Cp((a-s)/r,P/1e3)?(N=Math.round(Math.min((a-s)/P,c)),P=(a-s)/N,T=s,I=a):w?(T=E?s:T,I=x?a:I,N=h-1,P=(I-T)/N):(N=(I-T)/P,bn(N,Math.round(N),P/1e3)?N=Math.round(N):N=Math.ceil(N));const K=Math.max(ml(P),ml(T));k=Math.pow(10,qt(l)?K:l),T=Math.round(T*k)/k,I=Math.round(I*k)/k;let Q=0;for(E&&(d&&T!==s?(i.push({value:s}),T<s&&Q++,bn(Math.round((T+Q*P)*k)/k,s,uh(s,O,e))&&Q++):T<s&&Q++);Q<N;++Q){const A=Math.round((T+Q*P)*k)/k;if(x&&A>a)break;i.push({value:A})}return x&&d&&I!==a?i.length&&bn(i[i.length-1].value,a,uh(a,O,e))?i[i.length-1].value=a:i.push({value:a}):(!x||I===a)&&i.push({value:I}),i}function uh(e,t,{horizontal:i,minRotation:n}){const o=Ai(n),r=(i?Math.sin(o):Math.cos(o))||.001,s=.75*t*(""+e).length;return Math.min(t/r,s)}class Wb extends Gi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return qt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:o,max:r}=this;const s=l=>o=i?o:l,a=l=>r=n?r:l;if(t){const l=Hi(o),h=Hi(r);l<0&&h<0?a(0):l>0&&h>0&&s(0)}if(o===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||s(o-l)}this.min=o,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),i=i||11),i&&(o=Math.min(i,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,s=Fb(o,r);return t.bounds==="ticks"&&Op(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const o=(n-i)/Math.max(t.length-1,1)/2;i-=o,n+=o}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return _u(t,this.chart.options.locale,this.options.ticks.format)}}class Wo extends Wb{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=be(t)?t:0,this.max=be(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=Ai(this.options.ticks.minRotation),o=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}vt(Wo,"id","linear"),vt(Wo,"defaults",{ticks:{callback:vu.formatters.numeric}});const Pr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ce=Object.keys(Pr);function fh(e,t){return e-t}function dh(e,t){if(qt(t))return null;const i=e._adapter,{parser:n,round:o,isoWeekday:r}=e._parseOpts;let s=t;return typeof n=="function"&&(s=n(s)),be(s)||(s=typeof n=="string"?i.parse(s,n):i.parse(s)),s===null?null:(o&&(s=o==="week"&&(wr(r)||r===!0)?i.startOf(s,"isoWeek",r):i.startOf(s,o)),+s)}function ph(e,t,i,n){const o=ce.length;for(let r=ce.indexOf(e);r<o-1;++r){const s=Pr[ce[r]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((i-t)/(a*s.size))<=n)return ce[r]}return ce[o-1]}function zb(e,t,i,n,o){for(let r=ce.length-1;r>=ce.indexOf(i);r--){const s=ce[r];if(Pr[s].common&&e._adapter.diff(o,n,s)>=t-1)return s}return ce[i?ce.indexOf(i):0]}function Hb(e){for(let t=ce.indexOf(e)+1,i=ce.length;t<i;++t)if(Pr[ce[t]].common)return ce[t]}function gh(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:o}=ra(i,t),r=i[n]>=t?i[n]:i[o];e[r]=!0}}function $b(e,t,i,n){const o=e._adapter,r=+o.startOf(t[0].value,n),s=t[t.length-1].value;let a,l;for(a=r;a<=s;a=+o.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function mh(e,t,i){const n=[],o={},r=t.length;let s,a;for(s=0;s<r;++s)a=t[s],o[a]=s,n.push({value:a,major:!1});return r===0||!i?n:$b(e,n,o,i)}class xr extends Gi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),o=this._adapter=new im._date(t.adapters.date);o.init(i),mn(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:dh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:o,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function l(h){!s&&!isNaN(h.min)&&(o=Math.min(o,h.min)),!a&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!s||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=be(o)&&!isNaN(o)?o:+i.startOf(Date.now(),n),r=be(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,o=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,s=this.max,a=Dp(o,r,s);return this._unit=i.unit||(n.autoSkip?ph(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):zb(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Hb(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),mh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,o,r;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?i=1-o:i=(this.getDecimalForValue(t[1])-o)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;i=Re(i,0,s),n=Re(n,0,s),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,o=this.options,r=o.time,s=r.unit||ph(r.minUnit,i,n,this._getLabelCapacity(i)),a=Ot(o.ticks.stepSize,1),l=s==="week"?r.isoWeekday:!1,h=wr(l)||l===!0,c={};let u=i,d,g;if(h&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,h?"day":s),t.diff(n,i,s)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+s);const b=o.ticks.source==="data"&&this.getDataTimestamps();for(d=u,g=0;d<n;d=+t.add(d,a,s),g++)gh(c,d,b);return(d===n||o.bounds==="ticks"||g===1)&&gh(c,d,b),Object.keys(c).sort(fh).map(y=>+y)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const o=this.options.time.displayFormats,r=this._unit,s=i||o[r];return this._adapter.format(t,s)}_tickFormatFunction(t,i,n,o){const r=this.options,s=r.ticks.callback;if(s)return Ut(s,[t,i,n],this);const a=r.time.displayFormats,l=this._unit,h=this._majorUnit,c=l&&a[l],u=h&&a[h],d=n[i],g=h&&u&&d&&d.major;return this._adapter.format(t,o||(g?u:c))}generateTickLabels(t){let i,n,o;for(i=0,n=t.length;i<n;++i)o=t[i],o.label=this._tickFormatFunction(o.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,o=Ai(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(o),s=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,r=this._tickFormatFunction(t,0,mh(this,[t],this._majorUnit),o),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,n=o.length;i<n;++i)t=t.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const o=this.getLabels();for(i=0,n=o.length;i<n;++i)t.push(dh(this,o[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return jp(t.sort(fh))}}vt(xr,"id","time"),vt(xr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qn(e,t,i){let n=0,o=e.length-1,r,s,a,l;i?(t>=e[n].pos&&t<=e[o].pos&&({lo:n,hi:o}=Mo(e,"pos",t)),{pos:r,time:a}=e[n],{pos:s,time:l}=e[o]):(t>=e[n].time&&t<=e[o].time&&({lo:n,hi:o}=Mo(e,"time",t)),{time:r,pos:a}=e[n],{time:s,pos:l}=e[o]);const h=s-r;return h?a+(l-a)*(t-r)/h:a}class bh extends xr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Qn(i,this.min),this._tableRange=Qn(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,o=[],r=[];let s,a,l,h,c;for(s=0,a=t.length;s<a;++s)h=t[s],h>=i&&h<=n&&o.push(h);if(o.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(s=0,a=o.length;s<a;++s)c=o[s+1],l=o[s-1],h=o[s],Math.round((c+l)/2)!==h&&r.push({time:h,pos:s/(a-1)});return r}_generate(){const t=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((o,r)=>o-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Qn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Qn(this._table,n*this._tableRange+this._minPos,!0)}}vt(bh,"id","timeseries"),vt(bh,"defaults",xr.defaults);const Vb={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},qb={ariaLabel:{type:String},ariaDescribedby:{type:String}},Yb={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Vb,...qb};function Ui(e){return wh(e)?ns(e):e}function Kb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return wh(t)?new Proxy(e,{}):e}function Gb(e,t){const i=e.options;i&&t&&Object.assign(i,t)}function Ku(e,t){e.labels=t}function Gu(e,t,i){const n=[];e.datasets=t.map(o=>{const r=e.datasets.find(s=>s[i]===o[i]);return!r||!o.data||n.includes(r)?{...o}:(n.push(r),Object.assign(r,o),r)})}function Qb(e,t){const i={labels:[],datasets:[]};return Ku(i,e.labels),Gu(i,e.datasets,t),i}const Xb=Zu({props:Yb,setup(e,t){let{expose:i,slots:n}=t;const o=_i(null),r=tf(null);i({chart:r});const s=()=>{if(!o.value)return;const{type:h,data:c,options:u,plugins:d,datasetIdKey:g}=e,b=Qb(c,g),y=Kb(b,c);r.value=new ga(o.value,{type:h,data:y,options:{...u},plugins:d})},a=()=>{const h=ns(r.value);h&&(e.destroyDelay>0?setTimeout(()=>{h.destroy(),r.value=null},e.destroyDelay):(h.destroy(),r.value=null))},l=h=>{h.update(e.updateMode)};return yh(s),_h(a),ef([()=>e.options,()=>e.data],(h,c)=>{let[u,d]=h,[g,b]=c;const y=ns(r.value);if(!y)return;let _=!1;if(u){const E=Ui(u),x=Ui(g);E&&E!==x&&(Gb(y,E),_=!0)}if(d){const E=Ui(d.labels),x=Ui(b.labels),w=Ui(d.datasets),O=Ui(b.datasets);E!==x&&(Ku(y.config.data,E),_=!0),w&&w!==O&&(Gu(y.config.data,w,e.datasetIdKey),_=!0)}_&&nf(()=>{l(y)})},{deep:!0}),()=>_a("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:o},[_a("p",{},[n.default?n.default():""])])}}),Jb={class:"chart-container"},Zb={__name:"RealTimeChart",props:{data:{type:Object,required:!0},title:{type:String,default:"Real-Time Chart"}},setup(e){ga.register(Ib,Db,Ab,fn,Wo,hr,Fo);const t=e,i=rf(()=>({labels:t.data.x.map(o=>o.time),datasets:[{label:`${t.title} - X`,data:t.data.x.map(o=>o.value),borderColor:"#8884d8",tension:.1},{label:`${t.title} - Y`,data:t.data.y.map(o=>o.value),borderColor:"#82ca9d",tension:.1},{label:`${t.title} - Z`,data:t.data.z.map(o=>o.value),borderColor:"#ff7300",tension:.1}]})),n={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}};return(o,r)=>(rs(),ss("div",Jb,[Te(sf(Xb),{type:"line",data:i.value,options:n,height:300},null,8,["data"])]))}},Xn=vh(Zb,[["__scopeId","data-v-158a969a"]]),t0={class:"flex space-x-4"},e0={class:"w-1/2"},i0={class:"w-1/2"},n0={class:"flex space-x-4 mt-8"},r0={class:"w-1/2"},s0={class:"w-1/2"},o0={class:"flex justify-items-center flex-row mt-8"},a0=["src"],is=50,l0={__name:"FallDetection",setup(e){const t=["https://thingspeak.com/channels/2627027/charts/1?bgcolor=%23ffffff&color=%23d62020&days=1&dynamic=true&results=60&type=line","https://thingspeak.com/channels/2627027/charts/2?bgcolor=%23ffffff&color=%23d62020&days=1&dynamic=true&results=60&type=line","https://thingspeak.com/channels/2627027/charts/3?days=1&dynamic=&results=60&type="],i=_i(""),n=_i(""),o=_i({x:[],y:[],z:[]}),r=_i({x:[],y:[],z:[]}),s=_i({x:[],y:[],z:[]}),a=_i({x:[],y:[],z:[]}),l=Qd.connect("wss://broker.emqx.io:8084/mqtt"),h=(c,u)=>{const g={time:new Date().toLocaleTimeString(),x:parseFloat(u.x),y:parseFloat(u.y),z:parseFloat(u.z)};c.x.push({time:g.time,value:g.x}),c.y.push({time:g.time,value:g.y}),c.z.push({time:g.time,value:g.z}),c.x.length>is&&c.x.shift(),c.y.length>is&&c.y.shift(),c.z.length>is&&c.z.shift()};return yh(()=>{l.on("connect",()=>{console.log("Connected to MQTT broker"),l.subscribe("esp32/mpu1",c=>{c?console.error("Failed to subscribe to esp32/mpu1",c):console.log("Subscribed to esp32/mpu1")}),l.subscribe("esp32/mpu2",c=>{c?console.error("Failed to subscribe to esp32/mpu2",c):console.log("Subscribed to esp32/mpu2")})}),l.on("message",(c,u)=>{const d=JSON.parse(u.toString());c==="esp32/mpu1"?(i.value=d,h(o.value,d.accel),h(s.value,d.gyro)):c==="esp32/mpu2"&&(n.value=d,h(r.value,d.accel),h(a.value,d.gyro))})}),_h(()=>{l&&l.end()}),(c,u)=>{const d=af("n-h2");return rs(),ss(wa,null,[Te(Ju,{title:"Fall Detection Analysis"}),Ee("div",null,[Ee("div",t0,[Ee("div",e0,[Te(d,null,{default:Cn(()=>u[0]||(u[0]=[On("Sensor 1 Acceleration")])),_:1}),Te(Xn,{data:o.value,title:"Sensor 1 Acceleration",dataKey:"value"},null,8,["data"])]),Ee("div",i0,[Te(d,null,{default:Cn(()=>u[1]||(u[1]=[On("Sensor 2 Acceleration")])),_:1}),Te(Xn,{data:r.value,title:"Sensor 2 Acceleration",dataKey:"value"},null,8,["data"])])]),Ee("div",n0,[Ee("div",r0,[Te(d,null,{default:Cn(()=>u[2]||(u[2]=[On("Sensor 1 Gyroscope")])),_:1}),Te(Xn,{data:s.value,title:"Sensor 1 Gyroscope",dataKey:"value"},null,8,["data"])]),Ee("div",s0,[Te(d,null,{default:Cn(()=>u[3]||(u[3]=[On("Sensor 2 Gyroscope")])),_:1}),Te(Xn,{data:a.value,title:"Sensor 2 Gyroscope",dataKey:"value"},null,8,["data"])])])]),Ee("div",o0,[(rs(),ss(wa,null,of(t,(g,b)=>Ee("div",{key:b},[Ee("iframe",{width:"450",height:"260",style:{border:"1px solid #cccccc"},src:g},null,8,a0)])),64))])],64)}}},d0=vh(l0,[["__scopeId","data-v-cf32c551"]]);export{d0 as default};
